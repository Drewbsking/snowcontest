(()=>{"use strict";var e={2:(e,t,s)=>{var n=s(592),i=s(73),r=s(24),a=s(211),o=s(125);const l=285;class c extends r.A{constructor(e,t,s){super(e,t,"Hourly Graph",s),document.addEventListener("DOMContentLoaded",()=>{this.moveHeader()})}moveHeader(){const e=this.fillTemplate("top-right",{});this.elem.querySelector(".header .right").append(e)}async getData(e,t){if(!super.getData(void 0,t))return;const s=await(0,i.A)(()=>this.stillWaiting());if(!s)return void(this.isEnabled&&this.setStatus(n.Ay.failed));const r=s.map(e=>e.temperature),a=s.map(e=>e.probabilityOfPrecipitation),o=s.map(e=>e.skyCover);this.data={skyCover:o,temperature:r,probabilityOfPrecipitation:a,temperatureUnit:s[0].temperatureUnit},this.setStatus(n.Ay.loaded)}drawCanvas(){this.image||(this.image=this.elem.querySelector(".chart img")),this.image.width=532,this.image.height=l;const e=document.createElement("canvas");e.width=532,e.height=l;const t=e.getContext("2d");t.imageSmoothingEnabled=!1;const s=u(0,5,this.data.temperature.length-1,532),n=o.c9.now().startOf("hour");document.querySelector(".x-axis .l-1").innerHTML=m(n),document.querySelector(".x-axis .l-2").innerHTML=m(n.plus({hour:6})),document.querySelector(".x-axis .l-3").innerHTML=m(n.plus({hour:12})),document.querySelector(".x-axis .l-4").innerHTML=m(n.plus({hour:18})),document.querySelector(".x-axis .l-5").innerHTML=m(n.plus({hour:24}));const i=u(0,275,100,10),r=d(this.data.skyCover,s,i);h(r,t,{strokeStyle:"lightgrey",lineWidth:3});const a=d(this.data.probabilityOfPrecipitation,s,i);h(a,t,{strokeStyle:"aqua",lineWidth:3});const c=Math.min(...this.data.temperature),f=Math.max(...this.data.temperature),p=Math.round((c+f)/2),g=u(c,275,f,10),y=d(this.data.temperature,s,g);h(y,t,{strokeStyle:"red",lineWidth:3});const w=String.fromCharCode(176);this.elem.querySelector(".y-axis .l-1").innerHTML=(f+w).substring(0,3),this.elem.querySelector(".y-axis .l-2").innerHTML=(p+w).substring(0,3),this.elem.querySelector(".y-axis .l-3").innerHTML=(c+w).substring(0,3),this.image.src=e.toDataURL(),this.elem.querySelector(".temperature").innerHTML=`Temperature ${String.fromCharCode(176)}${this.data.temperatureUnit}`,super.drawCanvas(),this.finishDraw()}}const u=(e,t,s,n)=>{const i=(n-t)/(s-e),r=t-i*e;return e=>i*e+r},d=(e,t,s)=>e.map((e,n)=>[t(n),s(e)]),h=(e,t,s)=>{t.beginPath(),t.strokeStyle="black",t.lineWidth=(s?.lineWidth??2)+2,t.moveTo(e[0][0],e[0][1]),e.slice(1).forEach(e=>t.lineTo(e[0],e[1]+2)),t.stroke(),t.beginPath(),t.strokeStyle=s?.strokeStyle??"red",t.lineWidth=s?.lineWidth??2,t.moveTo(e[0][0],e[0][1]),e.slice(1).forEach(e=>t.lineTo(e[0],e[1])),t.stroke()},m=e=>e.setZone((0,a.eB)()).toFormat("ha").slice(0,-1);(0,a.Kb)(new c(4,"hourly-graph"))},19:(e,t,s)=>{var n=s(592),i=s(125),r=s(675),a=s(24),o=s(211);const l=680,c=387,u=10,d=11,h=6800,m=4255,f=2550,p=1600,g=640,y=367,w=(e,t,s)=>Math.max(Math.min(t,s),e);var v=s(957);const S=(e,t)=>{const s=Math.floor(e/l),n=Math.floor(t/c);return!(s<0||s>u||n<0||n>d)&&`${n}-${s}`},b=e=>{const{sourceXY:t,elemId:s}=e,n=`${s}-html`,i=[S(t.x,t.y),S(t.x+l,t.y),S(t.x,t.y+c),S(t.x+l,t.y+c)],r=(a=t.x,o=t.y,{x:Math.round(a)%l,y:Math.round(o)%c});var a,o;const u=[!0,l-r.x<g,c-r.y<g];u.push(u[1]&&u[2]);const d=e=>(t,s)=>{if(t.width=l,t.height=c,!u[s])return void(t.src="");const n=`images/maps/radar/${e}-${i[s]}.webp`;t.src!==n&&(t.src=n)};(0,v.g)(`#${n} .map-tiles img`,d("map")),(0,v.g)(`#${n} .overlay-tiles img`,d("overlay"));const h=document.querySelector(`#${n} .map-tiles`);h.style.top=-r.y+"px",h.style.left=-r.x+"px";const m=document.querySelector(`#${n} .overlay-tiles`);m.style.top=-r.y+"px",m.style.left=-r.x+"px"},k=async e=>{const{url:t,RADAR_HOST:s,OVERRIDES:n,radarSourceXY:i}=e,r=n.RADAR_HOST?t.replace(s,n.RADAR_HOST):t,a=fetch(r),o={width:240,height:163,x:Math.round(i.x/2),y:Math.round(i.y/2)},l=document.createElement("canvas");l.width=f,l.height=p;const c=l.getContext("2d");c.imageSmoothingEnabled=!1;const u=await a;if(!u.ok)throw new Error(`Unable to fetch radar error ${u.status} ${u.statusText} from ${u.url}`);const d=await u.blob(),h=await createImageBitmap(d);c.clearRect(0,0,f,p),c.drawImage(h,0,0,f,p);const m=document.createElement("canvas");m.width=o.width,m.height=o.height;const w=m.getContext("2d");w.imageSmoothingEnabled=!1,w.drawImage(l,o.x,o.y,m.width,m.height,0,0,m.width,m.height),(e=>{if(!e||!e.canvas)return void console.error("Invalid radar context provided to removeDopplerRadarImageNoise");const{canvas:t}=e;if(t.width<=0||t.height<=0)console.error(`Invalid canvas dimensions in removeDopplerRadarImageNoise: ${t.width}x${t.height}`);else try{const s=e.getImageData(0,0,t.width,t.height);for(let e=0;e<s.data.length;e+=4){let t=s.data[e],n=s.data[e+1],i=s.data[e+2],r=s.data[e+3];0===t&&0===n&&0===i||0===t&&236===n&&236===i||1===t&&160===n&&246===i||0===t&&0===n&&246===i?(t=0,n=0,i=0,r=0):0===t&&255===n&&0===i?(t=49,n=210,i=22,r=255):0===t&&200===n&&0===i?(t=0,n=142,i=0,r=255):0===t&&144===n&&0===i?(t=20,n=90,i=15,r=255):255===t&&255===n&&0===i?(t=10,n=40,i=10,r=255):231===t&&192===n&&0===i?(t=196,n=179,i=70,r=255):255===t&&144===n&&0===i?(t=190,n=72,i=19,r=255):214===t&&0===n&&0===i||255===t&&0===n&&0===i?(t=171,n=14,i=14,r=255):(192===t&&0===n&&0===i||255===t&&0===n&&255===i)&&(t=115,n=31,i=4,r=255),s.data[e]=t,s.data[e+1]=n,s.data[e+2]=i,s.data[e+3]=r}e.putImageData(s,0,0)}catch(e){console.error(`Error in removeDopplerRadarImageNoise: ${e.message}. Canvas size: ${t.width}x${t.height}`)}})(w);const v=document.createElement("canvas");v.width=g,v.height=y;const S=v.getContext("2d",{willReadFrequently:!0});return S.imageSmoothingEnabled=!1,S.drawImage(m,0,0,o.width,o.height,0,0,g,y),v.toDataURL()};let C=[];const T="mesonet.agron.iastate.edu";class x extends a.A{constructor(e,t){super(e,t,"Local Radar"),this.okToDrawCurrentConditions=!1,this.okToDrawCurrentDateTime=!1,this.dopplerRadarImageMax=6,this.timing.baseDelay=350,this.timing.delay=[{time:4,si:5},{time:1,si:0},{time:1,si:1},{time:1,si:2},{time:1,si:3},{time:1,si:4},{time:4,si:5},{time:1,si:0},{time:1,si:1},{time:1,si:2},{time:1,si:3},{time:1,si:4},{time:4,si:5},{time:1,si:0},{time:1,si:1},{time:1,si:2},{time:1,si:3},{time:1,si:4},{time:12,si:5}]}async getData(e,t){if(!super.getData(e,t))return;if("AK"===this.weatherParameters.state||"HI"===this.weatherParameters.state)return void this.setStatus(n.Ay.noData);const s=`https://${T}/archive/data/`,a="/GIS/uscomp/?F=0&P=n0r*.png",u=i.c9.utc().startOf("day"),d=u.toFormat("yyyy/LL/dd"),f=u.minus({days:1}).toFormat("yyyy/LL/dd"),p=`${s}${d}${a}`,g=await(0,r.Hk)(p);let y=0;if(g){const e=(new DOMParser).parseFromString(g,"text/html").querySelectorAll("a");y=Array.from(e).filter(e=>e.innerHTML?.match(/n0r_\d{12}\.png/)).length}const v=i.c9.utc(),S=60*v.hour+v.minute,x=5*this.dopplerRadarImageMax,M=y<this.dopplerRadarImageMax||S<x,D=[];if(M){const e=`${s}${f}${a}`,t=await(0,r.Hk)(e);t&&D.push(t)}g&&D.push(g);const $=D.flatMap((e,t)=>{const n=(new DOMParser).parseFromString(e,"text/html"),i=n.createElement("base");i.href=0===t&&M?`${s}${f}${a}`:`${s}${d}${a}`,n.head.append(i);const r=n.querySelectorAll("a"),o=[];return Array.from(r).forEach(e=>{e.innerHTML?.match(/n0r_\d{12}\.png/)&&o.push(e.href)}),o}),L=/_(\d{12})\.png/,E=$.sort((e,t)=>e.match(L)[1]<t.match(L)[1]?-1:1).slice(-this.dopplerRadarImageMax),I=(e=>{const t=w(0,-145.095*e.latitude+7377.117-27-c/2,m-c);return{x:w(0,111.407*e.longitude+14220.972+4-l/2,h-l),y:t}})(this.weatherParameters),N=((e,t,s)=>{const n=w(0,61.4481*(51-e.latitude)-s,6e3);return{x:2*w(0,42.1768*(-129.138-e.longitude)*-1-t,2800),y:2*n}})(this.weatherParameters,240,138);b({sourceXY:I,elemId:this.elemId});const A=`${N.x.toFixed(0)}-${N.y.toFixed(0)}`;C.forEach(e=>{e.used=!1});try{const e=await Promise.all(E.map(async e=>{const t=e.match(/_(\d{4})(\d\d)(\d\d)(\d\d)(\d\d)\./),[,s,n,r,a,l]=t,c=`${A}:${s}${n}${r}${a}${l}`,u=C.find(e=>e.key===c),d=u?.dataURL??await k({url:e,RADAR_HOST:T,OVERRIDES,radarSourceXY:N});u?u.used=!0:C.push({key:c,dataURL:d,used:!0});return{time:i.c9.fromObject({year:s,month:n,day:r,hour:a,minute:l},{zone:"UTC"}).setZone((0,o.eB)()),elem:this.fillTemplate("frame",{map:{type:"img",src:d}})}})),t=this.elem.querySelector(".scroll-area");t.innerHTML="",t.append(...e.map(e=>e.elem)),this.timing.totalScreens=e.length,this.times=e.map(e=>e.time),this.setStatus(n.Ay.loaded),C=C.filter(e=>e.used)}catch(e){this.timing.totalScreens=0,this.isEnabled&&this.setStatus(n.Ay.failed)}}async drawCanvas(){super.drawCanvas();const e=this.times[this.screenIndex].toLocaleString(i.c9.TIME_SIMPLE),t=e.length>=8?e:`&nbsp;${e} `;this.elem.querySelector(".header .right .time").innerHTML=t;const s=this.elem.querySelector(".frame").scrollHeight;this.elem.querySelector(".scroll-area").style.top=-this.screenIndex*s+"px",this.finishDraw()}}(0,o.Kb)(new x(11,"radar"))},24:(e,t,s)=>{s.d(t,{A:()=>u});var n=s(592),i=s(125),r=s(211),a=s(999),o=s(593),l=s(957),c=s(693);const u=class{constructor(e,t,s,i){this.navId=e,this.elemId=void 0,this.data=void 0,this.loadingStatus=n.Ay.loading,this.name=s??t,this.getDataCallbacks=[],this.stillWaitingCallbacks=[],this.defaultEnabled=i,this.okToDrawCurrentConditions=!0,this.okToDrawCurrentDateTime=!0,this.showOnProgress=!0,this.autoRefreshHandle=null,this.timing={totalScreens:1,baseDelay:9e3,delay:1},this.navBaseCount=0,this.screenIndex=-1,this.storeElemId(t),this.isEnabled?this.setStatus(n.Ay.loading):this.setStatus(n.Ay.disabled),this.startNavCount(),document.addEventListener("DOMContentLoaded",()=>{this.loadTemplates()})}generateCheckbox(e=!0){if("progress"===this.elemId)return!1;const t=(0,a.J)()?.[`${this.elemId}-checkbox`];let s;void 0!==t&&(s="true"===t);let n=s??window.localStorage.getItem(`display-enabled: ${this.elemId}`);null===n&&(n=e),this.isEnabled=!("true"!==n&&!0!==n),window.localStorage.setItem(`display-enabled: ${this.elemId}`,this.isEnabled);const i=document.createElement("label");i.for=`${this.elemId}-checkbox`,i.id=`${this.elemId}-label`;const r=document.createElement("input");r.type="checkbox",r.value=!0,r.id=`${this.elemId}-checkbox`,r.name=`${this.elemId}-checkbox`,r.checked=this.isEnabled,r.addEventListener("change",e=>this.checkboxChange(e));const o=document.createElement("span");o.innerHTML=this.name;const l=document.createElement("span");return l.innerHTML="!!!",l.classList.add("alert"),i.append(r,o,l),this.checkbox=i,i}checkboxChange(e){this.isEnabled=e.target.checked,window.localStorage.setItem(`display-enabled: ${this.elemId}`,this.isEnabled),this.getData()}setStatus(e){this.status=e,(0,r.yB)({id:this.navId,status:this.status}),this.checkbox&&(this.checkbox.classList.remove(...n.LR),this.checkbox.classList.add((0,n.qx)(e)))}get status(){return this.loadingStatus}set status(e){this.loadingStatus=e}storeElemId(e){this.elemId||(this.elemId=e)}getData(e,t){return t||(this.data=void 0,this.clearAutoReload()),e&&(this.weatherParameters=e),this.isEnabled?(this.setStatus(n.Ay.loading),this.setAutoReload(),this.calcNavTiming(),!0):(this.setStatus(n.Ay.disabled),!1)}getDataCallback(){this.getDataCallbacks.forEach(e=>e(this.data)),this.getDataCallbacks=[]}drawCanvas(){this.screenIndex<0&&(this.screenIndex=0),this.okToDrawCurrentDateTime&&this.drawCurrentDateTime(),this.okToDrawCurrentConditions&&postMessage({type:"current-weather-scroll",method:"start"}),!1===this.okToDrawCurrentConditions&&postMessage({type:"current-weather-scroll",method:"hide"})}finishDraw(){this.okToDrawCurrentDateTime&&(this.drawCurrentDateTime(),this.dateTimeInterval||(this.dateTimeInterval=setInterval(()=>this.active&&this.drawCurrentDateTime(),100)))}drawCurrentDateTime(){const e=i.c9.local().setZone((0,r.eB)()),t=e.toLocaleString(i.c9.TIME_WITH_SECONDS).padStart(11," "),s=e.toFormat(" ccc LLL ")+e.day.toString().padStart(2," "),n=this.elem.querySelector(".date-time.date"),a=this.elem.querySelector(".date-time.time");a&&this.lastTime!==t&&(a.innerHTML=t.toUpperCase()),this.lastTime=t,n&&this.lastDate!==s&&(n.innerHTML=s.toUpperCase()),this.lastDate=s}showCanvas(e){e===r.ab.command.firstFrame&&this.navNext(e),e===r.ab.command.lastFrame&&this.navPrev(e),this.startNavCount(),this.elem.classList.add("show"),document.querySelector("#divTwc").classList.add(this.elemId)}hideCanvas(){this.resetNavBaseCount(),this.elem.classList.remove("show"),document.querySelector("#divTwc").classList.remove(this.elemId)}get active(){return 0!==this.elem.offsetHeight}get enabled(){return this.isEnabled}navBaseTime(){if((0,r.F4)()&&this.active){if(this.navBaseCount+=1,(0,c.Ik)("weatherdisplay")){const e=Date.now();this.timingDebug||(this.timingDebug={startTime:e,lastTransition:e,baseCountLog:[]},1!==this.navBaseCount&&console.log(`⏱️ [${this.constructor.name}] Starting at baseCount ${this.navBaseCount}`));const t=e-this.timingDebug.lastTransition;this.timingDebug.baseCountLog.push({baseCount:this.navBaseCount,timestamp:e,elapsedMs:t,screenIndex:this.screenIndex})}this.baseCountChange&&this.baseCountChange(this.navBaseCount),this.updateScreenFromBaseCount()}}async updateScreenFromBaseCount(){const e=this.screenIndexFromBaseCount();if(!1!==e){if(e!==this.screenIndex){if((0,c.Ik)("weatherdisplay")&&this.timingDebug){const t=Date.now(),s=t-this.timingDebug.lastTransition;if(this.timingDebug.lastTransition=t,console.log(`⏱️ [${this.constructor.name}] Screen Transition: ${this.screenIndex} → ${-1===e?0:e}, baseCount=${this.navBaseCount}, duration=${s}ms`),-1!==this.screenIndex&&this.timing&&void 0!==this.timing.delay){let e;if(Array.isArray(this.timing.delay)){const t=this.screenIndex;if(t>=0&&t<this.timing.delay.length){const s="object"==typeof this.timing.delay[t]?this.timing.delay[t].time:this.timing.delay[t];e=this.timing.baseDelay*s*(o.A?.speed?.value||1)}}else"number"==typeof this.timing.delay&&(e=this.timing.baseDelay*this.timing.delay*(o.A?.speed?.value||1));void 0!==e&&console.log(`⏱️ [${this.constructor.name}] Expected duration: ${e}ms, Actual: ${s}ms, Diff: ${s-e}ms`)}}this.screenIndex=-1===e?0:e,this.screenIndexChange?this.screenIndexChange(this.screenIndex):await this.drawCanvas(),this.showCanvas()}}else this.sendNavDisplayMessage(r.ab.response.next)}calcNavTiming(){if(!1===this.timing)return;Array.isArray(this.timing.delay)&&(this.timing.totalScreens=this.timing.delay.length);let e=[];if("number"==typeof this.timing.delay)for(let t=0;t<this.timing.totalScreens;t+=1)e.push(this.timing.delay);else e=this.timing.delay.map(e=>"object"==typeof e?e.time:e);let t=0;if(this.timing.fullDelay=e.map(e=>{const s=t+e;return t+=e,s}),Array.isArray(this.timing.delay)&&"object"==typeof this.timing.delay[0])this.timing.screenIndexes=this.timing.delay.map(e=>e.si);else{this.timing.screenIndexes=[];for(let e=0;e<this.timing.totalScreens;e+=1)this.timing.screenIndexes.push(e)}}navNext(e){if(e===r.ab.command.firstFrame)this.resetNavBaseCount();else{const e=this.timing.fullDelay.find(e=>e>this.navBaseCount);this.navBaseCount=e}this.updateScreenFromBaseCount()}navPrev(e){if(e===r.ab.command.lastFrame)this.navBaseCount=this.timing.fullDelay[this.timing.totalScreens-1]-1;else{const e=this.timing.fullDelay.reduce((e,t)=>t<this.navBaseCount?t:e,0);if(0===e&&0===this.navBaseCount)return void this.sendNavDisplayMessage(r.ab.response.previous);this.navBaseCount=e}this.updateScreenFromBaseCount()}screenIndexFromBaseCount(){if(!this.timing)return 0;if(0===this.timing.totalScreens)return!1;this.timing&&!this.timing.fullDelay&&this.calcNavTiming();const e=this.timing.fullDelay.findIndex(e=>e>this.navBaseCount);return-1!==e&&this.timing.screenIndexes[e]}startNavCount(){this.navInterval||((0,c.Ik)("weatherdisplay")&&console.log(`⏱️ [${this.constructor.name}] Starting navigation:`,{baseDelay:this.timing.baseDelay,intervalMs:this.timing.baseDelay*(o.A?.speed?.value||1),totalScreens:this.timing.totalScreens,delayArray:this.timing.delay,fullDelayArray:this.timing.fullDelay,screenIndexes:this.timing.screenIndexes}),this.navInterval=setInterval(()=>this.navBaseTime(),this.timing.baseDelay*o.A.speed.value))}resetNavBaseCount(){if((0,c.Ik)("weatherdisplay")&&this.timingDebug&&this.timingDebug.baseCountLog.length>1){const e=this.timingDebug.baseCountLog[this.timingDebug.baseCountLog.length-1].timestamp-this.timingDebug.baseCountLog[0].timestamp,t=e/(this.timingDebug.baseCountLog.length-1);console.log(`⏱️ [${this.constructor.name}] Total duration: ${e}ms, Avg base interval: ${t.toFixed(1)}ms, Base count range: ${this.timingDebug.baseCountLog[0].baseCount}-${this.timingDebug.baseCountLog[this.timingDebug.baseCountLog.length-1].baseCount}`),this.timingDebug=null}this.navBaseCount=0,this.screenIndex=-1,this.navInterval&&(clearInterval(this.navInterval),this.navInterval=void 0)}sendNavDisplayMessage(e){(0,r.Ju)({id:this.navId,type:e})}loadTemplates(){this.templates={},this.elem=document.querySelector(`#${this.elemId}-html`),this.elem&&(0,l.g)(`#${this.elemId}-html .template`,e=>{const t=e.classList[0],s=e.cloneNode(!0);s.classList.remove("template"),this.templates[t]=s,e.remove()})}fillTemplate(e,t){const s=this.templates[e];if(!s)return!1;const n=s.cloneNode(!0);return Object.entries(t).forEach(([e,t])=>{const s=n.querySelector(`.${e}`);s&&("string"==typeof t||"number"==typeof t?s.innerHTML=t:"img"===t?.type?s.querySelector("img").src=t.src:"canvas"===t?.type&&s.append(t.canvas))}),n}stillWaiting(){this.isEnabled&&this.setStatus(n.Ay.retrying),this.stillWaitingCallbacks.forEach(e=>e()),this.stillWaitingCallbacks=[]}clearAutoReload(){clearInterval(this.autoRefreshHandle),this.autoRefreshHandle=null}setAutoReload(){const e=this.refreshTime??o.A.refreshTime.value;this.autoRefreshHandle=this.autoRefreshHandle??setInterval(()=>this.getData(this.weatherParameters,!0),e)}}},31:(e,t,s)=>{var n=s(675),i=s(430),r=s(211),a=s(413),o=s(999),l=s(593);const c=27,u=38,d=40,h=13,m={serviceUrl:null,minChars:3,maxHeight:300,deferRequestBy:0,params:{},zIndex:9999,type:"GET",containerClass:"autocomplete-suggestions",paramName:"query",transformResult:e=>e,showNoSuggestionNotice:!1,noSuggestionNotice:"No results"};const f=class{constructor(e,t){this.options={...m,...t},this.elem=e,this.selectedItem=-1,this.onChangeTimeout=null,this.currentValue="",this.suggestions=[],this.cachedResponses={};const s=document.createElement("div");s.style.display="none",s.classList.add(this.options.containerClass),s.style.width="string"==typeof this.options.width?this.options.width:`${this.options.width}px`,s.style.zIndex=this.options.zIndex,s.style.maxHeight=`${this.options.maxHeight}px`,s.style.overflowX="hidden",s.addEventListener("mouseover",e=>this.mouseOver(e)),s.addEventListener("mouseout",e=>this.mouseOut(e)),s.addEventListener("click",e=>this.click(e)),this.results=s,this.elem.after(s),this.elem.addEventListener("keyup",e=>this.keyUp(e)),this.elem.closest("form")?.addEventListener("submit",e=>this.directFormSubmit(e)),this.elem.addEventListener("click",()=>this.deselectAll()),document.addEventListener("click",e=>this.checkOutsideClick(e))}mouseOver(e){e.target?.classList?.contains("suggestion")&&(e.target.classList.add("selected"),this.selectedItem=parseInt(e.target.dataset.item,10))}mouseOut(e){e.target?.classList?.contains("suggestion")&&(e.target.classList.remove("selected"),this.selectedItem=-1)}click(e){if(e.target?.classList?.contains("suggestion")){const t=this.suggestions[parseInt(e.target.dataset.item,10)];this.options.onSelect(t),this.elem.value=t.value,this.hideSuggestions()}}hideSuggestions(){this.results.style.display="none"}showSuggestions(){this.results.style.removeProperty("display")}clearSuggestions(){this.results.innerHTML=""}keyUp(e){switch(clearTimeout(this.onChangeTimeout),e.which){case c:return void this.hideSuggestions();case u:case d:return void this.keySelect(e.which);case h:return void 0!==this.getSelected()?void this.click({target:this.results.querySelector(".suggestion.selected")}):void(document.activeElement.id===this.elem.id&&this.directFormSubmit())}this.currentValue!==this.elem.value&&this.options.deferRequestBy>0&&(this.onChangeTimeout=setTimeout(()=>{this.onValueChange()},this.options.deferRequestBy))}setValue(e){this.currentValue=e,this.elem.value=e}onValueChange(){clearTimeout(this.onValueChange),this.currentValue!==this.elem.value&&(this.currentValue=this.elem.value,this.selectedItem=-1,this.results.querySelectorAll("div").forEach(e=>e.classList.remove("selected")),this.currentValue.length<this.options.minChars?this.hideSuggestions():this.getSuggestions(this.currentValue))}async getSuggestions(e,t=!1){const s={...this.options.params};s[this.options.paramName]=e;const i=new URL(this.options.serviceUrl);Object.entries(s).forEach(([e,t])=>{i.searchParams.append(e,t)});let r=this.cachedResponses[e];if(!r){const e=await(0,n.Pq)(i);r=this.options.transformResult(e)}this.cachedResponses[e]=r,this.suggestions=r.suggestions,t||this.populateSuggestions()}populateSuggestions(){if(0===this.suggestions.length)return void(this.options.showNoSuggestionNotice?this.noSuggestionNotice():this.hideSuggestions());const e=this.suggestions.map((e,t)=>{const s=document.createElement("div");return s.classList.add("suggestion"),s.dataset.item=t,s.innerHTML=((e,t)=>{if(!t)return e;const s=`(${n=t,n.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&")})`;var n;return e.replace(new RegExp(s,"gi"),"<strong>$1</strong>").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>")})(e.value,this.currentValue),s.outerHTML});this.results.innerHTML=e.join(""),this.showSuggestions()}noSuggestionNotice(){this.results.innerHTML=`<div>${this.options.noSuggestionNotice}</div>`,this.showSuggestions()}async directFormSubmit(){if(this.currentValue.length<this.options.minChars)return;await this.getSuggestions(this.elem.value,!0);const e=this.suggestions?.[0];e&&(this.options.onSelect(e),this.elem.value=e.value,this.hideSuggestions())}getSelected(){const e=this.results.querySelector(".selected")?.dataset?.item;return void 0!==e?parseInt(e,10):e}keySelect(e){if("none"===this.results.style.display)return;if(this.suggestions.length<=0)return;let t=this.getSelected();switch(e){case u:t=(t??0)-1;break;case d:t=(t??-1)+1}t=(t%this.suggestions.length+this.suggestions.length)%this.suggestions.length,this.deselectAll(),this.mouseOver({target:this.results.querySelectorAll(".suggestion")[t]})}deselectAll(){[...this.results.querySelectorAll(".suggestion.selected")].forEach(e=>e.classList.remove("selected")),this.selectedItem=0}checkOutsideClick(e){"txtLocation"!==e.target.id&&(e.target?.parentNode?.classList?.contains(this.options.containerClass)||this.hideSuggestions())}};let p={};const g=async(e,t="")=>{if(p[e])return p[e];try{const s=`data/${e}.json${t?`?_=${t}`:""}`,n=await fetch(s);if(!n.ok)throw new Error(`Failed to load ${e}: ${n.status}`);const i=await n.json();return p[e]=i,i}catch(t){throw console.error(`Error loading ${e}:`,t),t}};var y=s(693);document.addEventListener("DOMContentLoaded",()=>{k(),z()});const w=["Land Features","Bay","Channel","Cove","Dam","Delta","Gulf","Lagoon","Lake","Ocean","Reef","Reservoir","Sea","Sound","Strait","Waterfall","Wharf","Amusement Park","Historical Monument","Landmark","Tourist Attraction","Zoo","College","Beach","Campground","Golf Course","Harbor","Nature Reserve","Other Parks and Outdoors","Park","Racetrack","Scenic Overlook","Ski Resort","Sports Center","Sports Field","Wildlife Reserve","Airport","Ferry","Marina","Pier","Port","Resort","Postal","Populated Place"].join(","),v="#txtLocation",S="#ToggleFullScreen",b="#btnGetGps",k=async()=>{try{await(async(e="")=>{const[t,s,n]=await Promise.all([g("travelcities",e),g("regionalcities",e),g("stations",e)]);return window.TravelCities=t,window.RegionalCities=s,window.StationInfo=n,{travelCities:t,regionalCities:s,stationInfo:n}})("undefined"!=typeof OVERRIDES&&OVERRIDES.VERSION?OVERRIDES.VERSION:"")}catch(e){return console.error("Failed to load core application data:",e),void(document.body.innerHTML="\n\t\t\t<div>\n\t\t\t\t<h2>Unable to load Weather Data</h2>\n\t\t\t\t<p>The application cannot start because core data failed to load.</p>\n\t\t\t\t<p>Please check your connection and try refreshing.</p>\n\t\t\t</div>\n\t\t")}document.querySelector(v).addEventListener("focus",e=>{e.target.select()}),document.querySelector("#NavigateMenu").addEventListener("click",E),document.querySelector("#NavigateRefresh").addEventListener("click",A),document.querySelector("#NavigateNext").addEventListener("click",O),document.querySelector("#NavigatePrevious").addEventListener("click",P),document.querySelector("#NavigatePlay").addEventListener("click",H),document.querySelector("#ToggleScanlines").addEventListener("click",V);const e=document.querySelector(S);(0,r.un)()?e.style.display="none":e.addEventListener("click",M);const t=document.querySelector(b);t.addEventListener("click",_),navigator.geolocation||(t.style.display="none"),document.querySelector("#divTwc").addEventListener("mousemove",()=>{document.fullscreenElement&&W()}),document.querySelector("#btnGetLatLng").addEventListener("click",()=>s.directFormSubmit()),document.addEventListener("keydown",R),document.addEventListener("touchmove",e=>{document.fullscreenElement&&e.preventDefault()});const s=new f(document.querySelector(v),{serviceUrl:"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/suggest",deferRequestBy:300,paramName:"text",params:{f:"json",countryCode:"USA",category:w,maxSuggestions:10},dataType:"json",transformResult:e=>({suggestions:e.suggestions.map(e=>({value:e.text,data:e.magicKey}))}),minChars:3,showNoSuggestionNotice:!0,noSuggestionNotice:"No results found. Please try a different search string.",onSelect(e){T(e)},width:490});window.autoComplete=s;const n=(0,o.J)(),i=!!n.latLon,a=n.latLonQuery??localStorage.getItem("latLonQuery"),c=n.latLon??localStorage.getItem("latLon"),u=localStorage.getItem("latLonFromGPS")&&!i;if(n.latLonQuery&&!n.latLon){document.querySelector(v).value=n.latLonQuery;const e=await C(n.latLonQuery);e&&x(e)}else if(c&&!u){if(a&&!i||n.latLonQuery&&i){document.querySelector(v).value=a}if(i&&n.latLon&&!n.latLonQuery){const{lat:e,lon:t}=JSON.parse(c);U(e,t,!0)}else I(JSON.parse(c))}u&&_();const d=n["settings-kiosk-checkbox"];"false"===d?(l.A.kiosk.value=!1,l.A.kiosk.conditionalStoreToLocalStorage(!1,!1)):"true"===d&&(l.A.kiosk.value=!0);const h=l.A.kiosk.value||"true"===d?"true":localStorage.getItem("play");null!==h&&"true"!==h||q("navButton","play"),document.querySelector("#btnClearQuery").addEventListener("click",()=>{document.querySelector("#spanCity").innerHTML="",document.querySelector("#spanState").innerHTML="",document.querySelector("#spanStationId").innerHTML="",document.querySelector("#spanRadarId").innerHTML="",document.querySelector("#spanZoneId").innerHTML="",document.querySelector("#spanOfficeId").innerHTML="",document.querySelector("#spanGridPoint").innerHTML="",localStorage.removeItem("play"),q("navButton","play"),localStorage.removeItem("latLonQuery"),localStorage.removeItem("latLon"),localStorage.removeItem("latLonFromGPS"),document.querySelector(b).classList.remove("active")}),document.querySelector("#container").addEventListener("swiped-left",()=>N("left")),document.querySelector("#container").addEventListener("swiped-right",()=>N("right"))},C=async e=>{try{const t=await(0,n.Pq)("https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/find",{data:{text:e,f:"json"}}),s=t.locations?.[0];return s?s.feature.geometry:null}catch(e){return console.error("Geocoding failed:",e),null}},T=async e=>{const t=(await(0,n.Pq)("https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/find",{data:{text:e.value,magicKey:e.data,f:"json"}})).locations[0];t?(localStorage.removeItem("latLonFromGPS"),document.querySelector(b).classList.remove("active"),x(t.feature.geometry)):console.error("An unexpected error occurred. Please try a different search string.")},x=(e,t)=>{const s={lat:(0,a.X4)(e.y,4),lon:(0,a.X4)(e.x,4)};localStorage.setItem("latLonQuery",document.querySelector(v).value),localStorage.setItem("latLon",JSON.stringify(s)),I(s,t)},M=()=>(document.fullscreenElement?$():D(),(0,r.F4)()?(0,i.A)(!0):(0,i.A)(!1),W(),!1),D=async()=>{const e=document.querySelector("#divTwc"),t=e.requestFullscreen||e.webkitRequestFullscreen||e.mozRequestFullscreen||e.msRequestFullscreen;if(t)try{await t.call(e,{navigationUI:"hide",allowsInlineMediaPlayback:!0}),(0,y.Ik)("fullscreen")&&setTimeout(()=>{console.log(`🖥️ Fullscreen engaged. window=${window.innerWidth}x${window.innerHeight} fullscreenElement=${!!document.fullscreenElement}`)},150)}catch(e){console.error("❌ Fullscreen request failed:",e)}else window.scrollTo(0,0),(0,r.XR)(!0);W();const s=document.querySelector(S);s&&"none"!==s.style.display&&(s.src="images/nav/ic_fullscreen_exit_white_24dp_2x.png",s.title="Exit fullscreen")},$=()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullscreen?document.mozCancelFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),L()},L=()=>{const e=document.querySelector(S);e&&"none"!==e.style.display&&(e.src="images/nav/ic_fullscreen_white_24dp_2x.png",e.title="Enter fullscreen"),document.querySelector("#divTwc").classList.remove("no-cursor");const t=document.querySelector("#divTwcBottom");t.classList.remove("hidden"),t.classList.add("visible")},E=()=>(q("navButton","menu"),!1),I=(e,t)=>{e&&(I.latLon=e);const{latLon:s}=I;s&&(document.querySelector(v).blur(),(0,r.u6)(s,t))},N=e=>{if("left"===e)O();else P()},A=()=>((0,r.kY)(),I(),!1),O=()=>(q("navButton","next"),!1),P=()=>(q("navButton","previous"),!1);let F=null;const W=()=>{document.activeElement.blur();const e=document.querySelector("#divTwcBottom");e.classList.remove("hidden"),e.classList.add("visible"),document.querySelector("#divTwc").classList.remove("no-cursor"),F&&(clearTimeout(F),F=null),F=setTimeout(()=>{document.fullscreenElement&&(e.classList.remove("visible"),e.classList.add("hidden"),document.querySelector("#divTwc").classList.add("no-cursor"))},2e3)},R=e=>{const{key:t}=e;if(e.ctrlKey&&("k"===t||"K"===t))return e.preventDefault(),l.A.kiosk?.value&&(l.A.kiosk.value=!1),!1;if(e.altKey||e.ctrlKey||e.shiftKey)return!1;if(document.fullscreenElement||document.activeElement===document.body)switch(t){case" ":return e.preventDefault(),H(),!1;case"ArrowRight":case"PageDown":return e.preventDefault(),O(),!1;case"ArrowLeft":case"PageUp":return e.preventDefault(),P(),!1;case"ArrowUp":return e.preventDefault(),E(),!1;case"0":return A(),!1;case"F":case"f":return M(),!1}return!1},H=()=>(q("navButton","playToggle"),!1),V=()=>(l.A.scanLines.value=!l.A.scanLines.value,!1),q=(e,t={})=>{(0,r.iU)({type:e,message:t})},_=async()=>{if(!navigator.geolocation)return;const e=document.querySelector(b);if(e.classList.contains("active"))return e.classList.remove("active"),void localStorage.removeItem("latLonFromGPS");e.classList.add("active");const t=await(async()=>new Promise(e=>{navigator.geolocation.getCurrentPosition(e)}))(),{latitude:s,longitude:n}=t.coords;U(s,n,!0)},U=(e,t,s=!1)=>{const n=document.querySelector(v);n.value=`${(0,a.X4)(e,4)}, ${(0,a.X4)(t,4)}`,x({y:e,x:t},i=>{const r=i.properties.relativeLocation.properties,a=`${r.city}, ${r.state}`;localStorage.setItem("latLon",JSON.stringify({lat:e,lon:t})),localStorage.setItem("latLonQuery",a),localStorage.setItem("latLonFromGPS",s),n.value=`${r.city}, ${r.state}`})},z=async()=>{if((await fetch("scripts/custom.js",{method:"HEAD"})).ok){const e=document.createElement("script");e.src="scripts/custom.js",e.type="text/javascript",document.body.append(e)}};window.getForecastFromLatLon=U},47:(e,t,s)=>{s.d(t,{b:()=>r});var n=s(675);const i=[],r=e=>e&&"string"==typeof e?!i.includes(e)&&((0,n.av)(e),i.push(e),!0):(console.warn(`preloadImg expects a URL string, received: '${e}' (${typeof e})`),!1)},73:(e,t,s)=>{s.d(t,{A:()=>v});var n=s(592),i=s(125),r=s(675),a=s(413),o=s(900),l=s(519),c=s(24),u=s(211),d=s(247),h=s(950),m=s(693);class f extends c.A{constructor(e,t,s){super(e,t,"Hourly Forecast",s),this.scrollCache={displayHeight:0,contentHeight:0,maxOffset:0,hourlyLines:null}}async getData(e,t){const s=super.getData(e,t);try{const e=await(0,r.oi)(this.weatherParameters.forecastGridData,{retryCount:3,stillWaiting:()=>this.stillWaiting()});if(e)try{this.data=await p(e.properties)}catch(e){console.error(`Hourly forecast parsing failed: ${e.message}`)}else(0,m.Ik)("verbose-failures")&&console.warn(`Using previous hourly forecast for ${this.weatherParameters.forecastGridData}`);if(!this.data)return this.isEnabled&&this.setStatus(n.Ay.failed),void this.getDataCallback(void 0);if(this.getDataCallback(),!s)return;this.setStatus(n.Ay.loaded),this.drawLongCanvas()}catch(e){console.error(`Unexpected error getting hourly forecast: ${e.message}`),this.isEnabled&&this.setStatus(n.Ay.failed),this.getDataCallback(void 0)}}async drawLongCanvas(){const e=this.elem.querySelector(".hourly-lines");e.innerHTML="";const t=i.c9.local().setZone((0,u.eB)()),s=this.data.map((e,s)=>{const n={},i=t.plus({hours:s});n.hour=i.toLocaleString({weekday:"short",hour:"numeric"});const r=e.temperature.toString().padStart(3),a=e.apparentTemperature.toString().padStart(3);if(n.temp=r,n.like=a,n.wind="Calm",e.windSpeed>0){const t=Math.round(e.windSpeed).toString();n.wind=e.windDirection+Array(6-e.windDirection.length-t.length).join(" ")+t}n.icon={type:"img",src:e.icon};const o=this.fillTemplate("hourly-row",n);return a<r?o.querySelector(".like").classList.add("wind-chill"):a>r&&o.querySelector(".like").classList.add("heat-index"),o});e.append(...s),this.setTiming(e)}drawCanvas(){super.drawCanvas(),this.finishDraw()}showCanvas(){this.drawCanvas(),super.showCanvas()}screenIndexChange(){this.baseCountChange(this.navBaseCount)}baseCountChange(e){const t=this.elem.querySelector(".hourly-lines");if(!t)return;this.scrollCache.hourlyLines===t&&0!==this.scrollCache.displayHeight||(this.scrollCache.displayHeight=this.elem.querySelector(".main").offsetHeight,this.scrollCache.contentHeight=t.offsetHeight,this.scrollCache.maxOffset=Math.max(0,this.scrollCache.contentHeight-this.scrollCache.displayHeight),this.scrollCache.hourlyLines=t,t.style.willChange="transform",t.style.backfaceVisibility="hidden");let s=Math.min(this.scrollCache.maxOffset,(e-this.scrollTiming.initialCounts)*this.scrollTiming.pixelsPerCount);s<0&&(s=0),t.style.transform=`translateY(-${Math.round(s)}px)`}async getHourlyData(e){return e&&this.stillWaitingCallbacks.push(e),this.setAutoReload(),new Promise(e=>{this.data&&e(this.data),this.getDataCallbacks.push(()=>e(this.data))})}setTiming(e){const t=this.elem.querySelector(".main"),s=(0,h.A)(e,t);this.timing.baseDelay=s.baseDelay,this.timing.delay=s.delay,this.scrollTiming=s.scrollTiming,this.calcNavTiming()}}const p=async e=>{const t=(0,a.X1)(),s=(0,a.u7)(),n=y(e.temperature.values),i=y(e.apparentTemperature.values),r=y(e.windSpeed.values),o=y(e.windDirection.values),c=y(e.skyCover.values),u=y(e.weather.values),d=y(e.iceAccumulation.values),h=y(e.probabilityOfPrecipitation.values),m=y(e.snowfallAmount.values),f=await g(c,u,d,h,m,r);return n.map((e,a)=>({temperature:t(n[a]),temperatureUnit:t.units,apparentTemperature:t(i[a]),windSpeed:s(r[a]),windUnit:s.units,windDirection:(0,l.Up)(o[a]),probabilityOfPrecipitation:h[a],skyCover:c[a],icon:f[a]}))},g=async(e,t,s,n,r,a)=>{const l=i.c9.local().startOf("hour"),c=(await(0,d.A)()).sun,u=i.IX.fromDateTimes(i.c9.fromJSDate(c[0].sunset),i.c9.fromJSDate(c[1].sunrise)),h=i.c9.fromJSDate(c[1].sunset);return e.map((i,c)=>{const d=l.plus({hours:c}),m=u.contains(d)||d>h;return(0,o.ZJ)(e[c],t[c],s[c],n[c],r[c],a[c],m)})},y=(e,t=24)=>{const s=i.c9.utc().startOf("hour").toMillis(),n=[];return e.forEach(e=>{let r=Date.parse(e.validTime.substr(0,e.validTime.indexOf("/")));const a=r+i.dw.fromISO(e.validTime.substr(e.validTime.indexOf("/")+1)).shiftTo("milliseconds").values.milliseconds;do{r>=s&&n.length<t&&n.push(e.value),r+=36e5}while(r<a&&n.length<t)}),n},w=new f(3,"hourly",!0);(0,u.Kb)(w);const v=w.getHourlyData.bind(w)},77:(e,t,s)=>{var n=s(520),i=s(632),r=s(675);let a=!0;const o=new DOMParser,l=e=>{let t;e?(c(d.value),t="block"):((0,i.cL)(),t="none");const s=document.getElementById("settings-customFeed-label");s&&(s.style.display=t)},c=e=>{a||(void 0!==e&&""!==e||(0,i.cL)(),e.match(/https?:\/\//)?u(e):((0,i.cL)(),(0,i.E7)(i.Ik),(0,i.E7)(()=>({type:"scroll",text:e}),!0)))},u=async e=>{const t=await(0,r.Pq)(`https://api.allorigins.win/get?url=${e}`);if(t.status.content_type.indexOf("xml")<0)return;const s="text/xml"!==t.status.content_type.substring(0,8)?atob(t.contents.split("base64,")[1]):t.contents,n=o.parseFromString(s,"text/xml"),a=n.querySelector("channel title").textContent,l=[...n.querySelectorAll("item title")].map(e=>e.textContent);(0,i.cL)(),(0,i.E7)(i.Ik),l.forEach(e=>{(0,i.E7)(()=>({header:a,type:"scroll",text:e}),!1)})},d=new n.A("customFeed",{name:"Custom RSS Feed",defaultValue:"",type:"string",changeAction:e=>{a||h.value&&c(e)},placeholder:"Text or URL"}),h=new n.A("customFeedEnable",{name:"Enable RSS Feed/Text",defaultValue:!1,changeAction:l});document.addEventListener("DOMContentLoaded",()=>{document.querySelector("#settings").append(h.generate(),d.generate()),a=!1,l(h.value)})},94:(e,t,s)=>{var n=s(519),i=s(675),r=s(592),a=s(891),o=s(413),l=s(24),c=s(211),u=s(134),d=s(593),h=s(693),m=s(238);class f extends l.A{constructor(e,t){super(e,t,"Latest Observations",!0),this.MaximumRegionalStations=7}async getData(e,t){if(!super.getData(e,t))return;const s=Object.values(StationInfo).map(e=>{const t=(0,n.Io)(e.lat,e.lon,this.weatherParameters.latitude,this.weatherParameters.longitude);return{...e,distance:t}}).sort((e,t)=>e.distance-t.distance).slice(0,30),i=[];let a=Math.min(s.length,7),o=0;for(;i.length<7&&a<=s.length;){const e=await this.getStations(s.slice(o,a));i.push(...e),o+=a,a=Math.min(s.length+1,o+7-i.length)}this.data=i.slice(0,this.MaximumRegionalStations),0!==this.data.length?this.setStatus(r.Ay.loaded):this.setStatus(r.Ay.noData)}async getStations(e){return(await(0,i.eo)(e.map(async e=>{try{const t=await(0,i.oi)(`https://api.weather.gov/stations/${e.id}/observations/latest`,{retryCount:1,stillWaiting:()=>this.stillWaiting()});if(!t)return(0,h.Ik)("verbose-failures")&&console.log(`Failed to get Latest Observations for station ${e.id}`),!1;const s={...t.properties};t.properties=(0,u.A)(t.properties);const n=[{name:"temperature",check:(e,t)=>null===e.temperature.value&&null!==t.temperature.value},{name:"windSpeed",check:(e,t)=>null===e.windSpeed.value&&null!==t.windSpeed.value},{name:"windDirection",check:(e,t)=>null===e.windDirection.value&&null!==t.windDirection.value}],r=t.properties,a=n.filter(e=>e.check(s,r)).map(e=>e.name);(0,h.Ik)("latestobservations")&&a.length>0&&console.log(`Latest Observations for station ${e.id} were augmented with METAR data for ${a.join(", ")}`);const o=[{name:"temperature",check:e=>null===e.temperature?.value},{name:"windSpeed",check:e=>null===e.windSpeed?.value},{name:"windDirection",check:e=>null===e.windDirection?.value},{name:"textDescription",check:e=>null===e.textDescription||""===e.textDescription}],l=await(0,m.Bv)(t.properties,{requiredFields:o,stationId:e.id,stillWaiting:()=>this.stillWaiting(),debugContext:"latestobservations"});t.properties=l.data;const{missingFields:c}=l;return c.length>0?((0,h.Ik)("latestobservations")&&console.log(`Latest Observations for station ${e.id} is missing fields: ${c.join(", ")}`),!1):{...t.properties,StationId:e.id,city:e.city}}catch(t){return console.error(`Unexpected error getting latest observations for station ${e.id}: ${t.message}`),!1}}))).filter(e=>e)}async drawCanvas(){super.drawCanvas();const e=this.data.sort((e,t)=>e.Name<t.Name?-1:1);"us"===d.A.units.value?(this.elem.querySelector(".column-headers .temp.english").classList.add("show"),this.elem.querySelector(".column-headers .temp.metric").classList.remove("show")):(this.elem.querySelector(".column-headers .temp.english").classList.remove("show"),this.elem.querySelector(".column-headers .temp.metric").classList.add("show"));const t=(0,o.u7)(),s=(0,o.X1)(),i=e.map(e=>{const i=(0,n.Up)(e.windDirection.value),r=s(e.temperature.value),o=t(e.windSpeed.value),l={location:(0,a.C)(e.city).substr(0,14),temp:r,weather:p(e.textDescription).substr(0,9)};return l.wind=o>0?i+Array(6-i.length-o.toString().length).join(" ")+o.toString():"NA"===o?"NA":"Calm",this.fillTemplate("observation-row",l)}),r=this.elem.querySelector(".observation-lines");r.innerHTML="",r.append(...i),this.finishDraw()}}const p=e=>{let t=e;return t=t.replace(/Light/,"L"),t=t.replace(/Heavy/,"H"),t=t.replace(/Partly/,"P"),t=t.replace(/Mostly/,"M"),t=t.replace(/Few/,"F"),t=t.replace(/Thunderstorm/,"T'storm"),t=t.replace(/ in /,""),t=t.replace(/Vicinity/,""),t=t.replace(/ and /," "),t=t.replace(/Freezing Rain/,"Frz Rn"),t=t.replace(/Freezing/,"Frz"),t=t.replace(/Unknown Precip/,""),t=t.replace(/L Snow Fog/,"L Snw/Fog"),t=t.replace(/ with /,"/"),t};(0,c.Kb)(new f(2,"latest-observations"))},125:(e,t,s)=>{s.d(t,{IX:()=>Ds,c9:()=>vn,dw:()=>xs});class n extends Error{}class i extends n{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class r extends n{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class a extends n{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class o extends n{}class l extends n{constructor(e){super(`Invalid unit ${e}`)}}class c extends n{}class u extends n{constructor(){super("Zone is an abstract class")}}const d="numeric",h="short",m="long",f={year:d,month:d,day:d},p={year:d,month:h,day:d},g={year:d,month:h,day:d,weekday:h},y={year:d,month:m,day:d},w={year:d,month:m,day:d,weekday:m},v={hour:d,minute:d},S={hour:d,minute:d,second:d},b={hour:d,minute:d,second:d,timeZoneName:h},k={hour:d,minute:d,second:d,timeZoneName:m},C={hour:d,minute:d,hourCycle:"h23"},T={hour:d,minute:d,second:d,hourCycle:"h23"},x={hour:d,minute:d,second:d,hourCycle:"h23",timeZoneName:h},M={hour:d,minute:d,second:d,hourCycle:"h23",timeZoneName:m},D={year:d,month:d,day:d,hour:d,minute:d},$={year:d,month:d,day:d,hour:d,minute:d,second:d},L={year:d,month:h,day:d,hour:d,minute:d},E={year:d,month:h,day:d,hour:d,minute:d,second:d},I={year:d,month:h,day:d,weekday:h,hour:d,minute:d},N={year:d,month:m,day:d,hour:d,minute:d,timeZoneName:h},A={year:d,month:m,day:d,hour:d,minute:d,second:d,timeZoneName:h},O={year:d,month:m,day:d,weekday:m,hour:d,minute:d,timeZoneName:m},P={year:d,month:m,day:d,weekday:m,hour:d,minute:d,second:d,timeZoneName:m};class F{get type(){throw new u}get name(){throw new u}get ianaName(){return this.name}get isUniversal(){throw new u}offsetName(e,t){throw new u}formatOffset(e,t){throw new u}offset(e){throw new u}equals(e){throw new u}get isValid(){throw new u}}let W=null;class R extends F{static get instance(){return null===W&&(W=new R),W}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:s}){return it(e,t,s)}formatOffset(e,t){return lt(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return"system"===e.type}get isValid(){return!0}}const H=new Map;const V={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};const q=new Map;class _ extends F{static create(e){let t=q.get(e);return void 0===t&&q.set(e,t=new _(e)),t}static resetCache(){q.clear(),H.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(e){return!1}}constructor(e){super(),this.zoneName=e,this.valid=_.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:s}){return it(e,t,s,this.name)}formatOffset(e,t){return lt(this.offset(e),t)}offset(e){if(!this.valid)return NaN;const t=new Date(e);if(isNaN(t))return NaN;const s=function(e){let t=H.get(e);return void 0===t&&(t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),H.set(e,t)),t}(this.name);let[n,i,r,a,o,l,c]=s.formatToParts?function(e,t){const s=e.formatToParts(t),n=[];for(let e=0;e<s.length;e++){const{type:t,value:i}=s[e],r=V[t];"era"===t?n[r]=i:We(r)||(n[r]=parseInt(i,10))}return n}(s,t):function(e,t){const s=e.format(t).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(s),[,i,r,a,o,l,c,u]=n;return[a,i,r,o,l,c,u]}(s,t);"BC"===a&&(n=1-Math.abs(n));let u=+t;const d=u%1e3;return u-=d>=0?d:1e3+d,(et({year:n,month:i,day:r,hour:24===o?0:o,minute:l,second:c,millisecond:0})-u)/6e4}equals(e){return"iana"===e.type&&e.name===this.name}get isValid(){return this.valid}}let U={};const z=new Map;function Z(e,t={}){const s=JSON.stringify([e,t]);let n=z.get(s);return void 0===n&&(n=new Intl.DateTimeFormat(e,t),z.set(s,n)),n}const B=new Map;const j=new Map;let G=null;const Y=new Map;function J(e){let t=Y.get(e);return void 0===t&&(t=new Intl.DateTimeFormat(e).resolvedOptions(),Y.set(e,t)),t}const K=new Map;function Q(e,t,s,n){const i=e.listingMode();return"error"===i?null:"en"===i?s(t):n(t)}class X{constructor(e,t,s){this.padTo=s.padTo||0,this.floor=s.floor||!1;const{padTo:n,floor:i,...r}=s;if(!t||Object.keys(r).length>0){const t={useGrouping:!1,...s};s.padTo>0&&(t.minimumIntegerDigits=s.padTo),this.inf=function(e,t={}){const s=JSON.stringify([e,t]);let n=B.get(s);return void 0===n&&(n=new Intl.NumberFormat(e,t),B.set(s,n)),n}(e,t)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}return Be(this.floor?Math.floor(e):Je(e,3),this.padTo)}}class ee{constructor(e,t,s){let n;if(this.opts=s,this.originalZone=void 0,this.opts.timeZone)this.dt=e;else if("fixed"===e.zone.type){const t=e.offset/60*-1,s=t>=0?`Etc/GMT+${t}`:`Etc/GMT${t}`;0!==e.offset&&_.create(s).valid?(n=s,this.dt=e):(n="UTC",this.dt=0===e.offset?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else"system"===e.zone.type?this.dt=e:"iana"===e.zone.type?(this.dt=e,n=e.zone.name):(n="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const i={...this.opts};i.timeZone=i.timeZone||n,this.dtf=Z(t,i)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(e=>{if("timeZoneName"===e.type){const t=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...e,value:t}}return e}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class te{constructor(e,t,s){this.opts={style:"long",...s},!t&&Ve()&&(this.rtf=function(e,t={}){const{base:s,...n}=t,i=JSON.stringify([e,n]);let r=j.get(i);return void 0===r&&(r=new Intl.RelativeTimeFormat(e,t),j.set(i,r)),r}(e,s))}format(e,t){return this.rtf?this.rtf.format(e,t):function(e,t,s="always",n=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},r=-1===["hours","minutes","seconds"].indexOf(e);if("auto"===s&&r){const s="days"===e;switch(t){case 1:return s?"tomorrow":`next ${i[e][0]}`;case-1:return s?"yesterday":`last ${i[e][0]}`;case 0:return s?"today":`this ${i[e][0]}`}}const a=Object.is(t,-0)||t<0,o=Math.abs(t),l=1===o,c=i[e],u=n?l?c[1]:c[2]||c[1]:l?i[e][0]:e;return a?`${o} ${u} ago`:`in ${o} ${u}`}(t,e,this.opts.numeric,"long"!==this.opts.style)}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const se={firstDay:1,minimalDays:4,weekend:[6,7]};class ne{static fromOpts(e){return ne.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,s,n,i=!1){const r=e||be.defaultLocale,a=r||(i?"en-US":G||(G=(new Intl.DateTimeFormat).resolvedOptions().locale,G)),o=t||be.defaultNumberingSystem,l=s||be.defaultOutputCalendar,c=ze(n)||be.defaultWeekSettings;return new ne(a,o,l,c,r)}static resetCache(){G=null,z.clear(),B.clear(),j.clear(),Y.clear(),K.clear()}static fromObject({locale:e,numberingSystem:t,outputCalendar:s,weekSettings:n}={}){return ne.create(e,t,s,n)}constructor(e,t,s,n,i){const[r,a,o]=function(e){const t=e.indexOf("-x-");-1!==t&&(e=e.substring(0,t));const s=e.indexOf("-u-");if(-1===s)return[e];{let t,n;try{t=Z(e).resolvedOptions(),n=e}catch(i){const r=e.substring(0,s);t=Z(r).resolvedOptions(),n=r}const{numberingSystem:i,calendar:r}=t;return[n,i,r]}}(e);this.locale=r,this.numberingSystem=t||a||null,this.outputCalendar=s||o||null,this.weekSettings=n,this.intl=function(e,t,s){return s||t?(e.includes("-u-")||(e+="-u"),s&&(e+=`-ca-${s}`),t&&(e+=`-nu-${t}`),e):e}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=i,this.fastNumbersCached=null}get fastNumbers(){var e;return null==this.fastNumbersCached&&(this.fastNumbersCached=(!(e=this).numberingSystem||"latn"===e.numberingSystem)&&("latn"===e.numberingSystem||!e.locale||e.locale.startsWith("en")||"latn"===J(e.locale).numberingSystem)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar);return e&&t?"en":"intl"}clone(e){return e&&0!==Object.getOwnPropertyNames(e).length?ne.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,ze(e.weekSettings)||this.weekSettings,e.defaultToEN||!1):this}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return Q(this,e,mt,()=>{const s="ja"===this.intl||this.intl.startsWith("ja-"),n=(t&=!s)?{month:e,day:"numeric"}:{month:e},i=t?"format":"standalone";if(!this.monthsCache[i][e]){const t=s?e=>this.dtFormatter(e,n).format():e=>this.extract(e,n,"month");this.monthsCache[i][e]=function(e){const t=[];for(let s=1;s<=12;s++){const n=vn.utc(2009,s,1);t.push(e(n))}return t}(t)}return this.monthsCache[i][e]})}weekdays(e,t=!1){return Q(this,e,yt,()=>{const s=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},n=t?"format":"standalone";return this.weekdaysCache[n][e]||(this.weekdaysCache[n][e]=function(e){const t=[];for(let s=1;s<=7;s++){const n=vn.utc(2016,11,13+s);t.push(e(n))}return t}(e=>this.extract(e,s,"weekday"))),this.weekdaysCache[n][e]})}meridiems(){return Q(this,void 0,()=>wt,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[vn.utc(2016,11,13,9),vn.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Q(this,e,kt,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[vn.utc(-40,1,1),vn.utc(2017,1,1)].map(e=>this.extract(e,t,"era"))),this.eraCache[e]})}extract(e,t,s){const n=this.dtFormatter(e,t).formatToParts().find(e=>e.type.toLowerCase()===s);return n?n.value:null}numberFormatter(e={}){return new X(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new ee(e,this.intl,t)}relFormatter(e={}){return new te(this.intl,this.isEnglish(),e)}listFormatter(e={}){return function(e,t={}){const s=JSON.stringify([e,t]);let n=U[s];return n||(n=new Intl.ListFormat(e,t),U[s]=n),n}(this.intl,e)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||J(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:qe()?function(e){let t=K.get(e);if(!t){const s=new Intl.Locale(e);t="getWeekInfo"in s?s.getWeekInfo():s.weekInfo,"minimalDays"in t||(t={...se,...t}),K.set(e,t)}return t}(this.locale):se}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let ie=null;class re extends F{static get utcInstance(){return null===ie&&(ie=new re(0)),ie}static instance(e){return 0===e?re.utcInstance:new re(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new re(rt(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${lt(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${lt(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return lt(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return"fixed"===e.type&&e.fixed===this.fixed}get isValid(){return!0}}class ae extends F{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function oe(e,t){if(We(e)||null===e)return t;if(e instanceof F)return e;if("string"==typeof e){const s=e.toLowerCase();return"default"===s?t:"local"===s||"system"===s?R.instance:"utc"===s||"gmt"===s?re.utcInstance:re.parseSpecifier(s)||_.create(e)}return Re(e)?re.instance(e):"object"==typeof e&&"offset"in e&&"function"==typeof e.offset?e:new ae(e)}const le={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},ce={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},ue=le.hanidec.replace(/[\[|\]]/g,"").split("");const de=new Map;function he({numberingSystem:e},t=""){const s=e||"latn";let n=de.get(s);void 0===n&&(n=new Map,de.set(s,n));let i=n.get(t);return void 0===i&&(i=new RegExp(`${le[s]}${t}`),n.set(t,i)),i}let me,fe=()=>Date.now(),pe="system",ge=null,ye=null,we=null,ve=60,Se=null;class be{static get now(){return fe}static set now(e){fe=e}static set defaultZone(e){pe=e}static get defaultZone(){return oe(pe,R.instance)}static get defaultLocale(){return ge}static set defaultLocale(e){ge=e}static get defaultNumberingSystem(){return ye}static set defaultNumberingSystem(e){ye=e}static get defaultOutputCalendar(){return we}static set defaultOutputCalendar(e){we=e}static get defaultWeekSettings(){return Se}static set defaultWeekSettings(e){Se=ze(e)}static get twoDigitCutoffYear(){return ve}static set twoDigitCutoffYear(e){ve=e%100}static get throwOnInvalid(){return me}static set throwOnInvalid(e){me=e}static resetCaches(){ne.resetCache(),_.resetCache(),vn.resetCache(),de.clear()}}class ke{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Ce=[0,31,59,90,120,151,181,212,243,273,304,334],Te=[0,31,60,91,121,152,182,213,244,274,305,335];function xe(e,t){return new ke("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function Me(e,t,s){const n=new Date(Date.UTC(e,t-1,s));e<100&&e>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);const i=n.getUTCDay();return 0===i?7:i}function De(e,t,s){return s+(Ke(e)?Te:Ce)[t-1]}function $e(e,t){const s=Ke(e)?Te:Ce,n=s.findIndex(e=>e<t);return{month:n+1,day:t-s[n]}}function Le(e,t){return(e-t+7)%7+1}function Ee(e,t=4,s=1){const{year:n,month:i,day:r}=e,a=De(n,i,r),o=Le(Me(n,i,r),s);let l,c=Math.floor((a-o+14-t)/7);return c<1?(l=n-1,c=st(l,t,s)):c>st(n,t,s)?(l=n+1,c=1):l=n,{weekYear:l,weekNumber:c,weekday:o,...ct(e)}}function Ie(e,t=4,s=1){const{weekYear:n,weekNumber:i,weekday:r}=e,a=Le(Me(n,1,t),s),o=Qe(n);let l,c=7*i+r-a-7+t;c<1?(l=n-1,c+=Qe(l)):c>o?(l=n+1,c-=Qe(n)):l=n;const{month:u,day:d}=$e(l,c);return{year:l,month:u,day:d,...ct(e)}}function Ne(e){const{year:t,month:s,day:n}=e;return{year:t,ordinal:De(t,s,n),...ct(e)}}function Ae(e){const{year:t,ordinal:s}=e,{month:n,day:i}=$e(t,s);return{year:t,month:n,day:i,...ct(e)}}function Oe(e,t){if(!We(e.localWeekday)||!We(e.localWeekNumber)||!We(e.localWeekYear)){if(!We(e.weekday)||!We(e.weekNumber)||!We(e.weekYear))throw new o("Cannot mix locale-based week fields with ISO-based week fields");return We(e.localWeekday)||(e.weekday=e.localWeekday),We(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),We(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}return{minDaysInFirstWeek:4,startOfWeek:1}}function Pe(e){const t=He(e.year),s=Ze(e.month,1,12),n=Ze(e.day,1,Xe(e.year,e.month));return t?s?!n&&xe("day",e.day):xe("month",e.month):xe("year",e.year)}function Fe(e){const{hour:t,minute:s,second:n,millisecond:i}=e,r=Ze(t,0,23)||24===t&&0===s&&0===n&&0===i,a=Ze(s,0,59),o=Ze(n,0,59),l=Ze(i,0,999);return r?a?o?!l&&xe("millisecond",i):xe("second",n):xe("minute",s):xe("hour",t)}function We(e){return void 0===e}function Re(e){return"number"==typeof e}function He(e){return"number"==typeof e&&e%1==0}function Ve(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(e){return!1}}function qe(){try{return"undefined"!=typeof Intl&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch(e){return!1}}function _e(e,t,s){if(0!==e.length)return e.reduce((e,n)=>{const i=[t(n),n];return e&&s(e[0],i[0])===e[0]?e:i},null)[1]}function Ue(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ze(e){if(null==e)return null;if("object"!=typeof e)throw new c("Week settings must be an object");if(!Ze(e.firstDay,1,7)||!Ze(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(e=>!Ze(e,1,7)))throw new c("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function Ze(e,t,s){return He(e)&&e>=t&&e<=s}function Be(e,t=2){let s;return s=e<0?"-"+(""+-e).padStart(t,"0"):(""+e).padStart(t,"0"),s}function je(e){return We(e)||null===e||""===e?void 0:parseInt(e,10)}function Ge(e){return We(e)||null===e||""===e?void 0:parseFloat(e)}function Ye(e){if(!We(e)&&null!==e&&""!==e){const t=1e3*parseFloat("0."+e);return Math.floor(t)}}function Je(e,t,s="round"){const n=10**t;switch(s){case"expand":return e>0?Math.ceil(e*n)/n:Math.floor(e*n)/n;case"trunc":return Math.trunc(e*n)/n;case"round":return Math.round(e*n)/n;case"floor":return Math.floor(e*n)/n;case"ceil":return Math.ceil(e*n)/n;default:throw new RangeError(`Value rounding ${s} is out of range`)}}function Ke(e){return e%4==0&&(e%100!=0||e%400==0)}function Qe(e){return Ke(e)?366:365}function Xe(e,t){const s=function(e,t){return e-t*Math.floor(e/t)}(t-1,12)+1;return 2===s?Ke(e+(t-s)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][s-1]}function et(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function tt(e,t,s){return-Le(Me(e,1,t),s)+t-1}function st(e,t=4,s=1){const n=tt(e,t,s),i=tt(e+1,t,s);return(Qe(e)-n+i)/7}function nt(e){return e>99?e:e>be.twoDigitCutoffYear?1900+e:2e3+e}function it(e,t,s,n=null){const i=new Date(e),r={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(r.timeZone=n);const a={timeZoneName:t,...r},o=new Intl.DateTimeFormat(s,a).formatToParts(i).find(e=>"timezonename"===e.type.toLowerCase());return o?o.value:null}function rt(e,t){let s=parseInt(e,10);Number.isNaN(s)&&(s=0);const n=parseInt(t,10)||0;return 60*s+(s<0||Object.is(s,-0)?-n:n)}function at(e){const t=Number(e);if("boolean"==typeof e||""===e||!Number.isFinite(t))throw new c(`Invalid unit value ${e}`);return t}function ot(e,t){const s={};for(const n in e)if(Ue(e,n)){const i=e[n];if(null==i)continue;s[t(n)]=at(i)}return s}function lt(e,t){const s=Math.trunc(Math.abs(e/60)),n=Math.trunc(Math.abs(e%60)),i=e>=0?"+":"-";switch(t){case"short":return`${i}${Be(s,2)}:${Be(n,2)}`;case"narrow":return`${i}${s}${n>0?`:${n}`:""}`;case"techie":return`${i}${Be(s,2)}${Be(n,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function ct(e){return function(e,t){return t.reduce((t,s)=>(t[s]=e[s],t),{})}(e,["hour","minute","second","millisecond"])}const ut=["January","February","March","April","May","June","July","August","September","October","November","December"],dt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ht=["J","F","M","A","M","J","J","A","S","O","N","D"];function mt(e){switch(e){case"narrow":return[...ht];case"short":return[...dt];case"long":return[...ut];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const ft=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],pt=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],gt=["M","T","W","T","F","S","S"];function yt(e){switch(e){case"narrow":return[...gt];case"short":return[...pt];case"long":return[...ft];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const wt=["AM","PM"],vt=["Before Christ","Anno Domini"],St=["BC","AD"],bt=["B","A"];function kt(e){switch(e){case"narrow":return[...bt];case"short":return[...St];case"long":return[...vt];default:return null}}function Ct(e,t){let s="";for(const n of e)n.literal?s+=n.val:s+=t(n.val);return s}const Tt={D:f,DD:p,DDD:y,DDDD:w,t:v,tt:S,ttt:b,tttt:k,T:C,TT:T,TTT:x,TTTT:M,f:D,ff:L,fff:N,ffff:O,F:$,FF:E,FFF:A,FFFF:P};class xt{static create(e,t={}){return new xt(e,t)}static parseFormat(e){let t=null,s="",n=!1;const i=[];for(let r=0;r<e.length;r++){const a=e.charAt(r);"'"===a?((s.length>0||n)&&i.push({literal:n||/^\s+$/.test(s),val:""===s?"'":s}),t=null,s="",n=!n):n||a===t?s+=a:(s.length>0&&i.push({literal:/^\s+$/.test(s),val:s}),s=a,t=a)}return s.length>0&&i.push({literal:n||/^\s+$/.test(s),val:s}),i}static macroTokenToFormatOpts(e){return Tt[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0,s=void 0){if(this.opts.forceSimple)return Be(e,t);const n={...this.opts};return t>0&&(n.padTo=t),s&&(n.signDisplay=s),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,t){const s="en"===this.loc.listingMode(),n=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,i=(t,s)=>this.loc.extract(e,t,s),r=t=>e.isOffsetFixed&&0===e.offset&&t.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,t.format):"",a=()=>s?function(e){return wt[e.hour<12?0:1]}(e):i({hour:"numeric",hourCycle:"h12"},"dayperiod"),o=(t,n)=>s?function(e,t){return mt(t)[e.month-1]}(e,t):i(n?{month:t}:{month:t,day:"numeric"},"month"),l=(t,n)=>s?function(e,t){return yt(t)[e.weekday-1]}(e,t):i(n?{weekday:t}:{weekday:t,month:"long",day:"numeric"},"weekday"),c=t=>{const s=xt.macroTokenToFormatOpts(t);return s?this.formatWithSystemDefault(e,s):t},u=t=>s?function(e,t){return kt(t)[e.year<0?0:1]}(e,t):i({era:t},"era");return Ct(xt.parseFormat(t),t=>{switch(t){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12==0?12:e.hour%12);case"hh":return this.num(e.hour%12==0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return r({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return r({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return r({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return n?i({day:"numeric"},"day"):this.num(e.day);case"dd":return n?i({day:"2-digit"},"day"):this.num(e.day,2);case"c":case"E":return this.num(e.weekday);case"ccc":return l("short",!0);case"cccc":return l("long",!0);case"ccccc":return l("narrow",!0);case"EEE":return l("short",!1);case"EEEE":return l("long",!1);case"EEEEE":return l("narrow",!1);case"L":return n?i({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return n?i({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return o("short",!0);case"LLLL":return o("long",!0);case"LLLLL":return o("narrow",!0);case"M":return n?i({month:"numeric"},"month"):this.num(e.month);case"MM":return n?i({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return o("short",!1);case"MMMM":return o("long",!1);case"MMMMM":return o("narrow",!1);case"y":return n?i({year:"numeric"},"year"):this.num(e.year);case"yy":return n?i({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return n?i({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return n?i({year:"numeric"},"year"):this.num(e.year,6);case"G":return u("short");case"GG":return u("long");case"GGGGG":return u("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return c(t)}})}formatDurationFromString(e,t){const s="negativeLargestOnly"===this.opts.signMode?-1:1,n=e=>{switch(e[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},i=xt.parseFormat(t),r=i.reduce((e,{literal:t,val:s})=>t?e:e.concat(s),[]),a=e.shiftTo(...r.map(n).filter(e=>e));return Ct(i,((e,t)=>i=>{const r=n(i);if(r){const n=t.isNegativeDuration&&r!==t.largestUnit?s:1;let a;return a="negativeLargestOnly"===this.opts.signMode&&r!==t.largestUnit?"never":"all"===this.opts.signMode?"always":"auto",this.num(e.get(r)*n,i.length,a)}return i})(a,{isNegativeDuration:a<0,largestUnit:Object.keys(a.values)[0]}))}}const Mt=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Dt(...e){const t=e.reduce((e,t)=>e+t.source,"");return RegExp(`^${t}$`)}function $t(...e){return t=>e.reduce(([e,s,n],i)=>{const[r,a,o]=i(t,n);return[{...e,...r},a||s,o]},[{},null,1]).slice(0,2)}function Lt(e,...t){if(null==e)return[null,null];for(const[s,n]of t){const t=s.exec(e);if(t)return n(t)}return[null,null]}function Et(...e){return(t,s)=>{const n={};let i;for(i=0;i<e.length;i++)n[e[i]]=je(t[s+i]);return[n,null,s+i]}}const It=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,Nt=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,At=RegExp(`${Nt.source}${`(?:${It.source}?(?:\\[(${Mt.source})\\])?)?`}`),Ot=RegExp(`(?:[Tt]${At.source})?`),Pt=Et("weekYear","weekNumber","weekDay"),Ft=Et("year","ordinal"),Wt=RegExp(`${Nt.source} ?(?:${It.source}|(${Mt.source}))?`),Rt=RegExp(`(?: ${Wt.source})?`);function Ht(e,t,s){const n=e[t];return We(n)?s:je(n)}function Vt(e,t){return[{hours:Ht(e,t,0),minutes:Ht(e,t+1,0),seconds:Ht(e,t+2,0),milliseconds:Ye(e[t+3])},null,t+4]}function qt(e,t){const s=!e[t]&&!e[t+1],n=rt(e[t+1],e[t+2]);return[{},s?null:re.instance(n),t+3]}function _t(e,t){return[{},e[t]?_.create(e[t]):null,t+1]}const Ut=RegExp(`^T?${Nt.source}$`),zt=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Zt(e){const[t,s,n,i,r,a,o,l,c]=e,u="-"===t[0],d=l&&"-"===l[0],h=(e,t=!1)=>void 0!==e&&(t||e&&u)?-e:e;return[{years:h(Ge(s)),months:h(Ge(n)),weeks:h(Ge(i)),days:h(Ge(r)),hours:h(Ge(a)),minutes:h(Ge(o)),seconds:h(Ge(l),"-0"===l),milliseconds:h(Ye(c),d)}]}const Bt={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function jt(e,t,s,n,i,r,a){const o={year:2===t.length?nt(je(t)):je(t),month:dt.indexOf(s)+1,day:je(n),hour:je(i),minute:je(r)};return a&&(o.second=je(a)),e&&(o.weekday=e.length>3?ft.indexOf(e)+1:pt.indexOf(e)+1),o}const Gt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Yt(e){const[,t,s,n,i,r,a,o,l,c,u,d]=e,h=jt(t,i,n,s,r,a,o);let m;return m=l?Bt[l]:c?0:rt(u,d),[h,new re(m)]}const Jt=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Kt=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Qt=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Xt(e){const[,t,s,n,i,r,a,o]=e;return[jt(t,i,n,s,r,a,o),re.utcInstance]}function es(e){const[,t,s,n,i,r,a,o]=e;return[jt(t,o,s,n,i,r,a),re.utcInstance]}const ts=Dt(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Ot),ss=Dt(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Ot),ns=Dt(/(\d{4})-?(\d{3})/,Ot),is=Dt(At),rs=$t(function(e,t){return[{year:Ht(e,t),month:Ht(e,t+1,1),day:Ht(e,t+2,1)},null,t+3]},Vt,qt,_t),as=$t(Pt,Vt,qt,_t),os=$t(Ft,Vt,qt,_t),ls=$t(Vt,qt,_t);const cs=$t(Vt);const us=Dt(/(\d{4})-(\d\d)-(\d\d)/,Rt),ds=Dt(Wt),hs=$t(Vt,qt,_t);const ms="Invalid Duration",fs={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},ps={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...fs},gs=365.2425,ys=30.436875,ws={years:{quarters:4,months:12,weeks:52.1775,days:gs,hours:8765.82,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:4.3481250000000005,days:ys,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3},...fs},vs=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Ss=vs.slice(0).reverse();function bs(e,t,s=!1){const n={values:s?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new xs(n)}function ks(e,t){let s=t.milliseconds??0;for(const n of Ss.slice(1))t[n]&&(s+=t[n]*e[n].milliseconds);return s}function Cs(e,t){const s=ks(e,t)<0?-1:1;vs.reduceRight((n,i)=>{if(We(t[i]))return n;if(n){const r=t[n]*s,a=e[i][n],o=Math.floor(r/a);t[i]+=o*s,t[n]-=o*a*s}return i},null),vs.reduce((s,n)=>{if(We(t[n]))return s;if(s){const i=t[s]%1;t[s]-=i,t[n]+=i*e[s][n]}return n},null)}function Ts(e){const t={};for(const[s,n]of Object.entries(e))0!==n&&(t[s]=n);return t}class xs{constructor(e){const t="longterm"===e.conversionAccuracy||!1;let s=t?ws:ps;e.matrix&&(s=e.matrix),this.values=e.values,this.loc=e.loc||ne.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=s,this.isLuxonDuration=!0}static fromMillis(e,t){return xs.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(null==e||"object"!=typeof e)throw new c("Duration.fromObject: argument expected to be an object, got "+(null===e?"null":typeof e));return new xs({values:ot(e,xs.normalizeUnit),loc:ne.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(Re(e))return xs.fromMillis(e);if(xs.isDuration(e))return e;if("object"==typeof e)return xs.fromObject(e);throw new c(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[s]=function(e){return Lt(e,[zt,Zt])}(e);return s?xs.fromObject(s,t):xs.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[s]=function(e){return Lt(e,[Ut,cs])}(e);return s?xs.fromObject(s,t):xs.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new c("need to specify a reason the Duration is invalid");const s=e instanceof ke?e:new ke(e,t);if(be.throwOnInvalid)throw new a(s);return new xs({invalid:s})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e?e.toLowerCase():e];if(!t)throw new l(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const s={...t,floor:!1!==t.round&&!1!==t.floor};return this.isValid?xt.create(this.loc,s).formatDurationFromString(this,e):ms}toHuman(e={}){if(!this.isValid)return ms;const t=!1!==e.showZeros,s=vs.map(s=>{const n=this.values[s];return We(n)||0===n&&!t?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:s.slice(0,-1)}).format(n)}).filter(e=>e);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(s)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return 0!==this.years&&(e+=this.years+"Y"),0===this.months&&0===this.quarters||(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(e+=Je(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();if(t<0||t>=864e5)return null;e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1};return vn.fromMillis(t,{zone:"UTC"}).toISOTime(e)}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?ks(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=xs.fromDurationLike(e),s={};for(const e of vs)(Ue(t.values,e)||Ue(this.values,e))&&(s[e]=t.get(e)+this.get(e));return bs(this,{values:s},!0)}minus(e){if(!this.isValid)return this;const t=xs.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const s of Object.keys(this.values))t[s]=at(e(this.values[s],s));return bs(this,{values:t},!0)}get(e){return this[xs.normalizeUnit(e)]}set(e){if(!this.isValid)return this;return bs(this,{values:{...this.values,...ot(e,xs.normalizeUnit)}})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:s,matrix:n}={}){return bs(this,{loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:n,conversionAccuracy:s})}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return Cs(this.matrix,e),bs(this,{values:e},!0)}rescale(){if(!this.isValid)return this;return bs(this,{values:Ts(this.normalize().shiftToAll().toObject())},!0)}shiftTo(...e){if(!this.isValid)return this;if(0===e.length)return this;e=e.map(e=>xs.normalizeUnit(e));const t={},s={},n=this.toObject();let i;for(const r of vs)if(e.indexOf(r)>=0){i=r;let e=0;for(const t in s)e+=this.matrix[t][r]*s[t],s[t]=0;Re(n[r])&&(e+=n[r]);const a=Math.trunc(e);t[r]=a,s[r]=(1e3*e-1e3*a)/1e3}else Re(n[r])&&(s[r]=n[r]);for(const e in s)0!==s[e]&&(t[i]+=e===i?s[e]:s[e]/this.matrix[i][e]);return Cs(this.matrix,t),bs(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=0===this.values[t]?0:-this.values[t];return bs(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;return bs(this,{values:Ts(this.values)},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid)return!1;if(!this.loc.equals(e.loc))return!1;function t(e,t){return void 0===e||0===e?void 0===t||0===t:e===t}for(const s of vs)if(!t(this.values[s],e.values[s]))return!1;return!0}}const Ms="Invalid Interval";class Ds{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new c("need to specify a reason the Interval is invalid");const s=e instanceof ke?e:new ke(e,t);if(be.throwOnInvalid)throw new r(s);return new Ds({invalid:s})}static fromDateTimes(e,t){const s=Sn(e),n=Sn(t),i=function(e,t){return e&&e.isValid?t&&t.isValid?t<e?Ds.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null:Ds.invalid("missing or invalid end"):Ds.invalid("missing or invalid start")}(s,n);return null==i?new Ds({start:s,end:n}):i}static after(e,t){const s=xs.fromDurationLike(t),n=Sn(e);return Ds.fromDateTimes(n,n.plus(s))}static before(e,t){const s=xs.fromDurationLike(t),n=Sn(e);return Ds.fromDateTimes(n.minus(s),n)}static fromISO(e,t){const[s,n]=(e||"").split("/",2);if(s&&n){let e,i,r,a;try{e=vn.fromISO(s,t),i=e.isValid}catch(n){i=!1}try{r=vn.fromISO(n,t),a=r.isValid}catch(n){a=!1}if(i&&a)return Ds.fromDateTimes(e,r);if(i){const s=xs.fromISO(n,t);if(s.isValid)return Ds.after(e,s)}else if(a){const e=xs.fromISO(s,t);if(e.isValid)return Ds.before(r,e)}}return Ds.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const s=this.start.startOf(e,t);let n;return n=t?.useLocaleWeeks?this.end.reconfigure({locale:s.locale}):this.end,n=n.startOf(e,t),Math.floor(n.diff(s,e).get(e))+(n.valueOf()!==this.end.valueOf())}hasSame(e){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,e))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return!!this.isValid&&this.s>e}isBefore(e){return!!this.isValid&&this.e<=e}contains(e){return!!this.isValid&&(this.s<=e&&this.e>e)}set({start:e,end:t}={}){return this.isValid?Ds.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(Sn).filter(e=>this.contains(e)).sort((e,t)=>e.toMillis()-t.toMillis()),s=[];let{s:n}=this,i=0;for(;n<this.e;){const e=t[i]||this.e,r=+e>+this.e?this.e:e;s.push(Ds.fromDateTimes(n,r)),n=r,i+=1}return s}splitBy(e){const t=xs.fromDurationLike(e);if(!this.isValid||!t.isValid||0===t.as("milliseconds"))return[];let s,{s:n}=this,i=1;const r=[];for(;n<this.e;){const e=this.start.plus(t.mapUnits(e=>e*i));s=+e>+this.e?this.e:e,r.push(Ds.fromDateTimes(n,s)),n=s,i+=1}return r}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return!!this.isValid&&+this.e===+e.s}abutsEnd(e){return!!this.isValid&&+e.e===+this.s}engulfs(e){return!!this.isValid&&(this.s<=e.s&&this.e>=e.e)}equals(e){return!(!this.isValid||!e.isValid)&&(this.s.equals(e.s)&&this.e.equals(e.e))}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,s=this.e<e.e?this.e:e.e;return t>=s?null:Ds.fromDateTimes(t,s)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,s=this.e>e.e?this.e:e.e;return Ds.fromDateTimes(t,s)}static merge(e){const[t,s]=e.sort((e,t)=>e.s-t.s).reduce(([e,t],s)=>t?t.overlaps(s)||t.abutsStart(s)?[e,t.union(s)]:[e.concat([t]),s]:[e,s],[[],null]);return s&&t.push(s),t}static xor(e){let t=null,s=0;const n=[],i=e.map(e=>[{time:e.s,type:"s"},{time:e.e,type:"e"}]),r=Array.prototype.concat(...i).sort((e,t)=>e.time-t.time);for(const e of r)s+="s"===e.type?1:-1,1===s?t=e.time:(t&&+t!==+e.time&&n.push(Ds.fromDateTimes(t,e.time)),t=null);return Ds.merge(n)}difference(...e){return Ds.xor([this].concat(e)).map(e=>this.intersection(e)).filter(e=>e&&!e.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Ms}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=f,t={}){return this.isValid?xt.create(this.s.loc.clone(t),e).formatInterval(this):Ms}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Ms}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Ms}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Ms}toFormat(e,{separator:t=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:Ms}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):xs.invalid(this.invalidReason)}mapEndpoints(e){return Ds.fromDateTimes(e(this.s),e(this.e))}}class $s{static hasDST(e=be.defaultZone){const t=vn.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return _.isValidZone(e)}static normalizeZone(e){return oe(e,be.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||ne.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||ne.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||ne.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:s=null,locObj:n=null,outputCalendar:i="gregory"}={}){return(n||ne.create(t,s,i)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:s=null,locObj:n=null,outputCalendar:i="gregory"}={}){return(n||ne.create(t,s,i)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:s=null,locObj:n=null}={}){return(n||ne.create(t,s,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:s=null,locObj:n=null}={}){return(n||ne.create(t,s,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return ne.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return ne.create(t,null,"gregory").eras(e)}static features(){return{relative:Ve(),localeWeek:qe()}}}function Ls(e,t){const s=e=>e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=s(t)-s(e);return Math.floor(xs.fromMillis(n).as("days"))}function Es(e,t,s,n){let[i,r,a,o]=function(e,t,s){const n=[["years",(e,t)=>t.year-e.year],["quarters",(e,t)=>t.quarter-e.quarter+4*(t.year-e.year)],["months",(e,t)=>t.month-e.month+12*(t.year-e.year)],["weeks",(e,t)=>{const s=Ls(e,t);return(s-s%7)/7}],["days",Ls]],i={},r=e;let a,o;for(const[l,c]of n)s.indexOf(l)>=0&&(a=l,i[l]=c(e,t),o=r.plus(i),o>t?(i[l]--,(e=r.plus(i))>t&&(o=e,i[l]--,e=r.plus(i))):e=o);return[e,i,o,a]}(e,t,s);const l=t-i,c=s.filter(e=>["hours","minutes","seconds","milliseconds"].indexOf(e)>=0);0===c.length&&(a<t&&(a=i.plus({[o]:1})),a!==i&&(r[o]=(r[o]||0)+l/(a-i)));const u=xs.fromObject(r,n);return c.length>0?xs.fromMillis(l,n).shiftTo(...c).plus(u):u}function Is(e,t=e=>e){return{regex:e,deser:([e])=>t(function(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let s=0;s<e.length;s++){const n=e.charCodeAt(s);if(-1!==e[s].search(le.hanidec))t+=ue.indexOf(e[s]);else for(const e in ce){const[s,i]=ce[e];n>=s&&n<=i&&(t+=n-s)}}return parseInt(t,10)}return t}(e))}}const Ns=`[ ${String.fromCharCode(160)}]`,As=new RegExp(Ns,"g");function Os(e){return e.replace(/\./g,"\\.?").replace(As,Ns)}function Ps(e){return e.replace(/\./g,"").replace(As," ").toLowerCase()}function Fs(e,t){return null===e?null:{regex:RegExp(e.map(Os).join("|")),deser:([s])=>e.findIndex(e=>Ps(s)===Ps(e))+t}}function Ws(e,t){return{regex:e,deser:([,e,t])=>rt(e,t),groups:t}}function Rs(e){return{regex:e,deser:([e])=>e}}const Hs={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Vs=null;function qs(e,t){return Array.prototype.concat(...e.map(e=>function(e,t){if(e.literal)return e;const s=zs(xt.macroTokenToFormatOpts(e.val),t);return null==s||s.includes(void 0)?e:s}(e,t)))}class _s{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=qs(xt.parseFormat(t),e),this.units=this.tokens.map(t=>function(e,t){const s=he(t),n=he(t,"{2}"),i=he(t,"{3}"),r=he(t,"{4}"),a=he(t,"{6}"),o=he(t,"{1,2}"),l=he(t,"{1,3}"),c=he(t,"{1,6}"),u=he(t,"{1,9}"),d=he(t,"{2,4}"),h=he(t,"{4,6}"),m=e=>{return{regex:RegExp((t=e.val,t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"))),deser:([e])=>e,literal:!0};var t},f=(f=>{if(e.literal)return m(f);switch(f.val){case"G":return Fs(t.eras("short"),0);case"GG":return Fs(t.eras("long"),0);case"y":return Is(c);case"yy":case"kk":return Is(d,nt);case"yyyy":case"kkkk":return Is(r);case"yyyyy":return Is(h);case"yyyyyy":return Is(a);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return Is(o);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return Is(n);case"MMM":return Fs(t.months("short",!0),1);case"MMMM":return Fs(t.months("long",!0),1);case"LLL":return Fs(t.months("short",!1),1);case"LLLL":return Fs(t.months("long",!1),1);case"o":case"S":return Is(l);case"ooo":case"SSS":return Is(i);case"u":return Rs(u);case"uu":return Rs(o);case"uuu":case"E":case"c":return Is(s);case"a":return Fs(t.meridiems(),0);case"EEE":return Fs(t.weekdays("short",!1),1);case"EEEE":return Fs(t.weekdays("long",!1),1);case"ccc":return Fs(t.weekdays("short",!0),1);case"cccc":return Fs(t.weekdays("long",!0),1);case"Z":case"ZZ":return Ws(new RegExp(`([+-]${o.source})(?::(${n.source}))?`),2);case"ZZZ":return Ws(new RegExp(`([+-]${o.source})(${n.source})?`),2);case"z":return Rs(/[a-z_+-/]{1,256}?/i);case" ":return Rs(/[^\S\n\r]/);default:return m(f)}})(e)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return f.token=e,f}(t,e)),this.disqualifyingUnit=this.units.find(e=>e.invalidReason),!this.disqualifyingUnit){const[e,t]=[`^${(s=this.units).map(e=>e.regex).reduce((e,t)=>`${e}(${t.source})`,"")}$`,s];this.regex=RegExp(e,"i"),this.handlers=t}var s}explainFromTokens(e){if(this.isValid){const[t,s]=function(e,t,s){const n=e.match(t);if(n){const e={};let t=1;for(const i in s)if(Ue(s,i)){const r=s[i],a=r.groups?r.groups+1:1;!r.literal&&r.token&&(e[r.token.val[0]]=r.deser(n.slice(t,t+a))),t+=a}return[n,e]}return[n,{}]}(e,this.regex,this.handlers),[n,i,r]=s?function(e){let t,s=null;return We(e.z)||(s=_.create(e.z)),We(e.Z)||(s||(s=new re(e.Z)),t=e.Z),We(e.q)||(e.M=3*(e.q-1)+1),We(e.h)||(e.h<12&&1===e.a?e.h+=12:12===e.h&&0===e.a&&(e.h=0)),0===e.G&&e.y&&(e.y=-e.y),We(e.u)||(e.S=Ye(e.u)),[Object.keys(e).reduce((t,s)=>{const n=(e=>{switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}})(s);return n&&(t[n]=e[s]),t},{}),s,t]}(s):[null,null,void 0];if(Ue(s,"a")&&Ue(s,"H"))throw new o("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:s,result:n,zone:i,specificOffset:r}}return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Us(e,t,s){return new _s(e,s).explainFromTokens(t)}function zs(e,t){if(!e)return null;const s=xt.create(t,e).dtFormatter((Vs||(Vs=vn.fromMillis(1555555555555)),Vs)),n=s.formatToParts(),i=s.resolvedOptions();return n.map(t=>function(e,t,s){const{type:n,value:i}=e;if("literal"===n){const e=/^\s+$/.test(i);return{literal:!e,val:e?" ":i}}const r=t[n];let a=n;"hour"===n&&(a=null!=t.hour12?t.hour12?"hour12":"hour24":null!=t.hourCycle?"h11"===t.hourCycle||"h12"===t.hourCycle?"hour12":"hour24":s.hour12?"hour12":"hour24");let o=Hs[a];if("object"==typeof o&&(o=o[r]),o)return{literal:!1,val:o}}(t,e,i))}const Zs="Invalid DateTime",Bs=864e13;function js(e){return new ke("unsupported zone",`the zone "${e.name}" is not supported`)}function Gs(e){return null===e.weekData&&(e.weekData=Ee(e.c)),e.weekData}function Ys(e){return null===e.localWeekData&&(e.localWeekData=Ee(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function Js(e,t){const s={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new vn({...s,...t,old:s})}function Ks(e,t,s){let n=e-60*t*1e3;const i=s.offset(n);if(t===i)return[n,t];n-=60*(i-t)*1e3;const r=s.offset(n);return i===r?[n,i]:[e-60*Math.min(i,r)*1e3,Math.max(i,r)]}function Qs(e,t){const s=new Date(e+=60*t*1e3);return{year:s.getUTCFullYear(),month:s.getUTCMonth()+1,day:s.getUTCDate(),hour:s.getUTCHours(),minute:s.getUTCMinutes(),second:s.getUTCSeconds(),millisecond:s.getUTCMilliseconds()}}function Xs(e,t,s){return Ks(et(e),t,s)}function en(e,t){const s=e.o,n=e.c.year+Math.trunc(t.years),i=e.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters),r={...e.c,year:n,month:i,day:Math.min(e.c.day,Xe(n,i))+Math.trunc(t.days)+7*Math.trunc(t.weeks)},a=xs.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),o=et(r);let[l,c]=Ks(o,s,e.zone);return 0!==a&&(l+=a,c=e.zone.offset(l)),{ts:l,o:c}}function tn(e,t,s,n,i,r){const{setZone:a,zone:o}=s;if(e&&0!==Object.keys(e).length||t){const n=t||o,i=vn.fromObject(e,{...s,zone:n,specificOffset:r});return a?i:i.setZone(o)}return vn.invalid(new ke("unparsable",`the input "${i}" can't be parsed as ${n}`))}function sn(e,t,s=!0){return e.isValid?xt.create(ne.create("en-US"),{allowZ:s,forceSimple:!0}).formatDateTimeFromString(e,t):null}function nn(e,t,s){const n=e.c.year>9999||e.c.year<0;let i="";if(n&&e.c.year>=0&&(i+="+"),i+=Be(e.c.year,n?6:4),"year"===s)return i;if(t){if(i+="-",i+=Be(e.c.month),"month"===s)return i;i+="-"}else if(i+=Be(e.c.month),"month"===s)return i;return i+=Be(e.c.day),i}function rn(e,t,s,n,i,r,a){let o=!s||0!==e.c.millisecond||0!==e.c.second,l="";switch(a){case"day":case"month":case"year":break;default:if(l+=Be(e.c.hour),"hour"===a)break;if(t){if(l+=":",l+=Be(e.c.minute),"minute"===a)break;o&&(l+=":",l+=Be(e.c.second))}else{if(l+=Be(e.c.minute),"minute"===a)break;o&&(l+=Be(e.c.second))}if("second"===a)break;!o||n&&0===e.c.millisecond||(l+=".",l+=Be(e.c.millisecond,3))}return i&&(e.isOffsetFixed&&0===e.offset&&!r?l+="Z":e.o<0?(l+="-",l+=Be(Math.trunc(-e.o/60)),l+=":",l+=Be(Math.trunc(-e.o%60))):(l+="+",l+=Be(Math.trunc(e.o/60)),l+=":",l+=Be(Math.trunc(e.o%60)))),r&&(l+="["+e.zone.ianaName+"]"),l}const an={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},on={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},ln={ordinal:1,hour:0,minute:0,second:0,millisecond:0},cn=["year","month","day","hour","minute","second","millisecond"],un=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],dn=["year","ordinal","hour","minute","second","millisecond"];function hn(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new l(e);return t}function mn(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return hn(e)}}function fn(e,t){const s=oe(t.zone,be.defaultZone);if(!s.isValid)return vn.invalid(js(s));const n=ne.fromObject(t);let i,r;if(We(e.year))i=be.now();else{for(const t of cn)We(e[t])&&(e[t]=an[t]);const t=Pe(e)||Fe(e);if(t)return vn.invalid(t);const n=function(e){if(void 0===yn&&(yn=be.now()),"iana"!==e.type)return e.offset(yn);const t=e.name;let s=wn.get(t);return void 0===s&&(s=e.offset(yn),wn.set(t,s)),s}(s);[i,r]=Xs(e,n,s)}return new vn({ts:i,zone:s,loc:n,o:r})}function pn(e,t,s){const n=!!We(s.round)||s.round,i=We(s.rounding)?"trunc":s.rounding,r=(e,r)=>{e=Je(e,n||s.calendary?0:2,s.calendary?"round":i);return t.loc.clone(s).relFormatter(s).format(e,r)},a=n=>s.calendary?t.hasSame(e,n)?0:t.startOf(n).diff(e.startOf(n),n).get(n):t.diff(e,n).get(n);if(s.unit)return r(a(s.unit),s.unit);for(const e of s.units){const t=a(e);if(Math.abs(t)>=1)return r(t,e)}return r(e>t?-0:0,s.units[s.units.length-1])}function gn(e){let t,s={};return e.length>0&&"object"==typeof e[e.length-1]?(s=e[e.length-1],t=Array.from(e).slice(0,e.length-1)):t=Array.from(e),[s,t]}let yn;const wn=new Map;class vn{constructor(e){const t=e.zone||be.defaultZone;let s=e.invalid||(Number.isNaN(e.ts)?new ke("invalid input"):null)||(t.isValid?null:js(t));this.ts=We(e.ts)?be.now():e.ts;let n=null,i=null;if(!s){if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[n,i]=[e.old.c,e.old.o];else{const r=Re(e.o)&&!e.old?e.o:t.offset(this.ts);n=Qs(this.ts,r),s=Number.isNaN(n.year)?new ke("invalid input"):null,n=s?null:n,i=s?null:r}}this._zone=t,this.loc=e.loc||ne.create(),this.invalid=s,this.weekData=null,this.localWeekData=null,this.c=n,this.o=i,this.isLuxonDateTime=!0}static now(){return new vn({})}static local(){const[e,t]=gn(arguments),[s,n,i,r,a,o,l]=t;return fn({year:s,month:n,day:i,hour:r,minute:a,second:o,millisecond:l},e)}static utc(){const[e,t]=gn(arguments),[s,n,i,r,a,o,l]=t;return e.zone=re.utcInstance,fn({year:s,month:n,day:i,hour:r,minute:a,second:o,millisecond:l},e)}static fromJSDate(e,t={}){const s=(n=e,"[object Date]"===Object.prototype.toString.call(n)?e.valueOf():NaN);var n;if(Number.isNaN(s))return vn.invalid("invalid input");const i=oe(t.zone,be.defaultZone);return i.isValid?new vn({ts:s,zone:i,loc:ne.fromObject(t)}):vn.invalid(js(i))}static fromMillis(e,t={}){if(Re(e))return e<-Bs||e>Bs?vn.invalid("Timestamp out of range"):new vn({ts:e,zone:oe(t.zone,be.defaultZone),loc:ne.fromObject(t)});throw new c(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(Re(e))return new vn({ts:1e3*e,zone:oe(t.zone,be.defaultZone),loc:ne.fromObject(t)});throw new c("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const s=oe(t.zone,be.defaultZone);if(!s.isValid)return vn.invalid(js(s));const n=ne.fromObject(t),i=ot(e,mn),{minDaysInFirstWeek:r,startOfWeek:a}=Oe(i,n),l=be.now(),c=We(t.specificOffset)?s.offset(l):t.specificOffset,u=!We(i.ordinal),d=!We(i.year),h=!We(i.month)||!We(i.day),m=d||h,f=i.weekYear||i.weekNumber;if((m||u)&&f)throw new o("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(h&&u)throw new o("Can't mix ordinal dates with month/day");const p=f||i.weekday&&!m;let g,y,w=Qs(l,c);p?(g=un,y=on,w=Ee(w,r,a)):u?(g=dn,y=ln,w=Ne(w)):(g=cn,y=an);let v=!1;for(const e of g){We(i[e])?i[e]=v?y[e]:w[e]:v=!0}const S=p?function(e,t=4,s=1){const n=He(e.weekYear),i=Ze(e.weekNumber,1,st(e.weekYear,t,s)),r=Ze(e.weekday,1,7);return n?i?!r&&xe("weekday",e.weekday):xe("week",e.weekNumber):xe("weekYear",e.weekYear)}(i,r,a):u?function(e){const t=He(e.year),s=Ze(e.ordinal,1,Qe(e.year));return t?!s&&xe("ordinal",e.ordinal):xe("year",e.year)}(i):Pe(i),b=S||Fe(i);if(b)return vn.invalid(b);const k=p?Ie(i,r,a):u?Ae(i):i,[C,T]=Xs(k,c,s),x=new vn({ts:C,zone:s,o:T,loc:n});return i.weekday&&m&&e.weekday!==x.weekday?vn.invalid("mismatched weekday",`you can't specify both a weekday of ${i.weekday} and a date of ${x.toISO()}`):x.isValid?x:vn.invalid(x.invalid)}static fromISO(e,t={}){const[s,n]=function(e){return Lt(e,[ts,rs],[ss,as],[ns,os],[is,ls])}(e);return tn(s,n,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[s,n]=function(e){return Lt(function(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(e),[Gt,Yt])}(e);return tn(s,n,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[s,n]=function(e){return Lt(e,[Jt,Xt],[Kt,Xt],[Qt,es])}(e);return tn(s,n,t,"HTTP",t)}static fromFormat(e,t,s={}){if(We(e)||We(t))throw new c("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:i=null}=s,r=ne.fromOpts({locale:n,numberingSystem:i,defaultToEN:!0}),[a,o,l,u]=function(e,t,s){const{result:n,zone:i,specificOffset:r,invalidReason:a}=Us(e,t,s);return[n,i,r,a]}(r,e,t);return u?vn.invalid(u):tn(a,o,s,`format ${t}`,e,l)}static fromString(e,t,s={}){return vn.fromFormat(e,t,s)}static fromSQL(e,t={}){const[s,n]=function(e){return Lt(e,[us,rs],[ds,hs])}(e);return tn(s,n,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new c("need to specify a reason the DateTime is invalid");const s=e instanceof ke?e:new ke(e,t);if(be.throwOnInvalid)throw new i(s);return new vn({invalid:s})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const s=zs(e,ne.fromObject(t));return s?s.map(e=>e?e.val:null).join(""):null}static expandFormat(e,t={}){return qs(xt.parseFormat(e),ne.fromObject(t)).map(e=>e.val).join("")}static resetCache(){yn=void 0,wn.clear()}get(e){return this[e]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Gs(this).weekYear:NaN}get weekNumber(){return this.isValid?Gs(this).weekNumber:NaN}get weekday(){return this.isValid?Gs(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Ys(this).weekday:NaN}get localWeekNumber(){return this.isValid?Ys(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Ys(this).weekYear:NaN}get ordinal(){return this.isValid?Ne(this.c).ordinal:NaN}get monthShort(){return this.isValid?$s.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?$s.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?$s.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?$s.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,s=et(this.c),n=this.zone.offset(s-e),i=this.zone.offset(s+e),r=this.zone.offset(s-n*t),a=this.zone.offset(s-i*t);if(r===a)return[this];const o=s-r*t,l=s-a*t,c=Qs(o,r),u=Qs(l,a);return c.hour===u.hour&&c.minute===u.minute&&c.second===u.second&&c.millisecond===u.millisecond?[Js(this,{ts:o}),Js(this,{ts:l})]:[this]}get isInLeapYear(){return Ke(this.year)}get daysInMonth(){return Xe(this.year,this.month)}get daysInYear(){return this.isValid?Qe(this.year):NaN}get weeksInWeekYear(){return this.isValid?st(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?st(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:s,calendar:n}=xt.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:s,outputCalendar:n}}toUTC(e=0,t={}){return this.setZone(re.instance(e),t)}toLocal(){return this.setZone(be.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:s=!1}={}){if((e=oe(e,be.defaultZone)).equals(this.zone))return this;if(e.isValid){let n=this.ts;if(t||s){const t=e.offset(this.ts),s=this.toObject();[n]=Xs(s,t,e)}return Js(this,{ts:n,zone:e})}return vn.invalid(js(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:s}={}){return Js(this,{loc:this.loc.clone({locale:e,numberingSystem:t,outputCalendar:s})})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=ot(e,mn),{minDaysInFirstWeek:s,startOfWeek:n}=Oe(t,this.loc),i=!We(t.weekYear)||!We(t.weekNumber)||!We(t.weekday),r=!We(t.ordinal),a=!We(t.year),l=!We(t.month)||!We(t.day),c=a||l,u=t.weekYear||t.weekNumber;if((c||r)&&u)throw new o("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&r)throw new o("Can't mix ordinal dates with month/day");let d;i?d=Ie({...Ee(this.c,s,n),...t},s,n):We(t.ordinal)?(d={...this.toObject(),...t},We(t.day)&&(d.day=Math.min(Xe(d.year,d.month),d.day))):d=Ae({...Ne(this.c),...t});const[h,m]=Xs(d,this.o,this.zone);return Js(this,{ts:h,o:m})}plus(e){if(!this.isValid)return this;return Js(this,en(this,xs.fromDurationLike(e)))}minus(e){if(!this.isValid)return this;return Js(this,en(this,xs.fromDurationLike(e).negate()))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const s={},n=xs.normalizeUnit(e);switch(n){case"years":s.month=1;case"quarters":case"months":s.day=1;case"weeks":case"days":s.hour=0;case"hours":s.minute=0;case"minutes":s.second=0;case"seconds":s.millisecond=0}if("weeks"===n)if(t){const e=this.loc.getStartOfWeek(),{weekday:t}=this;t<e&&(s.weekNumber=this.weekNumber-1),s.weekday=e}else s.weekday=1;if("quarters"===n){const e=Math.ceil(this.month/3);s.month=3*(e-1)+1}return this.set(s)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?xt.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):Zs}toLocaleString(e=f,t={}){return this.isValid?xt.create(this.loc.clone(t),e).formatDateTime(this):Zs}toLocaleParts(e={}){return this.isValid?xt.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:s=!1,includeOffset:n=!0,extendedZone:i=!1,precision:r="milliseconds"}={}){if(!this.isValid)return null;const a="extended"===e;let o=nn(this,a,r=hn(r));return cn.indexOf(r)>=3&&(o+="T"),o+=rn(this,a,t,s,n,i,r),o}toISODate({format:e="extended",precision:t="day"}={}){return this.isValid?nn(this,"extended"===e,hn(t)):null}toISOWeekDate(){return sn(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:s=!0,includePrefix:n=!1,extendedZone:i=!1,format:r="extended",precision:a="milliseconds"}={}){if(!this.isValid)return null;return a=hn(a),(n&&cn.indexOf(a)>=3?"T":"")+rn(this,"extended"===r,t,e,s,i,a)}toRFC2822(){return sn(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return sn(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?nn(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:s=!0}={}){let n="HH:mm:ss.SSS";return(t||e)&&(s&&(n+=" "),t?n+="z":e&&(n+="ZZ")),sn(this,n,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Zs}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",s={}){if(!this.isValid||!e.isValid)return xs.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...s},i=(o=t,Array.isArray(o)?o:[o]).map(xs.normalizeUnit),r=e.valueOf()>this.valueOf(),a=Es(r?this:e,r?e:this,i,n);var o;return r?a.negate():a}diffNow(e="milliseconds",t={}){return this.diff(vn.now(),e,t)}until(e){return this.isValid?Ds.fromDateTimes(this,e):this}hasSame(e,t,s){if(!this.isValid)return!1;const n=e.valueOf(),i=this.setZone(e.zone,{keepLocalTime:!0});return i.startOf(t,s)<=n&&n<=i.endOf(t,s)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||vn.fromObject({},{zone:this.zone}),s=e.padding?this<t?-e.padding:e.padding:0;let n=["years","months","days","hours","minutes","seconds"],i=e.unit;return Array.isArray(e.unit)&&(n=e.unit,i=void 0),pn(t,this.plus(s),{...e,numeric:"always",units:n,unit:i})}toRelativeCalendar(e={}){return this.isValid?pn(e.base||vn.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(vn.isDateTime))throw new c("min requires all arguments be DateTimes");return _e(e,e=>e.valueOf(),Math.min)}static max(...e){if(!e.every(vn.isDateTime))throw new c("max requires all arguments be DateTimes");return _e(e,e=>e.valueOf(),Math.max)}static fromFormatExplain(e,t,s={}){const{locale:n=null,numberingSystem:i=null}=s;return Us(ne.fromOpts({locale:n,numberingSystem:i,defaultToEN:!0}),e,t)}static fromStringExplain(e,t,s={}){return vn.fromFormatExplain(e,t,s)}static buildFormatParser(e,t={}){const{locale:s=null,numberingSystem:n=null}=t,i=ne.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});return new _s(i,e)}static fromFormatParser(e,t,s={}){if(We(e)||We(t))throw new c("fromFormatParser requires an input string and a format parser");const{locale:n=null,numberingSystem:i=null}=s,r=ne.fromOpts({locale:n,numberingSystem:i,defaultToEN:!0});if(!r.equals(t.locale))throw new c(`fromFormatParser called with a locale of ${r}, but the format parser was created for ${t.locale}`);const{result:a,zone:o,specificOffset:l,invalidReason:u}=t.explainFromTokens(e);return u?vn.invalid(u):tn(a,o,s,`format ${t.format}`,e,l)}static get DATE_SHORT(){return f}static get DATE_MED(){return p}static get DATE_MED_WITH_WEEKDAY(){return g}static get DATE_FULL(){return y}static get DATE_HUGE(){return w}static get TIME_SIMPLE(){return v}static get TIME_WITH_SECONDS(){return S}static get TIME_WITH_SHORT_OFFSET(){return b}static get TIME_WITH_LONG_OFFSET(){return k}static get TIME_24_SIMPLE(){return C}static get TIME_24_WITH_SECONDS(){return T}static get TIME_24_WITH_SHORT_OFFSET(){return x}static get TIME_24_WITH_LONG_OFFSET(){return M}static get DATETIME_SHORT(){return D}static get DATETIME_SHORT_WITH_SECONDS(){return $}static get DATETIME_MED(){return L}static get DATETIME_MED_WITH_SECONDS(){return E}static get DATETIME_MED_WITH_WEEKDAY(){return I}static get DATETIME_FULL(){return N}static get DATETIME_FULL_WITH_SECONDS(){return A}static get DATETIME_HUGE(){return O}static get DATETIME_HUGE_WITH_SECONDS(){return P}}function Sn(e){if(vn.isDateTime(e))return e;if(e&&e.valueOf&&Re(e.valueOf()))return vn.fromJSDate(e);if(e&&"object"==typeof e)return vn.fromObject(e);throw new c(`Unknown datetime argument: ${e}, of type ${typeof e}`)}},134:(e,t,s)=>{s.d(t,{A:()=>ms});var n,i,r,a,o,l,c,u,d,h,m,f,p,g,y,w,v,S,b,k,C,T,x,M,D,$,L,E,I,N,A,O,P,F,W,R,H,V,q,_,U,z,Z,B,j,G,Y,J,K,Q,X,ee,te,se,ne,ie,re,ae,oe,le,ce,ue,de,he,me,fe,pe,ge,ye,we={CloudQuantity:{BKN:"broken",FEW:"few",NSC:"no significant clouds.",OVC:"overcast",SCT:"scattered",SKC:"sky clear"},CloudType:{AC:"Altocumulus",AS:"Altostratus",CB:"Cumulonimbus",CC:"CirroCumulus",CI:"Cirrus",CS:"Cirrostratus",CU:"Cumulus",NS:"Nimbostratus",SC:"Stratocumulus",ST:"Stratus",TCU:"Towering cumulus"},Converter:{D:"decreasing",E:"East",ENE:"East North East",ESE:"East South East",N:"North",NE:"North East",NNE:"North North East",NNW:"North North West",NSC:"no significant change",NW:"North West",S:"South",SE:"South East",SSE:"South South East",SSW:"South South West",SW:"South West",U:"up rising",VRB:"Variable",W:"West",WNW:"West North West",WSW:"West South West"},DepositBrakingCapacity:{GOOD:"good",MEDIUM:"medium",MEDIUM_GOOD:"medium/good",MEDIUM_POOR:"poor/medium",NOT_REPORTED:"not reported",POOR:"poor",UNRELIABLE:"figures unreliable"},DepositCoverage:{FROM_11_TO_25:"from 11% to 25%",FROM_26_TO_50:"from 26% to 50%",FROM_51_TO_100:"from 51% to 100%",LESS_10:"less than 10%",NOT_REPORTED:"not reported"},DepositThickness:{CLOSED:"closed",LESS_1_MM:"less than 1 mm",NOT_REPORTED:"not reported",THICKNESS_10:"10 cm",THICKNESS_15:"15 cm",THICKNESS_20:"20 cm",THICKNESS_25:"25 cm",THICKNESS_30:"30 cm",THICKNESS_35:"35 cm",THICKNESS_40:"40 cm or more"},DepositType:{CLEAR_DRY:"clear and dry",COMPACTED_SNOW:"compacted or rolled snow",DAMP:"damp",DRY_SNOW:"dry snow",FROZEN_RIDGES:"frozen ruts or ridges",ICE:"ice",NOT_REPORTED:"not reported",RIME_FROST_COVERED:"rime or frost covered",SLUSH:"slush",WET_SNOW:"wet snow",WET_WATER_PATCHES:"wet or water patches"},Descriptive:{BC:"patches",BL:"blowing",DR:"low drifting",FZ:"freezing",MI:"shallow",PR:"partial",SH:"showers of",TS:"thunderstorm"},Error:{prefix:"An error occurred. Error code n°"},ErrorCode:{AirportNotFound:"The airport was not found for this message.",InvalidMessage:"The entered message is invalid."},Indicator:{M:"less than",P:"greater than"},"intensity-plus":"Heavy",Intensity:{"-":"Light",VC:"In the vicinity"},MetarFacade:{InvalidIcao:"Icao code is invalid."},Phenomenon:{BR:"mist",DS:"duststorm",DU:"widespread dust",DZ:"drizzle",FC:"funnel cloud",FG:"fog",FU:"smoke",GR:"hail",GS:"small hail and/or snow pellets",HZ:"haze",IC:"ice crystals",PL:"ice pellets",PO:"dust or sand whirls",PY:"spray",RA:"rain",SA:"sand",SG:"snow grains",SN:"snow",SQ:"squall",SS:"sandstorm",TS:"thunderstorm",UP:"unknown precipitation",VA:"volcanic ash",NSW:"no significant weather"},Remark:{ALQDS:"all quadrants",AO1:"automated stations without a precipitation discriminator",AO2:"automated station with a precipitation discriminator",AO2A:"automated station with a precipitation discriminator (augmented)",BASED:"based",Barometer:["Increase, then decrease","Increase, then steady, or increase then Increase more slowly","steady or unsteady increase","Decrease or steady, then increase; or increase then increase more rapidly","Steady","Decrease, then increase","Decrease then steady; or decrease then decrease more slowly","Steady or unsteady decrease","Steady or increase, then decrease; or decrease then decrease more rapidly"],Ceiling:{Height:"ceiling varying between {0} and {1} feet",Second:{Location:"ceiling of {0} feet measured by a second sensor located at {1}"}},DSNT:"distant",FCST:"forecast",FUNNELCLOUD:"funnel cloud",HVY:"heavy",Hail:{0:"largest hailstones with a diameter of {0} inches",LesserThan:"largest hailstones with a diameter less than {0} inches"},Hourly:{Maximum:{Minimum:{Temperature:"24-hour maximum temperature of {0}°C and 24-hour minimum temperature of {1}°C"},Temperature:"6-hourly maximum temperature of {0}°C"},Minimum:{Temperature:"6-hourly minimum temperature of {0}°C"},Temperature:{0:"hourly temperature of {0}°C",Dew:{Point:"hourly temperature of {0}°C and dew point of {1}°C"}}},Ice:{Accretion:{Amount:"{0}/100 of an inch of ice accretion in the past {1} hour(s)"}},LGT:"light",LTG:"lightning",MOD:"moderate",Next:{Forecast:{By:"next forecast by {0}, {1}:{2}Z"}},NXT:"next",ON:"on",Obscuration:"{0} layer at {1} feet composed of {2}",PRESFR:"pressure falling rapidly",PRESRR:"pressure rising rapidly",PeakWind:"peak wind of {1} knots from {0} degrees at {2}:{3}",Precipitation:{Amount:{24:"{0} inches of precipitation fell in the last 24 hours",3:{6:"{1} inches of precipitation fell in the last {0} hours"},Hourly:"{0}/100 of an inch of precipitation fell in the last hour"},Beg:{0:"{0} {1} beginning at {2}:{3}",End:"{0} {1} beginning at {2}:{3} ending at {4}:{5}"},End:"{0} {1} ending at {2}:{3}"},Pressure:{Tendency:"of {0} hectopascals in the past 3 hours"},SLPNO:"sea level pressure not available",Sea:{Level:{Pressure:"sea level pressure of {0} HPa"}},Second:{Location:{Visibility:"visibility of {0} SM measured by a second sensor located at {1}"}},Sector:{Visibility:"visibility of {1} SM in the {0} direction"},Snow:{Depth:"snow depth of {0} inches",Increasing:{Rapidly:"snow depth increase of {0} inches in the past hour with a total depth on the ground of {1} inches"},Pellets:"{0} snow pellets"},Sunshine:{Duration:"{0} minutes of sunshine"},Surface:{Visibility:"surface visibility of {0} statute miles"},TORNADO:"tornado",Thunderstorm:{Location:{0:"thunderstorm {0} of the station",Moving:"thunderstorm {0} of the station moving towards {1}"}},Tornadic:{Activity:{BegEnd:"{0} beginning at {1}:{2} ending at {3}:{4} {5} SM {6} of the station",Beginning:"{0} beginning at {1}:{2} {3} SM {4} of the station",Ending:"{0} ending at {1}:{2} {3} SM {4} of the station"}},Tower:{Visibility:"control tower visibility of {0} statute miles"},VIRGA:"virga",Variable:{Prevailing:{Visibility:"variable prevailing visibility between {0} and {1} SM"},Sky:{Condition:{0:"cloud layer varying between {0} and {1}",Height:"cloud layer at {0} feet varying between {1} and {2}"}}},Virga:{Direction:"virga {0} from the station"},WATERSPOUT:"waterspout",Water:{Equivalent:{Snow:{Ground:"water equivalent of {0} inches of snow"}}},WindShift:{0:"wind shift at {0}:{1}",FROPA:"wind shift accompanied by frontal passage at {0}:{1}"}},TimeIndicator:{AT:"at",FM:"From",TL:"until"},ToString:{airport:"airport",altimeter:"altimeter (hPa)",amendment:"amendment",auto:"auto",cavok:"cavok",clouds:"clouds",day:{hour:"hour of the day",month:"day of the month"},deposit:{braking:"braking capacity",coverage:"coverage",thickness:"thickness",type:"type of deposit"},descriptive:"descriptive",dew:{point:"dew point"},end:{day:{month:"end day of the month"},hour:{day:"end hour of the day"}},height:{feet:"height (ft)",meter:"height (m)"},indicator:"indicator",intensity:"intensity",message:"original message",name:"name",nosig:"nosig",phenomenons:"phenomenons",probability:"probability",quantity:"quantity",remark:"remarks",report:{time:"time of report"},runway:{info:"runways information"},start:{day:{month:"starting day of the month"},hour:{day:"starting hour of the day"},minute:"starting minute"},temperature:{0:"temperature (°C)",max:"maximum temperature (°C)",min:"minimum temperature (°C)"},trend:"trend",trends:"trends",type:"type",vertical:{visibility:"vertical visibility (ft)"},visibility:{main:"main visibility",max:"maximum visibility",min:{0:"minimum visibility",direction:"minimum visibility direction"}},weather:{conditions:"weather conditions"},wind:{direction:{0:"direction",degrees:"direction (degrees)"},gusts:"gusts",max:{variation:"maximal wind variation"},min:{variation:"minimal wind variation"},speed:"speed",unit:"unit"}},WeatherChangeType:{BECMG:"Becoming",FM:"From",PROB:"Probability",TEMPO:"Temporary"}};function ve(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)}"function"==typeof SuppressedError&&SuppressedError;class Se extends Error{constructor(e){super(e),this.name="ParseError",Object.setPrototypeOf(this,new.target.prototype)}}class be extends Se{constructor(e){super("string"==typeof e?`Invalid weather string: ${e}`:"Invalid weather string"),this.name="InvalidWeatherStatementError",Object.setPrototypeOf(this,new.target.prototype),"string"!=typeof e&&(this.cause=e)}}class ke extends Se{constructor(e){super(e),this.name="CommandExecutionError",Object.setPrototypeOf(this,new.target.prototype)}}class Ce extends Se{constructor(e){super(e),this.name="UnexpectedParseError",Object.setPrototypeOf(this,new.target.prototype)}}function Te(e,t,s){let n=e.split(t);if(" "===t&&(n=n.filter(e=>e)),null==s||n.length<=s)return n;const i=n.slice(0,s);return i.push(n.slice(s).join(t)),i}function xe(e,t){if(!Object.values(t).includes(e))throw new ke(`${e} not found in ${Object.values(t)}`);return e}function Me(e,t){const s=function(e,t,s="."){return(Array.isArray(t)?t:t.split(s)).reduce((e,t)=>e?.[t],e)}(t,e);if(s&&"string"==typeof s)return s}function De(e,...t){if(e){for(const e of t)if(void 0===e)return;return e.replace(/{\d+}/g,e=>{const s=+e.slice(1,-1);return`${t[s]}`})}}class $e{constructor(e){this.locale=e}}class Le extends $e{constructor(){super(...arguments),n.set(this,/^CIG (\d{3})V(\d{3})\b/)}canParse(e){return ve(this,n,"f").test(e)}execute(e,t){const s=e.match(ve(this,n,"f"));if(!s)throw new Ce("Match not found");const i=100*+s[1],r=100*+s[2],a=De(Me("Remark.Ceiling.Height",this.locale),i,r);return t.push({type:le.CeilingHeight,description:a,raw:s[0],min:i,max:r}),[e.replace(ve(this,n,"f"),"").trim(),t]}}n=new WeakMap;class Ee extends $e{constructor(){super(...arguments),i.set(this,/^CIG (\d{3}) (\w+)\b/)}canParse(e){return ve(this,i,"f").test(e)}execute(e,t){const s=e.match(ve(this,i,"f"));if(!s)throw new Ce("Match not found");const n=100*+s[1],r=s[2],a=De(Me("Remark.Ceiling.Second.Location",this.locale),n,r);return t.push({type:le.CeilingSecondLocation,description:a,raw:s[0],height:n,location:r}),[e.replace(ve(this,i,"f"),"").trim(),t]}}function Ie(e){const t=+e;if(isNaN(t))return"VRB";return["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"][Math.floor((t+11.25)/22.5)%16]}function Ne(e){const[t,s]=e.split(" ");return s?+t+Ae(s):Ae(t)}function Ae(e){const[t,s]=e.split("/");return s?Math.round(+t/+s*100)/100:+t}function Oe(e){return e.startsWith("M")?-Te(e,"M")[1]:+e}function Pe(e,t){const s=+t/10;return"0"===e?s:-s}function Fe(e){return+e/100}i=new WeakMap,function(e){e.METAR="METAR",e.SPECI="SPECI"}(r||(r={})),function(e){e.SKC="SKC",e.FEW="FEW",e.BKN="BKN",e.SCT="SCT",e.OVC="OVC",e.NSC="NSC"}(a||(a={})),function(e){e.CB="CB",e.TCU="TCU",e.CI="CI",e.CC="CC",e.CS="CS",e.AC="AC",e.ST="ST",e.CU="CU",e.AS="AS",e.NS="NS",e.SC="SC"}(o||(o={})),function(e){e.LIGHT="-",e.HEAVY="+",e.IN_VICINITY="VC"}(l||(l={})),function(e){e.SHOWERS="SH",e.SHALLOW="MI",e.PATCHES="BC",e.PARTIAL="PR",e.DRIFTING="DR",e.THUNDERSTORM="TS",e.BLOWING="BL",e.FREEZING="FZ"}(c||(c={})),function(e){e.RAIN="RA",e.DRIZZLE="DZ",e.SNOW="SN",e.SNOW_GRAINS="SG",e.ICE_PELLETS="PL",e.ICE_CRYSTALS="IC",e.HAIL="GR",e.SMALL_HAIL="GS",e.UNKNOW_PRECIPITATION="UP",e.FOG="FG",e.VOLCANIC_ASH="VA",e.MIST="BR",e.HAZE="HZ",e.WIDESPREAD_DUST="DU",e.SMOKE="FU",e.SAND="SA",e.SPRAY="PY",e.SQUALL="SQ",e.SAND_WHIRLS="PO",e.THUNDERSTORM="TS",e.DUSTSTORM="DS",e.SANDSTORM="SS",e.FUNNEL_CLOUD="FC",e.NO_SIGNIFICANT_WEATHER="NSW"}(u||(u={})),function(e){e.AT="AT",e.FM="FM",e.TL="TL"}(d||(d={})),function(e){e.FM="FM",e.BECMG="BECMG",e.TEMPO="TEMPO",e.INTER="INTER",e.PROB="PROB"}(h||(h={})),function(e){e.E="E",e.ENE="ENE",e.ESE="ESE",e.N="N",e.NE="NE",e.NNE="NNE",e.NNW="NNW",e.NW="NW",e.S="S",e.SE="SE",e.SSE="SSE",e.SSW="SSW",e.SW="SW",e.W="W",e.WNW="WNW",e.WSW="WSW"}(m||(m={})),function(e){e.Meters="m",e.StatuteMiles="SM"}(f||(f={})),function(e){e.Knot="KT",e.MetersPerSecond="MPS",e.KilometersPerHour="KM/H"}(p||(p={})),function(e){e.GreaterThan="P",e.LessThan="M"}(g||(g={})),function(e){e.Uprising="U",e.Decreasing="D",e.NoSignificantChange="N"}(y||(y={})),function(e){e.Feet="FT",e.Meters="m"}(w||(w={})),function(e){e.None="0",e.Light="1",e.LightRimeIcingCloud="2",e.LightClearIcingPrecipitation="3",e.ModerateMixedIcing="4",e.ModerateRimeIcingCloud="5",e.ModerateClearIcingPrecipitation="6",e.SevereMixedIcing="7",e.SevereRimeIcingCloud="8",e.SevereClearIcingPrecipitation="9"}(v||(v={})),function(e){e.None="0",e.Light="1",e.ModerateClearAirOccasional="2",e.ModerateClearAirFrequent="3",e.ModerateCloudOccasional="4",e.ModerateCloudFrequent="5",e.SevereClearAirOccasional="6",e.SevereClearAirFrequent="7",e.SevereCloudOccasional="8",e.SevereCloudFrequent="9",e.Extreme="X"}(S||(S={})),function(e){e.NotReported="/",e.ClearDry="0",e.Damp="1",e.WetWaterPatches="2",e.RimeFrostCovered="3",e.DrySnow="4",e.WetSnow="5",e.Slush="6",e.Ice="7",e.CompactedSnow="8",e.FrozenRidges="9"}(b||(b={})),function(e){e.None="0",e.NotReported="/",e.Less10="1",e.From11To25="2",e.From26To50="5",e.From51To100="9"}(k||(k={})),function(e){e.InHg="inHg",e.HPa="hPa"}(C||(C={}));class We extends $e{constructor(){super(...arguments),T.set(this,/^GR ((\d\/\d)|((\d) ?(\d\/\d)?))/)}canParse(e){return ve(this,T,"f").test(e)}execute(e,t){const s=e.match(ve(this,T,"f"));if(!s)throw new Ce("Match not found");const n=De(Me("Remark.Hail.0",this.locale),s[1]);return t.push({type:le.HailSize,description:n,raw:s[0],size:Ne(s[1])}),[e.replace(ve(this,T,"f"),"").trim(),t]}}T=new WeakMap;class Re extends $e{constructor(){super(...arguments),x.set(this,/^4([01])(\d{3})([01])(\d{3})\b/)}canParse(e){return ve(this,x,"f").test(e)}execute(e,t){const s=e.match(ve(this,x,"f"));if(!s)throw new Ce("Match not found");const n=De(Me("Remark.Hourly.Maximum.Minimum.Temperature",this.locale),Pe(s[1],s[2]).toFixed(1),Pe(s[3],s[4]).toFixed(1));return t.push({type:le.HourlyMaximumMinimumTemperature,description:n,raw:s[0],max:Pe(s[1],s[2]),min:Pe(s[3],s[4])}),[e.replace(ve(this,x,"f"),"").trim(),t]}}x=new WeakMap;class He extends $e{constructor(){super(...arguments),M.set(this,/^1([01])(\d{3})\b/)}canParse(e){return ve(this,M,"f").test(e)}execute(e,t){const s=e.match(ve(this,M,"f"));if(!s)throw new Ce("Match not found");const n=De(Me("Remark.Hourly.Maximum.Temperature",this.locale),Pe(s[1],s[2]).toFixed(1));return t.push({type:le.HourlyMaximumTemperature,description:n,raw:s[0],max:Pe(s[1],s[2])}),[e.replace(ve(this,M,"f"),"").trim(),t]}}M=new WeakMap;class Ve extends $e{constructor(){super(...arguments),D.set(this,/^2([01])(\d{3})\b/)}canParse(e){return ve(this,D,"f").test(e)}execute(e,t){const s=e.match(ve(this,D,"f"));if(!s)throw new Ce("Match not found");const n=De(Me("Remark.Hourly.Minimum.Temperature",this.locale),Pe(s[1],s[2]).toFixed(1));return t.push({type:le.HourlyMinimumTemperature,description:n,raw:s[0],min:Pe(s[1],s[2])}),[e.replace(ve(this,D,"f"),"").trim(),t]}}D=new WeakMap;class qe extends $e{constructor(){super(...arguments),$.set(this,/^P(\d{4})\b/)}canParse(e){return ve(this,$,"f").test(e)}execute(e,t){const s=e.match(ve(this,$,"f"));if(!s)throw new Ce("Match not found");const n=+s[1],i=De(Me("Remark.Precipitation.Amount.Hourly",this.locale),n);return t.push({type:le.HourlyPrecipitationAmount,description:i,raw:s[0],amount:n/100}),[e.replace(ve(this,$,"f"),"").trim(),t]}}$=new WeakMap;class _e extends $e{constructor(){super(...arguments),L.set(this,/^5(\d)(\d{3})\b/)}canParse(e){return ve(this,L,"f").test(e)}execute(e,t){const s=e.match(ve(this,L,"f"));if(!s)throw new Ce("Match not found");const n=Me("Remark.Barometer."+ +s[1],this.locale),i=De(Me("Remark.Pressure.Tendency",this.locale),+s[2]/10),r=null!=n&&null!=i?`${n} ${i}`:void 0;return t.push({type:le.HourlyPressure,description:r,raw:s[0],code:+s[1],pressureChange:+s[2]/10}),[e.replace(ve(this,L,"f"),"").trim(),t]}}L=new WeakMap;class Ue extends $e{constructor(){super(...arguments),E.set(this,/^T([01])(\d{3})(([01])(\d{3}))?/)}canParse(e){return ve(this,E,"f").test(e)}execute(e,t){const s=e.match(ve(this,E,"f"));if(!s)throw new Ce("Match not found");const n=Pe(s[1],s[2]);if(s[3]){const e=Pe(s[4],s[5]),i=De(Me("Remark.Hourly.Temperature.Dew.Point",this.locale),n.toFixed(1),e.toFixed(1));t.push({type:le.HourlyTemperatureDewPoint,description:i,raw:s[0],temperature:n,dewPoint:e})}else{const e=De(Me("Remark.Hourly.Temperature.0",this.locale),n.toFixed(1));t.push({type:le.HourlyTemperatureDewPoint,description:e,raw:s[0],temperature:n})}return[e.replace(ve(this,E,"f"),"").trim(),t]}}E=new WeakMap;class ze extends $e{constructor(){super(...arguments),I.set(this,/^l(\d)(\d{3})\b/)}canParse(e){return ve(this,I,"f").test(e)}execute(e,t){const s=e.match(ve(this,I,"f"));if(!s)throw new Ce("Match not found");const n=De(Me("Remark.Ice.Accretion.Amount",this.locale),+s[2],+s[1]);return t.push({type:le.IceAccretion,description:n,raw:s[0],amount:+s[2]/100,periodInHours:+s[1]}),[e.replace(ve(this,I,"f"),"").trim(),t]}}I=new WeakMap;class Ze extends $e{constructor(){super(...arguments),N.set(this,/^([A-Z]{2}) ([A-Z]{3})(\d{3})/)}canParse(e){return ve(this,N,"f").test(e)}execute(e,t){const s=e.match(ve(this,N,"f"));if(!s)throw new Ce("Match not found");const n=xe(s[2],a),i=100*+s[3],r=xe(s[1],u),o=De(Me("Remark.Obscuration",this.locale),Me(`CloudQuantity.${n}`,this.locale),i,Me(`Phenomenon.${r}`,this.locale));return t.push({type:le.Obscuration,description:o,raw:s[0],quantity:n,height:i,phenomenon:r}),[e.replace(ve(this,N,"f"),"").trim(),t]}}N=new WeakMap;class Be extends $e{constructor(){super(...arguments),A.set(this,/^7(\d{4})\b/)}canParse(e){return ve(this,A,"f").test(e)}execute(e,t){const s=e.match(ve(this,A,"f"));if(!s)throw new Ce("Match not found");const n=Fe(s[1]),i=De(Me("Remark.Precipitation.Amount.24",this.locale),n);return t.push({type:le.PrecipitationAmount24Hour,description:i,raw:s[0],amount:n}),[e.replace(ve(this,A,"f"),"").trim(),t]}}A=new WeakMap;class je extends $e{constructor(){super(...arguments),O.set(this,/^([36])(\d{4})\b/)}canParse(e){return ve(this,O,"f").test(e)}execute(e,t){const s=e.match(ve(this,O,"f"));if(!s)throw new Ce("Match not found");const n=+s[1],i=Fe(s[2]),r=De(Me("Remark.Precipitation.Amount.3.6",this.locale),n,i);return t.push({type:le.PrecipitationAmount36Hour,description:r,raw:s[0],periodInHours:n,amount:i}),[e.replace(ve(this,O,"f"),"").trim(),t]}}O=new WeakMap;class Ge extends $e{constructor(){super(...arguments),P.set(this,/^(([A-Z]{2})?([A-Z]{2})B(\d{2})?(\d{2})E(\d{2})?(\d{2}))/)}canParse(e){return ve(this,P,"f").test(e)}execute(e,t){const s=e.match(ve(this,P,"f"));if(!s)throw new Ce("Match not found");const n=s[2]?xe(s[2],c):void 0,i=xe(s[3],u),r=De(Me("Remark.Precipitation.Beg.End",this.locale),n?Me(`Descriptive.${n}`,this.locale):"",Me(`Phenomenon.${i}`,this.locale),s[4]||"",s[5],s[6]||"",s[7]);return t.push({type:le.PrecipitationBegEnd,description:r,raw:s[0],descriptive:n,phenomenon:i,startHour:s[4]?+s[4]:void 0,startMin:+s[5],endHour:s[6]?+s[6]:void 0,endMin:+s[7]}),[e.replace(ve(this,P,"f"),"").trim(),t]}}P=new WeakMap;class Ye extends $e{constructor(){super(...arguments),F.set(this,/^VIS ((\d)*( )?(\d?\/?\d))V((\d)*( )?(\d?\/?\d))/)}canParse(e){return ve(this,F,"f").test(e)}execute(e,t){const s=e.match(ve(this,F,"f"));if(!s)throw new Ce("Match not found");const n=s[1],i=s[5],r=De(Me("Remark.Variable.Prevailing.Visibility",this.locale),n,i);return t.push({type:le.PrevailingVisibility,description:r,raw:s[0],minVisibility:Ne(n),maxVisibility:Ne(i)}),[e.replace(ve(this,F,"f"),"").trim(),t]}}F=new WeakMap;class Je extends $e{constructor(){super(...arguments),W.set(this,/^SLP(\d{2})(\d)/)}canParse(e){return ve(this,W,"f").test(e)}execute(e,t){const s=e.match(ve(this,W,"f"));if(!s)throw new Ce("Match not found");let n=s[1].startsWith("9")?"9":"10";n+=s[1]+"."+s[2];const i=De(Me("Remark.Sea.Level.Pressure",this.locale),n);return t.push({type:le.SeaLevelPressure,description:i,raw:s[0],pressure:+n}),[e.replace(ve(this,W,"f"),"").trim(),t]}}W=new WeakMap;class Ke extends $e{constructor(){super(...arguments),R.set(this,/^VIS ((\d)*( )?(\d?\/?\d)) (\w+)/)}canParse(e){return ve(this,R,"f").test(e)}execute(e,t){const s=e.match(ve(this,R,"f"));if(!s)throw new Ce("Match not found");const n=s[1],i=s[5],r=De(Me("Remark.Second.Location.Visibility",this.locale),n,i);return t.push({type:le.SecondLocationVisibility,description:r,raw:s[0],distance:Ne(n),location:i}),[e.replace(ve(this,R,"f"),"").trim(),t]}}R=new WeakMap;class Qe extends $e{constructor(){super(...arguments),H.set(this,/^VIS ([A-Z]{1,2}) ((\d)*( )?(\d?\/?\d))/)}canParse(e){return ve(this,H,"f").test(e)}execute(e,t){const s=e.match(ve(this,H,"f"));if(!s)throw new Ce("Match not found");const n=xe(s[1],m),i=De(Me("Remark.Sector.Visibility",this.locale),Me(`Converter.${n}`,this.locale),s[2]);return t.push({type:le.SectorVisibility,description:i,raw:s[0],direction:n,distance:Ne(s[2])}),[e.replace(ve(this,H,"f"),"").trim(),t]}}H=new WeakMap;class Xe extends $e{constructor(){super(...arguments),V.set(this,/^GR LESS THAN ((\d )?(\d\/\d)?)/)}canParse(e){return ve(this,V,"f").test(e)}execute(e,t){const s=e.match(ve(this,V,"f"));if(!s)throw new Ce("Match not found");const n=De(Me("Remark.Hail.LesserThan",this.locale),s[1]);return t.push({type:le.SmallHailSize,description:n,raw:s[0],size:Ne(s[1])}),[e.replace(ve(this,V,"f"),"").trim(),t]}}V=new WeakMap;class et extends $e{constructor(){super(...arguments),q.set(this,/^4\/(\d{3})/)}canParse(e){return ve(this,q,"f").test(e)}execute(e,t){const s=e.match(ve(this,q,"f"));if(!s)throw new Ce("Match not found");const n=+s[1],i=De(Me("Remark.Snow.Depth",this.locale),n);return t.push({type:le.SnowDepth,description:i,raw:s[0],depth:n}),[e.replace(ve(this,q,"f"),"").trim(),t]}}q=new WeakMap;class tt extends $e{constructor(){super(...arguments),_.set(this,/^SNINCR (\d+)\/(\d+)/)}canParse(e){return ve(this,_,"f").test(e)}execute(e,t){const s=e.match(ve(this,_,"f"));if(!s)throw new Ce("Match not found");const n=+s[1],i=+s[2],r=De(Me("Remark.Snow.Increasing.Rapidly",this.locale),n,i);return t.push({type:le.SnowIncrease,description:r,raw:s[0],inchesLastHour:n,totalDepth:i}),[e.replace(ve(this,_,"f"),"").trim(),t]}}_=new WeakMap;class st extends $e{constructor(){super(...arguments),U.set(this,/^GS (LGT|MOD|HVY)/)}canParse(e){return ve(this,U,"f").test(e)}execute(e,t){const s=e.match(ve(this,U,"f"));if(!s)throw new Ce("Match not found");const n=De(Me("Remark.Snow.Pellets",this.locale),Me(`Remark.${s[1]}`,this.locale));return t.push({type:le.SnowPellets,description:n,raw:s[0],amount:s[1]}),[e.replace(ve(this,U,"f"),"").trim(),t]}}U=new WeakMap;class nt extends $e{constructor(){super(...arguments),z.set(this,/^98(\d{3})/)}canParse(e){return ve(this,z,"f").test(e)}execute(e,t){const s=e.match(ve(this,z,"f"));if(!s)throw new Ce("Match not found");const n=+s[1],i=De(Me("Remark.Sunshine.Duration",this.locale),n);return t.push({type:le.SunshineDuration,description:i,raw:s[0],duration:n}),[e.replace(ve(this,z,"f"),"").trim(),t]}}z=new WeakMap;class it extends $e{constructor(){super(...arguments),Z.set(this,/^SFC VIS ((\d)*( )?(\d?\/?\d))/)}canParse(e){return ve(this,Z,"f").test(e)}execute(e,t){const s=e.match(ve(this,Z,"f"));if(!s)throw new Ce("Match not found");const n=s[1],i=De(Me("Remark.Surface.Visibility",this.locale),n);return t.push({type:le.SurfaceVisibility,description:i,raw:s[0],distance:Ne(n)}),[e.replace(ve(this,Z,"f"),"").trim(),t]}}Z=new WeakMap;class rt extends $e{constructor(){super(...arguments),B.set(this,/^TS ([A-Z]{2})/)}canParse(e){return ve(this,B,"f").test(e)}execute(e,t){const s=e.match(ve(this,B,"f"));if(!s)throw new Ce("Match not found");const n=xe(s[1],m),i=De(Me("Remark.Thunderstorm.Location.0",this.locale),Me(`Converter.${n}`,this.locale));return t.push({type:le.ThunderStormLocation,description:i,raw:s[0],location:n}),[e.replace(ve(this,B,"f"),"").trim(),t]}}B=new WeakMap;class at extends $e{constructor(){super(...arguments),j.set(this,/^TS ([A-Z]{2}) MOV ([A-Z]{2})/)}canParse(e){return ve(this,j,"f").test(e)}execute(e,t){const s=e.match(ve(this,j,"f"));if(!s)throw new Ce("Match not found");const n=xe(s[1],m),i=xe(s[2],m),r=De(Me("Remark.Thunderstorm.Location.Moving",this.locale),Me(`Converter.${n}`,this.locale),Me(`Converter.${i}`,this.locale));return t.push({type:le.ThunderStormLocationMoving,description:r,raw:s[0],location:n,moving:i}),[e.replace(ve(this,j,"f"),"").trim(),t]}}j=new WeakMap;class ot extends $e{constructor(){super(...arguments),G.set(this,/^(TORNADO|FUNNEL CLOUD|WATERSPOUT) (B(\d{2})?(\d{2}))( (\d+)? ([A-Z]{1,2})?)?/)}canParse(e){return ve(this,G,"f").test(e)}execute(e,t){const s=e.match(ve(this,G,"f"));if(!s)throw new Ce("Match not found");const n=xe(s[7],m),i=De(Me("Remark.Tornadic.Activity.Beginning",this.locale),Me(`Remark.${s[1].replace(" ","")}`,this.locale),s[3]||"",s[4],s[6],Me(`Converter.${n}`,this.locale));return t.push({type:le.TornadicActivityBeg,description:i,raw:s[0],tornadicType:s[1],startHour:s[3]?+s[3]:void 0,startMinute:+s[4],distance:+s[6],direction:n}),[e.replace(ve(this,G,"f"),"").trim(),t]}}G=new WeakMap;class lt extends $e{constructor(){super(...arguments),Y.set(this,/^(TORNADO|FUNNEL CLOUD|WATERSPOUT) (B(\d{2})?(\d{2}))(E(\d{2})?(\d{2}))( (\d+)? ([A-Z]{1,2})?)?/)}canParse(e){return ve(this,Y,"f").test(e)}execute(e,t){const s=e.match(ve(this,Y,"f"));if(!s)throw new Ce("Match not found");const n=xe(s[10],m),i=De(Me("Remark.Tornadic.Activity.BegEnd",this.locale),Me(`Remark.${s[1].replace(" ","")}`,this.locale),s[3]||"",s[4],s[6]||"",s[7],s[9],Me(`Converter.${n}`,this.locale));return t.push({type:le.TornadicActivityBegEnd,description:i,raw:s[0],tornadicType:s[1],startHour:s[3]?+s[3]:void 0,startMinute:+s[4],endHour:s[6]?+s[6]:void 0,endMinute:+s[7],distance:+s[9],direction:n}),[e.replace(ve(this,Y,"f"),"").trim(),t]}}Y=new WeakMap;class ct extends $e{constructor(){super(...arguments),J.set(this,/^(TORNADO|FUNNEL CLOUD|WATERSPOUT) (E(\d{2})?(\d{2}))( (\d+)? ([A-Z]{1,2})?)?/)}canParse(e){return ve(this,J,"f").test(e)}execute(e,t){const s=e.match(ve(this,J,"f"));if(!s)throw new Ce("Match not found");const n=xe(s[7],m),i=De(Me("Remark.Tornadic.Activity.Ending",this.locale),Me(`Remark.${s[1].replace(" ","")}`,this.locale),s[3]||"",s[4],s[6],Me(`Converter.${n}`,this.locale));return t.push({type:le.TornadicActivityEnd,description:i,raw:s[0],tornadicType:s[1],endHour:s[3]?+s[3]:void 0,endMinute:+s[4],distance:+s[6],direction:n}),[e.replace(ve(this,J,"f"),"").trim(),t]}}J=new WeakMap;class ut extends $e{constructor(){super(...arguments),K.set(this,/^TWR VIS ((\d)*( )?(\d?\/?\d))/)}canParse(e){return ve(this,K,"f").test(e)}execute(e,t){const s=e.match(ve(this,K,"f"));if(!s)throw new Ce("Match not found");const n=s[1],i=De(Me("Remark.Tower.Visibility",this.locale),n);return t.push({type:le.TowerVisibility,description:i,raw:s[0],distance:Ne(n)}),[e.replace(ve(this,K,"f"),"").trim(),t]}}K=new WeakMap;class dt extends $e{constructor(){super(...arguments),Q.set(this,/^([A-Z]{3}) V ([A-Z]{3})/)}canParse(e){return ve(this,Q,"f").test(e)}execute(e,t){const s=e.match(ve(this,Q,"f"));if(!s)throw new Ce("Match not found");const n=xe(s[1],a),i=xe(s[2],a),r=De(Me("Remark.Variable.Sky.Condition.0",this.locale),Me(`CloudQuantity.${n}`,this.locale),Me(`CloudQuantity.${i}`,this.locale));return t.push({type:le.VariableSky,description:r,raw:s[0],cloudQuantityRange:[n,i]}),[e.replace(ve(this,Q,"f"),"").trim(),t]}}Q=new WeakMap;class ht extends $e{constructor(){super(...arguments),X.set(this,/^([A-Z]{3})(\d{3}) V ([A-Z]{3})/)}canParse(e){return ve(this,X,"f").test(e)}execute(e,t){const s=e.match(ve(this,X,"f"));if(!s)throw new Ce("Match not found");const n=xe(s[1],a),i=xe(s[3],a),r=100*+s[2],o=De(Me("Remark.Variable.Sky.Condition.Height",this.locale),r,Me(`CloudQuantity.${n}`,this.locale),Me(`CloudQuantity.${i}`,this.locale));return t.push({type:le.VariableSkyHeight,description:o,raw:s[0],height:r,cloudQuantityRange:[n,i]}),[e.replace(ve(this,X,"f"),"").trim(),t]}}X=new WeakMap;class mt extends $e{constructor(){super(...arguments),ee.set(this,/^VIRGA ([A-Z]{2})/)}canParse(e){return ve(this,ee,"f").test(e)}execute(e,t){const s=e.match(ve(this,ee,"f"));if(!s)throw new Ce("Match not found");const n=xe(s[1],m),i=De(Me("Remark.Virga.Direction",this.locale),Me(`Converter.${n}`,this.locale));return t.push({type:le.VirgaDirection,description:i,raw:s[0],direction:n}),[e.replace(ve(this,ee,"f"),"").trim(),t]}}ee=new WeakMap;class ft extends $e{constructor(){super(...arguments),te.set(this,/^933(\d{3})\b/)}canParse(e){return ve(this,te,"f").test(e)}execute(e,t){const s=e.match(ve(this,te,"f"));if(!s)throw new Ce("Match not found");const n=+s[1]/10,i=De(Me("Remark.Water.Equivalent.Snow.Ground",this.locale),n);return t.push({type:le.WaterEquivalentSnow,description:i,raw:s[0],amount:n}),[e.replace(ve(this,te,"f"),"").trim(),t]}}te=new WeakMap;class pt extends $e{constructor(){super(...arguments),se.set(this,/^PK WND (\d{3})(\d{2,3})\/(\d{2})?(\d{2})/)}canParse(e){return ve(this,se,"f").test(e)}execute(e,t){const s=e.match(ve(this,se,"f"));if(!s)throw new Ce("Match not found");const n=+s[1],i=+s[2],r=De(Me("Remark.PeakWind",this.locale),n,i,s[3]||"",s[4]);return t.push({type:le.WindPeak,description:r,raw:s[0],speed:i,degrees:n,startHour:s[3]?+s[3]:void 0,startMinute:+s[4]}),[e.replace(ve(this,se,"f"),"").trim(),t]}}se=new WeakMap;class gt extends $e{constructor(){super(...arguments),ne.set(this,/^WSHFT (\d{2})?(\d{2})/)}canParse(e){return ve(this,ne,"f").test(e)}execute(e,t){const s=e.match(ve(this,ne,"f"));if(!s)throw new Ce("Match not found");const n=De(Me("Remark.WindShift.0",this.locale),s[1]||"",s[2]);return t.push({type:le.WindShift,description:n,raw:s[0],startHour:s[1]?+s[1]:void 0,startMinute:+s[2]}),[e.replace(ve(this,ne,"f"),"").trim(),t]}}ne=new WeakMap;class yt extends $e{constructor(){super(...arguments),ie.set(this,/^WSHFT (\d{2})?(\d{2}) FROPA/)}canParse(e){return ve(this,ie,"f").test(e)}execute(e,t){const s=e.match(ve(this,ie,"f"));if(!s)throw new Ce("Match not found");const n=De(Me("Remark.WindShift.FROPA",this.locale),s[1]||"",s[2]);return t.push({type:le.WindShiftFropa,description:n,raw:s[0],startHour:s[1]?+s[1]:void 0,startMinute:+s[2]}),[e.replace(ve(this,ie,"f"),"").trim(),t]}}ie=new WeakMap;class wt extends $e{canParse(){return!0}execute(e,t){const s=Te(e," ",1),n=Me(`Remark.${s[0]}`,this.locale);if(le[s[0]])t.push({type:s[0],description:n,raw:s[0]});else{const e=t[t.length-1];e?.type===le.Unknown?e.raw=`${e.raw} ${s[0]}`:t.push({type:le.Unknown,raw:s[0]})}return[1===s.length?"":s[1],t]}}class vt extends $e{constructor(){super(...arguments),re.set(this,/^(([A-Z]{2})?([A-Z]{2})B(\d{2})?(\d{2}))/)}canParse(e){return ve(this,re,"f").test(e)}execute(e,t){const s=e.match(ve(this,re,"f"));if(!s)throw new Ce("Match not found");const n=s[2]?xe(s[2],c):void 0,i=xe(s[3],u),r=De(Me("Remark.Precipitation.Beg.0",this.locale),n?Me(`Descriptive.${n}`,this.locale):"",Me(`Phenomenon.${i}`,this.locale),s[4]||"",s[5])?.trim();return t.push({type:le.PrecipitationBeg,description:r,raw:s[0],descriptive:n,phenomenon:i,startHour:s[4]?+s[4]:void 0,startMin:+s[5]}),[e.replace(ve(this,re,"f"),"").trim(),t]}}re=new WeakMap;class St extends $e{constructor(){super(...arguments),ae.set(this,/^(([A-Z]{2})?([A-Z]{2})E(\d{2})?(\d{2}))/)}canParse(e){return ve(this,ae,"f").test(e)}execute(e,t){const s=e.match(ve(this,ae,"f"));if(!s)throw new Ce("Match not found");const n=s[2]?xe(s[2],c):void 0,i=xe(s[3],u),r=De(Me("Remark.Precipitation.End",this.locale),n?Me(`Descriptive.${n}`,this.locale):"",Me(`Phenomenon.${i}`,this.locale),s[4]||"",s[5])?.trim();return t.push({type:le.PrecipitationEnd,description:r,raw:s[0],descriptive:n,phenomenon:i,endHour:s[4]?+s[4]:void 0,endMin:+s[5]}),[e.replace(ve(this,ae,"f"),"").trim(),t]}}ae=new WeakMap;class bt extends $e{constructor(){super(...arguments),oe.set(this,/^NXT FCST BY (\d{2})(\d{2})(\d{2})Z/)}canParse(e){return ve(this,oe,"f").test(e)}execute(e,t){const s=e.match(ve(this,oe,"f"));if(!s)throw new Ce("Match not found");const n=+s[1],i=s[2],r=s[3],a=De(Me("Remark.Next.Forecast.By",this.locale),n,i,r);return t.push({type:le.NextForecastBy,description:a,raw:s[0],day:n,hour:+i,minute:+r}),[e.replace(ve(this,oe,"f"),"").trim(),t]}}oe=new WeakMap;class kt{constructor(e){this.locale=e,this.defaultCommand=new wt(e),this.commandList=[new pt(e),new yt(e),new gt(e),new ut(e),new it(e),new Ye(e),new Ke(e),new Qe(e),new lt(e),new ot(e),new ct(e),new Ge(e),new vt(e),new St(e),new at(e),new rt(e),new Xe(e),new We(e),new st(e),new mt(e),new Le(e),new Ze(e),new ht(e),new dt(e),new Ee(e),new Je(e),new tt(e),new Re(e),new He(e),new Ve(e),new qe(e),new Ue(e),new _e(e),new ze(e),new je(e),new Be(e),new et(e),new nt(e),new ft(e),new bt(e)]}get(e){for(const t of this.commandList)if(t.canParse(e))return t;return this.defaultCommand}}function Ct(e,t,s,n){return{speed:+t,direction:Ie(e),degrees:"VRB"!==e?+e:void 0,gust:s?+s:void 0,unit:n}}!function(e){e.Unknown="Unknown",e.AO1="AO1",e.AO2="AO2",e.PRESFR="PRESFR",e.PRESRR="PRESRR",e.TORNADO="TORNADO",e.FUNNELCLOUD="FUNNELCLOUD",e.WATERSPOUT="WATERSPOUT",e.VIRGA="VIRGA",e.WindPeak="WindPeak",e.WindShiftFropa="WindShiftFropa",e.WindShift="WindShift",e.TowerVisibility="TowerVisibility",e.SurfaceVisibility="SurfaceVisibility",e.PrevailingVisibility="PrevailingVisibility",e.SecondLocationVisibility="SecondLocationVisibility",e.SectorVisibility="SectorVisibility",e.TornadicActivityBegEnd="TornadicActivityBegEnd",e.TornadicActivityBeg="TornadicActivityBeg",e.TornadicActivityEnd="TornadicActivityEnd",e.PrecipitationBeg="PrecipitationBeg",e.PrecipitationBegEnd="PrecipitationBegEnd",e.PrecipitationEnd="PrecipitationEnd",e.ThunderStormLocationMoving="ThunderStormLocationMoving",e.ThunderStormLocation="ThunderStormLocation",e.SmallHailSize="SmallHailSize",e.HailSize="HailSize",e.SnowPellets="SnowPellets",e.VirgaDirection="VirgaDirection",e.CeilingHeight="CeilingHeight",e.Obscuration="Obscuration",e.VariableSkyHeight="VariableSkyHeight",e.VariableSky="VariableSky",e.CeilingSecondLocation="CeilingSecondLocation",e.SeaLevelPressure="SeaLevelPressure",e.SnowIncrease="SnowIncrease",e.HourlyMaximumMinimumTemperature="HourlyMaximumMinimumTemperature",e.HourlyMaximumTemperature="HourlyMaximumTemperature",e.HourlyMinimumTemperature="HourlyMinimumTemperature",e.HourlyPrecipitationAmount="HourlyPrecipitationAmount",e.HourlyTemperatureDewPoint="HourlyTemperatureDewPoint",e.HourlyPressure="HourlyPressure",e.IceAccretion="IceAccretion",e.PrecipitationAmount36Hour="PrecipitationAmount36Hour",e.PrecipitationAmount24Hour="PrecipitationAmount24Hour",e.SnowDepth="SnowDepth",e.SunshineDuration="SunshineDuration",e.WaterEquivalentSnow="WaterEquivalentSnow",e.NextForecastBy="NextForecastBy"}(le||(le={}));class Tt{constructor(){ce.set(this,/^([A-Z]{3})(?:\/{3}|(\d{3}))?(?:\/{3}|(?:([A-Z]{2,3})(?:\/([A-Z]{2,3}))?))?$/)}parse(e){const t=e.match(ve(this,ce,"f"));if(!t)return;return{quantity:xe(t[1],a),height:100*+t[2]||void 0,type:t[3]?xe(t[3],o):void 0,secondaryType:t[4]?xe(t[4],o):void 0}}execute(e,t){const s=this.parse(t);return!!s&&(e.clouds.push(s),!0)}canParse(e){return"NSW"!==e&&ve(this,ce,"f").test(e)}}ce=new WeakMap;class xt{constructor(){ue.set(this,/^(\d{4})(|NDV)$/)}canParse(e){return ve(this,ue,"f").test(e)}execute(e,t){const s=t.match(ve(this,ue,"f"));if(!s)return!1;const n="9999"===(i=s[1])?{indicator:g.GreaterThan,value:+i,unit:f.Meters}:{value:+i,unit:f.Meters};var i;return e.visibility||(e.visibility=n),"NDV"===s[2]&&(e.visibility.ndv=!0),!0}}ue=new WeakMap;class Mt{constructor(){de.set(this,/^(VRB|000|[0-3]\d{2})(\d{2})G?(\d{2,3})?(KT|MPS|KM\/H)?/)}canParse(e){return ve(this,de,"f").test(e)}parseWind(e){const t=e.match(ve(this,de,"f"));if(!t)throw new Ce("Wind should be defined");return Ct(t[1],t[2],t[3],xe(t[4]||"KT",p))}execute(e,t){const s=this.parseWind(t);return e.wind=s,!0}}de=new WeakMap;class Dt{constructor(){he.set(this,/^(\d{3})V(\d{3})/)}canParse(e){return ve(this,he,"f").test(e)}parseWindVariation(e,t){const s=t.match(ve(this,he,"f"));if(!s)throw new Ce("Wind should be defined");e.minVariation=+s[1],e.maxVariation=+s[2]}execute(e,t){if(!e.wind)throw new Ce;return this.parseWindVariation(e.wind,t),!0}}he=new WeakMap;class $t{constructor(){me.set(this,/^WS(\d{3})\/(\w{3})(\d{2})G?(\d{2,3})?(KT|MPS|KM\/H)/)}canParse(e){return ve(this,me,"f").test(e)}parseWindShear(e){const t=e.match(ve(this,me,"f"));if(!t)throw new Ce("Wind shear should be defined");return{...Ct(t[2],t[3],t[4],xe(t[5],p)),height:100*+t[1]}}execute(e,t){return e.windShear=this.parseWindShear(t),!0}}me=new WeakMap;class Lt{constructor(){fe.set(this,/^VV(\d{3})$/)}execute(e,t){const s=t.match(ve(this,fe,"f"));if(!s)throw new Ce("Vertical visibility should be defined");return e.verticalVisibility=100*+s[1],!0}canParse(e){return ve(this,fe,"f").test(e)}}fe=new WeakMap;class Et{constructor(){pe.set(this,/^(\d{4}[NnEeSsWw]{1,2})$/)}execute(e,t){const s=t.match(ve(this,pe,"f"));if(!s)throw new Ce("Vertical visibility should be defined");if(!e.visibility)throw new Ce("container.visibility not instantiated");return e.visibility.min={value:+s[1].slice(0,4),direction:s[1].slice(4)},!0}canParse(e){return ve(this,pe,"f").test(e)}}pe=new WeakMap;class It{constructor(){ge.set(this,/^(P|M)?(\d)*(\s)?((\d\/\d)?SM)$/)}execute(e,t){const s=function(e){let t,s=0;return e.startsWith("P")?(t=g.GreaterThan,s=1):e.startsWith("M")&&(t=g.LessThan,s=1),{indicator:t,value:Ne(e.slice(s,-2)),unit:f.StatuteMiles}}(t);return e.visibility=s,!0}canParse(e){return ve(this,ge,"f").test(e)}}ge=new WeakMap;var Nt,At,Ot,Pt,Ft,Wt,Rt,Ht;ye=new WeakMap;class Vt{constructor(){Nt.set(this,/^Q(\d{4})$/)}canParse(e){return ve(this,Nt,"f").test(e)}execute(e,t){const s=t.match(ve(this,Nt,"f"));if(!s)throw new Ce("Match not found");e.altimeter={value:+s[1],unit:C.HPa}}}Nt=new WeakMap;class qt{constructor(){At.set(this,/^A(\d{4})$/)}canParse(e){return ve(this,At,"f").test(e)}execute(e,t){const s=t.match(ve(this,At,"f"));if(!s)throw new Ce("Match not found");const n=+s[1]/100;e.altimeter={value:n,unit:C.InHg}}}At=new WeakMap;class _t{constructor(){Ot.set(this,/^(R\d{2}\w?\/)/),Pt.set(this,/^R(\d{2}\w?)\/(\d{4})V([MP])?(\d{3,4})(?:([UDN])|(FT)(?:\/([UDN]))?)$/),Ft.set(this,/^R(\d{2}\w?)\/([MP])?(\d{4})(?:([UDN])|(FT)(?:\/([UDN]))?)$/),Wt.set(this,/^R(\d{2}\w?)\/([/\d])([/\d])(\/\/|\d{2})(\/\/|\d{2})$/)}canParse(e){return ve(this,Ot,"f").test(e)}execute(e,t){if(ve(this,Wt,"f").test(t)){const s=t.match(ve(this,Wt,"f"));if(!s)throw new Ce("Should be able to parse");const n=xe(s[2],b),i=xe(s[3],k);e.runwaysInfo.push({name:s[1],depositType:n,coverage:i,thickness:s[4],brakingCapacity:s[5]})}else if(ve(this,Ft,"f").test(t)){const s=t.match(ve(this,Ft,"f"));if(!s)throw new Ce("Should be able to parse");const n=s[2]?xe(s[2],g):void 0,i=s[6]?xe(s[6],y):s[4]?xe(s[4],y):void 0,r=s[5]?xe(s[5],w):w.Meters;e.runwaysInfo.push({name:s[1],indicator:n,minRange:+s[3],trend:i,unit:r})}else if(ve(this,Pt,"f").test(t)){const s=t.match(ve(this,Pt,"f"));if(!s)throw new Ce("Should be able to parse");const n=s[3]?xe(s[3],g):void 0,i=s[7]?xe(s[7],y):s[5]?xe(s[5],y):void 0,r=s[6]?xe(s[6],w):w.Meters;e.runwaysInfo.push({name:s[1],indicator:n,minRange:+s[2],maxRange:+s[4],trend:i,unit:r})}}}Ot=new WeakMap,Pt=new WeakMap,Ft=new WeakMap,Wt=new WeakMap;class Ut{constructor(){Rt.set(this,/^(M?\d{2})\/(M?\d{2})$/)}canParse(e){return ve(this,Rt,"f").test(e)}execute(e,t){const s=t.match(ve(this,Rt,"f"));if(!s)throw new Ce("Match not found");e.temperature=Oe(s[1]),e.dewPoint=Oe(s[2])}}Rt=new WeakMap;let zt=class{constructor(){Ht.set(this,[new _t,new Ut,new Vt,new qt])}get(e){for(const t of ve(this,Ht,"f"))if(t.canParse(e))return t}};var Zt,Bt,jt,Gt,Yt,Jt,Kt,Qt;Ht=new WeakMap;new WeakMap;new WeakMap;function Xt(e){const t=+e.slice(0,2),s=+e.slice(2,4),n=+e.slice(4,6);if(!(isNaN(t)||isNaN(s)||isNaN(n)))return{day:t,hour:s,minute:n}}function es(e,t){const s=ts(t);return s&&Object.assign(e,s),!!s}function ts(e){if(e in Qt)return{[Qt[e]]:!0}}function ss(e,t,s,n){const i=new rs(n).parse(t.slice(s+1).join(" "));e.remarks=i,e.remark=i.map(({description:e,raw:t})=>e||t).join(" ")}new WeakMap,function(e){e.AMD="amendment",e.AUTO="auto",e.CNL="canceled",e.COR="corrected",e.NIL="nil"}(Qt||(Qt={}));class ns{constructor(e){this.locale=e,this.FM="FM",this.TEMPO="TEMPO",this.INTER="INTER",this.BECMG="BECMG",this.RMK="RMK"}parseWeatherCondition(e){let t,s;if(e.match(ve(Zt,Zt,"f",jt))){const s=e.match(ve(Zt,Zt,"f",jt))?.[0];s&&(t=s,e=e.slice(s.length))}const n=Object.values(c);for(let t=0;t<n.length;t++){const i=n[t];if(e.startsWith(i)){s=i,e=e.slice(i.length);break}}const i={intensity:t,descriptive:s,phenomenons:[]},r=Object.values(u);for(let t=0;t<r.length;t++){const n=r[t];if(s===n)continue;const a=new RegExp(`^/?${n}`),o=e.match(a)?.[0];o&&(i.phenomenons.push(n),e=e.slice(o.length),t=-1)}if(!e.replace(/\//g,"").length)return i}tokenize(e){return e.split(ve(Zt,Zt,"f",Bt)).filter(e=>e)}generalParse(e,t){if(t===ve(Zt,Zt,"f",Gt))return e.cavok=!0,e.visibility={indicator:g.GreaterThan,value:9999,unit:f.Meters},!0;const s=this.parseWeatherCondition(t);if(s&&(0!==(n=s).phenomenons.length||n.descriptive==c.THUNDERSTORM||n.intensity===l.IN_VICINITY&&n.descriptive==c.SHOWERS))return e.weatherConditions.push(s),!0;var n;const i=ve(Zt,Zt,"f",Yt).get(t);if(i)try{return i.execute(e,t)}catch(e){if(e instanceof ke)return!1;throw e}return!1}}Zt=ns,Bt={value:/\s((?=\d\/\dSM)(?<!\s(P|M)?\d\s)|(?!\d\/\dSM))|=/},jt={value:/^(-|\+|VC)/},Gt={value:"CAVOK"},Yt={value:new class{constructor(){ye.set(this,[new $t,new Mt,new Dt,new xt,new It,new Et,new Lt,new Tt])}get(e){for(const t of ve(this,ye,"f"))if(t.canParse(e))return t}}};class is extends ns{constructor(){super(...arguments),this.AT="AT",this.TL="TL",Jt.set(this,new zt)}parseTrend(e,t,s){let n=e+1;for(;n<s.length&&s[n]!==this.TEMPO&&s[n]!==this.INTER&&s[n]!==this.BECMG;){if(s[n].startsWith(this.FM)||s[n].startsWith(this.TL)||s[n].startsWith(this.AT)){const e={type:d[s[n].slice(0,2)],hour:+s[n].slice(2,4),minute:+s[n].slice(4,6)};t.times.push(e)}else this.generalParse(t,s[n]);n+=1}return n-1}parse(e){const t=this.tokenize(e);let s=0;const n=this.parseType(t[s]);if(n&&s++,4===t[s+1].length){var i=ts(t[s]);i&&(s+=1)}const r={type:n,station:t[s],...Xt(t[s+1]),...i,message:e,remarks:[],clouds:[],weatherConditions:[],trends:[],runwaysInfo:[]};for(s+=2;s<t.length;){if(!super.generalParse(r,t[s])&&!es(r,t[s]))if("NOSIG"===t[s])r.nosig=!0;else if(t[s]===this.TEMPO||t[s]===this.INTER||t[s]===this.BECMG){const e=s,n={type:h[t[s]],weatherConditions:[],clouds:[],times:[],remarks:[],raw:""};s=this.parseTrend(s,n,t),n.raw=t.slice(e,s+1).join(" "),r.trends.push(n)}else{if(t[s]===this.RMK){ss(r,t,s,this.locale);break}{const e=ve(this,Jt,"f").get(t[s]);e&&e.execute(r,t[s])}}s+=1}return r}parseType(e){for(const t in r)if(e===r[t])return t}}Jt=new WeakMap;new WeakMap,new WeakMap,new WeakMap;class rs{constructor(e){this.locale=e,Kt.set(this,void 0),function(e,t,s,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?i.call(e,s):i?i.value=s:t.set(e,s)}(this,Kt,new kt(this.locale),"f")}parse(e){let t=e,s=[];for(;t;)try{[t,s]=ve(this,Kt,"f").get(t).execute(t,s)}catch(e){if(!(e instanceof ke))throw e;[t,s]=ve(this,Kt,"f").defaultCommand.execute(t,s)}return s}}function as(e,t,s,n=0){if(null==t||null==s)return e;return[os(ls(e,-1),t,s,n),os(new Date(e),t,s,n),os(ls(e,1),t,s,n)].map(t=>({date:t,difference:Math.abs(t.getTime()-e.getTime())})).sort((e,t)=>e.difference-t.difference)[0].date}function os(e,t,s,n){return e.setUTCDate(t),e.setUTCHours(s),null!=n&&e.setUTCMinutes(n),e}function ls(e,t){if(e&&t){let s,n=(e=new Date(+e)).getUTCDate();e.setUTCMonth(e.getUTCMonth()+t,1),s=e.getUTCMonth(),e.setUTCDate(n),e.getUTCMonth()!==s&&e.setUTCDate(0)}return e}function cs(e,t){return{...e,issued:as(t,e.day,e.hour,e.minute)}}Kt=new WeakMap;function us(e,t,s,n){const i=t?.locale||we;try{const r=new s(i).parse(e);return t&&"issued"in t&&t.issued?n(r,t.issued):r}catch(e){if(e instanceof Se)throw e;throw new be(e)}}const ds=(()=>{try{return"hibyeheyhello"==="hibyehihi".replace(new RegExp("(?<=hi)hi","g"),"hello").replace(new RegExp("hi(?!bye)","g"),"hey")}catch{return!1}})(),hs=(e,t)=>{const s=17.625,n=243.04,i=Math.log(Math.exp(s*t/(n+t))/Math.exp(s*e/(n+e))),r=100*Math.exp(i);return Math.round(Math.max(0,Math.min(100,r)))},ms=e=>{if(!e?.rawMessage||!ds)return e;const t={...e};try{const s=us(e.rawMessage,{locale:we},is,cs);if(null===e.windSpeed?.value&&void 0!==s.wind?.speed&&(t.windSpeed={...e.windSpeed,value:1.852*s.wind.speed,qualityControl:"M"}),null===e.windDirection?.value&&void 0!==s.wind?.degrees&&(t.windDirection={...e.windDirection,value:s.wind.degrees,qualityControl:"M"}),null===e.windGust?.value&&void 0!==s.wind?.gust&&(t.windGust={...e.windGust,value:1.852*s.wind.gust,qualityControl:"M"}),null===e.temperature?.value&&void 0!==s.temperature&&(t.temperature={...e.temperature,value:s.temperature,qualityControl:"M"}),null===e.dewpoint?.value&&void 0!==s.dewPoint&&(t.dewpoint={...e.dewpoint,value:s.dewPoint,qualityControl:"M"}),null===e.barometricPressure?.value&&void 0!==s.altimeter){const n=Math.round(3386.39*s.altimeter);t.barometricPressure={...e.barometricPressure,value:n,qualityControl:"M"}}if(null===e.relativeHumidity?.value&&null!==t.temperature?.value&&null!==t.dewpoint?.value){const s=hs(t.temperature.value,t.dewpoint.value);t.relativeHumidity={...e.relativeHumidity,value:s,qualityControl:"M"}}if(null===e.visibility?.value&&void 0!==s.visibility?.value){let n;n="SM"===s.visibility.unit?1.609344*s.visibility.value:"m"===s.visibility.unit?s.visibility.value/1e3:s.visibility.value,t.visibility={...e.visibility,value:Math.round(10*n)/10,qualityControl:"M"}}if(null===e.cloudLayers?.[0]?.base?.value&&s.clouds?.length>0){const n=s.clouds.filter(e=>"BKN"===e.type||"OVC"===e.type).sort((e,t)=>e.height-t.height)[0];if(n){const s=Math.round(.3048*n.height);t.cloudLayers&&t.cloudLayers[0]?t.cloudLayers[0].base={...e.cloudLayers[0].base,value:s,qualityControl:"M"}:t.cloudLayers=[{base:{value:s,qualityControl:"M"}}]}}}catch(t){return console.warn(`Failed to parse METAR: ${t.message}`),e}return t}},187:(e,t,s)=>{var n=s(592),i=s(519),r=s(675),a=s(413),o=s(900),l=s(47),c=s(125),u=s(24),d=s(211),h=s(134),m=s(693),f=s(238);const p=(e,t,s)=>{const n=(0,a.X1)("us");return{daytime:e.isDaytime,temperature:n(e.temperature||0),name:k(t.city),icon:e.icon,x:s.x,y:s.y,time:e.startTime}},g=(e,t,s,n)=>{let i=0,r=0;return i=56*(73-e),i-=n,i>1142-2*n?i=1142-2*n:i<0&&(i=0),r=25*(-175-t)*-1,r-=s,r>1200-2*s?r=1200-2*s:r<0&&(r=0),{x:r,y:i}},y=(e,t,s,n)=>{let i=0,r=0;return i=55.2*(25-e),i-=n,i>571-2*n?i=571-2*n:i<0&&(i=0),r=41.775*(-164.5-t)*-1,r-=s,r>600-2*s?r=600-2*s:r<0&&(r=0),{x:r,y:i}},w=(e,t,s,n)=>({minLat:-1*((t+2*n)/56-73),maxLat:-1*(t/56-73),minLon:-1*(-1*e/25+175),maxLon:-1*(-1*(e+2*s)/25+175)}),v=(e,t,s,n)=>({minLat:-1*((t+2*n)/55.2-25),maxLat:-1*(t/55.2-25),minLon:-1*(-1*e/41.775+164.5),maxLon:-1*(-1*(e+2*s)/41.775+164.5)}),S=(e,t,s)=>{let n=37*(e.lon-s),i=70*(t-e.lat);return i<30&&(i=30),i>282&&(i=282),n<40&&(n=40),n>580&&(n=580),{x:n,y:i}},b=(e,t,s)=>{let n=57*(e.lon-s),i=70*(t-e.lat);return i<30&&(i=30),i>282&&(i=282),n<40&&(n=40),n>580&&(n=580),{x:n,y:i}},k=e=>e.match(/[^,/;\\-]*/)[0].substr(0,12);var C=s(348),T=s(335);const x={x:240,y:117};class M extends u.A{constructor(e,t){super(e,t,"Regional Forecast",!0),this.timing.totalScreens=3}async getData(e,t){if(!super.getData(e,t))return;let s="images/maps/basemap.webp";"HI"===e.state?s="images/maps/radar-hawaii.png":"AK"===e.state&&(s="images/maps/radar-alaska.png"),this.elem.querySelector(".map img").src=s;const c=((e,t,s,n,i)=>{if("AK"===i)return g(e,t,s,n);if("HI"===i)return y(e,t,s,n);let r=0,a=0;return r=55.2*(50.5-e),r-=n,r>1600-2*n?r=1600-2*n:r<0&&(r=0),a=41.775*(-127.5-t)*-1,a-=s,a>2550-2*s?a=2550-2*s:a<0&&(a=0),{x:a,y:r}})(this.weatherParameters.latitude,this.weatherParameters.longitude,x.x,x.y,e.state),u=(d=c.x,C=c.y,M=x.x,$=x.y,"AK"===(L=this.weatherParameters.state)?w(d,C,M,$):"HI"===L?v(d,C,M,$):{minLat:-1*((C+2*$)/55.2-50.5),maxLat:-1*(C/55.2-50.5),minLon:-1*(-1*d/41.775+127.5),maxLon:-1*(-1*(d+2*M)/41.775+127.5)});var d,C,M,$,L;let E=2.5;"HI"===this.weatherParameters.state&&(E=1);const I=Object.values(StationInfo).map(e=>({...e,targetDistance:E})),N=[...RegionalCities,...I],A=[];N.forEach(e=>{if(e.lat>u.minLat&&e.lat<u.maxLat&&e.lon>u.minLon&&e.lon<u.maxLon-1){const t=e.targetDistance||1;A.reduce((s,n)=>{const r=(0,i.Io)(e.lon,e.lat,n.lon,n.lat);return s&&r>=t},!0)&&A.push(e)}});const O=(0,a.X1)(),P=await(0,r.eo)(A.map(async e=>{try{const t=e?.point??await D(e.lat,e.lon);if(!t)return(0,m.Ik)("verbose-failures")&&console.warn(`Unable to get Points for '${e.Name??e.city}'`),!1;const s=(async(e,t)=>{try{const s=await(0,r.oi)(`https://api.weather.gov/gridpoints/${e.wfo}/${e.x},${e.y}/stations?limit=1`);if(!s||!s.features||0===s.features.length)return(0,m.Ik)("verbose-failures")&&console.warn(`Unable to get regional stations for ${t.city}`),!1;const n=s.features[0].id,i=s.features[0].properties.stationIdentifier,a=await(0,r.oi)(`${n}/observations/latest`);if(!a)return(0,m.Ik)("verbose-failures")&&console.warn(`Unable to get regional observations for station ${i}`),!1;let c=(0,h.A)(a.properties);const u=[{name:"temperature",check:e=>null===e.temperature?.value},{name:"textDescription",check:e=>null===e.textDescription||""===e.textDescription},{name:"icon",check:e=>null===e.icon}],d=await(0,f.Bv)(c,{requiredFields:u,stationId:i,debugContext:"regionalforecast"});c=d.data;const{missingFields:p}=d;if(p.length>0)return(0,m.Ik)("regionalforecast")&&console.log(`Regional Observations for station ${i} is missing fields: ${p.join(", ")} (skipping)`),!1;if(!c.icon)return!1;const g=(0,o.lL)(c.icon,!c.daytime);return!!g&&((0,l.b)(g),c)}catch(e){return console.error(`Unexpected error getting Regional Observation for ${t.city}: ${e.message}`),!1}})(t,e),n=await(0,r.oi)(`https://api.weather.gov/gridpoints/${t.wfo}/${t.x},${t.y}/forecast`);if(!n)return(0,m.Ik)("verbose-failures")&&console.warn(`Regional Forecast request for ${e.Name??e.city} failed`),!1;const i=((e,t,s,n)=>{"AK"===n&&S(e,t,s),"HI"===n&&b(e,t,s);let i=57*(e.lon-s),r=70*(t-e.lat);return r<30&&(r=30),r>282&&(r=282),i<40&&(i=40),i>580&&(i=580),{x:i,y:r}})(e,u.maxLat,u.minLon,this.weatherParameters.state),a=await s;if(!a)return!1;const c={daytime:!!/\/day\//.test(a.icon),temperature:O(a.temperature.value),name:k(e.city),icon:a.icon,x:i.x,y:i.y};(0,l.b)((0,o.lL)(c.icon,!c.daytime));const d=(0,T.A)(n.properties.periods);return d.length<3?(console.warn(`Insufficient active periods for ${e.Name??e.city}: only ${d.length} periods available`),!1):[c,p(d[1],e,i),p(d[2],e,i)]}catch(t){return console.error(`Unexpected error getting Regional Forecast data for '${e.name??e.city}': ${t.message}`),!1}})),F=P.filter(e=>e);0!==F.length?(this.data={regionalData:F,mapOffsetXY:x,sourceXY:c},this.setStatus(n.Ay.loaded)):this.setStatus(n.Ay.noData)}drawCanvas(){super.drawCanvas();const{regionalData:e,sourceXY:t}=this.data,s=this.elem.querySelector(".title.dual .top"),n=this.elem.querySelector(".title.dual .bottom");if(0===this.screenIndex)s.innerHTML="Regional",n.innerHTML="Observations";else{const t=c.c9.fromISO(e[0][this.screenIndex].time).toLocaleString({weekday:"long"});s.innerHTML="Forecast for",n.innerHTML=e[0][this.screenIndex].daytime?t:`${t} Night`}const i=640/(2*x.x);this.elem.querySelector(".map").style.transform=`scale(${i}) translate(-${t.x}px, -${t.y}px)`;const r=e.map(e=>{const t={},s=e[this.screenIndex];t.icon={type:"img",src:(0,o.lL)(s.icon,!s.daytime)},t.city=s.name;const{temperature:n}=s;t.temp=n;const{x:i,y:r}=s,a=this.fillTemplate("location",t);return a.style.left=`${i}px`,a.style.top=`${r}px`,a}),a=this.elem.querySelector(".location-container");a.innerHTML="",a.append(...r),this.finishDraw()}}const D=async(e,t)=>{try{const s=await(0,C.f)(e,t);return s?{x:s.properties.gridX,y:s.properties.gridY,wfo:s.properties.gridId}:null}catch(s){throw new Error(`Unexpected error getting point for ${e},${t}: ${s.message}`)}};(0,d.Kb)(new M(6,"regional-forecast"))},211:(e,t,s)=>{s.d(t,{F4:()=>v,Ju:()=>b,Kb:()=>R,Lg:()=>V,XR:()=>P,ab:()=>S,eB:()=>U,iU:()=>p,kY:()=>F,pv:()=>$,q:()=>x,u6:()=>_,un:()=>L,yB:()=>g});var n=s(430),i=s(592),r=s(519),a=s(675),o=s(348),l=s(693),c=s(593);document.addEventListener("DOMContentLoaded",()=>{f()});const u=[];let d,h=!1;const m={},f=async()=>{let e;["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].forEach(e=>{document.addEventListener(e,()=>{(0,l.Ik)("fullscreen")&&console.log(`🖥️ ${e} event fired. fullscreenElement=${!!document.fullscreenElement}`),P(!0)})}),window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(()=>P(),100)}),window.addEventListener("orientationchange",()=>{(0,l.Ik)("resize")&&console.log("📱 Orientation change detected, forcing resize after short delay"),clearTimeout(e),e=setTimeout(()=>P(!0),200)}),P(),H()},p=e=>!!e.type&&("navButton"===e.type?D(e.message):console.error(`Unknown event ${e.type}`)),g=e=>{if(e.id<0)return;if(!d&&!c.A?.kiosk?.value)return;if(d&&d.drawCanvas(u,y()),!u[0]||u[0].status===i.Ay.loading)return;const t=u.findIndex(e=>e?.enabled&&e?.timing?.totalScreens>0);0!==e.id||e.status!==i.Ay.failed&&e.status!==i.Ay.retrying||(e.id=t,e.status=u[t].status),0===e.id&&e.status===i.Ay.loaded&&u[0]&&u[0].timing&&0===u[0].timing.totalScreens&&(e.id=t,e.status=u[t].status),v()&&e.id===t&&e.status===i.Ay.loaded&&k(S.command.firstFrame)},y=()=>u.reduce((e,t)=>t.status!==i.Ay.loading?e+1:e,0),w=()=>{u.forEach(e=>e.hideCanvas())},v=()=>h,S={response:{previous:Symbol("previous"),inProgress:Symbol("inProgress"),next:Symbol("next")},command:{firstFrame:Symbol("firstFrame"),previousFrame:Symbol("previousFrame"),nextFrame:Symbol("nextFrame"),lastFrame:Symbol("lastFrame")}},b=e=>{e.type===S.response.previous&&C(-1),e.type===S.response.next&&C(1)},k=e=>{const t=x();if(d&&d.hideCanvas(),!t){let e,t=0;do{if(t<u.length&&u[t]){const s=u[t];s.status===i.Ay.loaded&&s.timing?.totalScreens>0&&(e=s)}t+=1}while(!e&&t<u.length);if(!e)return;return c.A?.kiosk?.value&&(document.querySelector("#loading").style.display="none"),e.navNext(S.command.firstFrame),void e.showCanvas()}e===S.command.nextFrame&&x().navNext(),e===S.command.previousFrame&&x().navPrev()},C=e=>{const t=u.length,s=T();let n,a=!1;for(let o=0;o<t;o+=1)if(n=(0,r.LV)(s+(o+1)*e,t),u[n].status===i.Ay.loaded&&u[n].timing.totalScreens>0&&n!==s){a=!0;break}if(!a&&u[s]&&u[s].status===i.Ay.loaded&&u[s].timing.totalScreens>0&&(n=s,a=!0),!a)return void console.warn("No suitable display found for navigation");const o=u[n];w(),e<0&&o.showCanvas(S.command.lastFrame),e>0&&o.showCanvas(S.command.firstFrame)},T=()=>u.findIndex(e=>e.active),x=()=>u[T()],M=e=>{h=e;const t=document.querySelector("#NavigatePlay");localStorage.setItem("play",h),h?((0,n.A)(!0).catch(()=>{}),t.title="Pause",t.src="images/nav/ic_pause_white_24dp_2x.png"):((0,n.A)(!1).catch(()=>{}),t.title="Play",t.src="images/nav/ic_play_arrow_white_24dp_2x.png"),h&&!x()&&(d||c.A?.kiosk?.value)&&k(S.command.firstFrame)},D=e=>{switch(e){case"play":M(!0);break;case"playToggle":M(!h);break;case"stop":M(!1);break;case"next":M(!1),k(S.command.nextFrame);break;case"previous":M(!1),k(S.command.previousFrame);break;case"menu":M(!1),postMessage({type:"current-weather-scroll",method:"hide"}),d?d.showCanvas():c.A?.kiosk?.value&&(document.querySelector("#loading").style.display="flex"),w();break;default:console.error(`Unknown navButton ${e}`)}},$=e=>u[e],L=()=>{const{userAgent:e}=navigator;return/CPU.*OS ([0-9_]{1,})[0-9_]{0,}|(CPU like).*AppleWebKit.*Mobile/i.test(e)&&!window.MSStream};let E=null,I=null;const N=(e,t)=>{t.forEach(t=>e.style.removeProperty(t))},A=["width","height","transform","transform-origin"],O=["transform","transform-origin","width","height","position","left","top","margin-left","margin-top"],P=(e=!1)=>{if(window.visualViewport&&Math.abs(window.visualViewport.scale-1)>.01)return;const t=!!document.fullscreenElement,s=c.A.kiosk?.value||!1,n=L()&&s,i=c.A.wide.value?854:640,r=window.innerWidth/i,a=window.innerHeight/480,o=Math.min(r,a),u=t||s||n;if(((0,l.Ik)("resize")||(0,l.Ik)("fullscreen"))&&console.log(`🖥️ Resize: force=${e} isKioskLike=${u} window=${window.innerWidth}x${window.innerHeight} targetWidth=${i} widthZoom=${r.toFixed(3)} heightZoom=${a.toFixed(3)} finalScale=${o.toFixed(3)} fullscreenElement=${!!document.fullscreenElement} isIOS=${L()} standalone=${window.navigator.standalone} isMobileSafariKiosk=${n} kioskMode=${c.A.kiosk?.value} wideMode=${c.A.wide.value}`),o<=0)return void console.warn("Invalid scale calculated, skipping resize");const d=Math.abs((E||0)-o)>.001;if(!e&&!d&&!(I!==u))return;E=o,I=u,window.currentScale=o;const h=document.querySelector("#divTwc"),m=document.querySelector("#divTwcMain");if(!u&&o>=1&&!s){(0,l.Ik)("fullscreen")&&console.log("🖥️ Resetting fullscreen/kiosk styles to normal");const e=document.querySelector("#container");return N(h,A),N(e,O),N(m,O),void W(1)}if((o<1||s&&!u)&&!n&&!u){const e=document.querySelector("#container");N(e,O),N(m,O),h.style.setProperty("transform",`scale(${o})`),h.style.setProperty("transform-origin","top left");const t=c.A.wide.value?854:640,s=document.querySelector("#divTwcBottom"),n=(480+(s?s.offsetHeight:40))*o;return h.style.setProperty("width",`${t}px`),h.style.setProperty("height",`${n}px`),void W(o)}const f=c.A.wide.value?854:640,p=480;let g,y,w,v,S;if(N(h,A),n){const e=f*o,t=p*o,s=window.innerHeight>window.innerWidth;let n=0,i=0;s?i=(window.innerHeight-t)/2:n=(window.innerWidth-e)/2,(0,l.Ik)("fullscreen")&&console.log(`📱 Mobile Safari kiosk centering: ${s?"portrait":"landscape"} wrapper=${f}x480 scale=${o.toFixed(3)} offset=${n.toFixed(1)},${i.toFixed(1)}`),g="top left",y=`${n}px`,w=`${i}px`,v=null,S=null}else{const e=f*o,s=p*o,n=(window.innerWidth-e)/2,i=(window.innerHeight-s)/2;(0,l.Ik)("fullscreen")&&console.log(`🖥️ Applying fullscreen/kiosk scaling: wrapper=${f}x480 scale=${o.toFixed(3)} offset=${n.toFixed(1)},${i.toFixed(1)} target=${t?"#container":"#divTwcMain"}`),g="center center",y="50%",w="50%",v=`-${f/2}px`,S="-240px"}const b=document.querySelector("#container"),k=t?b:m;N(t?m:b,O),k.style.setProperty("transform",`scale(${o})`,"important"),k.style.setProperty("transform-origin",g,"important"),k.style.setProperty("height","480px","important"),k.style.setProperty("position","absolute","important"),k.style.setProperty("left",y,"important"),k.style.setProperty("top",w,"important"),null!==v?k.style.setProperty("margin-left",v,"important"):k.style.removeProperty("margin-left"),null!==S?k.style.setProperty("margin-top",S,"important"):k.style.removeProperty("margin-top"),W(o)},F=()=>{u.forEach(e=>{e.status=i.Ay.loading})},W=e=>{const t=document.querySelector("#container");if(!t||!t.classList.contains("scanlines"))return;const s=window.innerWidth,n=window.innerHeight,i=window.devicePixelRatio||1,r=c.A?.scanLineMode?.value||"auto";let a,o=null;const u=t=>{if(1===i)return t;if(e>2){const e=Math.round(4*t)/4;if(Math.abs(e-t)<=.125)return e}return Math.ceil(2*t)/2};if("thin"===r){const t=1/e,s=1===e?t:u(t);a=`${s}px`,o={css:s,visual:1,target:"1px visual thickness",reason:1===e?"Thin: 1px visual user override (exact)":"Thin: 1px visual user override (rounded)",isManual:!0}}else if("medium"===r){const t=2/e,s=1===e?t:u(t);a=`${s}px`,o={css:s,visual:2,target:"2px visual thickness",reason:1===e?"Medium: 2px visual user override (exact)":"Medium: 2px visual user override (rounded)",isManual:!0}}else if("thick"===r){const t=3/e,s=1===e?t:u(t);a=`${s}px`,o={css:s,visual:3,target:"3px visual thickness",reason:1===e?"Thick: 3px visual user override (exact)":"Thick: 3px visual user override (rounded)",isManual:!0}}else{let t,r;if(1===e){const e=i>=2&&s<=1024&&n<=1024;if(i>=2&&s<=768&&n<=768){const e=u(1.5/i);a=`${e}px`,r=`Auto: ${e}px unscaled (high-DPI mobile, DPR=${i})`}else if(e){const e=u(1.5/i);a=`${e}px`,r=`Auto: ${e}px unscaled (high-DPI tablet, DPR=${i})`}else if(i>=2){const e=u(1.5/i);a=`${e}px`,r=`Auto: ${e}px unscaled (high-DPI desktop, DPR=${i})`}else a="2px",r="Auto: 2px unscaled (standard DPI desktop)"}else if(e<1){t=1;const s=u(t/e);a=`${s}px`,r=`Auto: ${s}px scaled (mobile, scale=${e})`}else if(e>=3){t=3;const s=u(t/e);a=`${s}px`,r=`Auto: ${s}px scaled (large display/high scale, scale=${e})`}else{t=2;const s=t/e,n=u(s);a=`${n}px`,r=`Auto: ${n}px scaled (kiosk/fullscreen, scale=${e})`,(0,l.Ik)("scanlines")&&console.log(`↕️ Kiosk/fullscreen rounding: raw=${s}, rounded=${n}, DPR=${i}, scale=${e}`)}const c=parseFloat(a);o={css:c,visual:1===e?c:t,target:1===e?`${c}px CSS (unscaled)`:`${t}px visual thickness`,reason:r,isManual:!1}}if(t.style.setProperty("--scanline-thickness",a),(0,l.Ik)("scanlines")){const t=o.css*e,r=t*i,l=o.visual||t;console.log(`↕️ Scanline optimization: ${a} CSS × ${e.toFixed(3)} scale = ${t.toFixed(3)}px rendered (${l}px visual target) × ${i}x DPI = ${r.toFixed(3)}px physical - ${o.reason}`),console.log(`↕️  Display: ${s}×${n}, Scale factors: width=${(window.innerWidth/(c.A.wide.value?854:640)).toFixed(3)}, height=${(window.innerHeight/480).toFixed(3)}, DPR=${i}`),console.log(`↕️  Thickness: CSS=${a}, Visual=${l.toFixed(1)}px, Rendered=${t.toFixed(3)}px, Physical=${r.toFixed(3)}px`)}};window.applyScanlineScaling=W;const R=e=>{u[e.navId]&&console.warn(`Display nav ID ${e.navId} already in use`),u[e.navId]=e,H()},H=()=>{const e=document.querySelector("#enabledDisplays");if(!e)return;const t=u.map(e=>e.generateCheckbox(e.defaultEnabled)).filter(e=>e);e.innerHTML="",e.append(...t)},V=e=>{d=e},q=(e,t)=>{document.querySelector("#spanCity").innerHTML=`${e.city}, `,document.querySelector("#spanState").innerHTML=e.state,document.querySelector("#spanStationId").innerHTML=e.stationId,document.querySelector("#spanRadarId").innerHTML=e.radarId,document.querySelector("#spanZoneId").innerHTML=e.zoneId,document.querySelector("#spanOfficeId").innerHTML=t.cwa,document.querySelector("#spanGridPoint").innerHTML=`${t.gridX},${t.gridY}`},_=(e,t)=>{(async(e,t)=>{const s=await(0,o.f)(e.lat,e.lon);if(s){"function"==typeof t&&t(s);try{const t=await(0,a.oi)(s.properties.observationStations);if(!t)return void console.warn("Failed to get Observation Stations");if(!t||!t.features||0===t.features.length)return void console.warn("No Observation Stations found for this location");const n=t.features[0].properties.stationIdentifier;let{city:i}=s.properties.relativeLocation.properties;const{state:r}=s.properties.relativeLocation.properties;n in StationInfo&&(i=StationInfo[n].city,[i]=i.split("/"),i=i.replace(/\s+$/,"")),m.latitude=e.lat,m.longitude=e.lon,m.zoneId=s.properties.forecastZone.substr(-6),m.radarId=s.properties.radarStation.substr(-3),m.stationId=n,m.weatherOffice=s.properties.cwa,m.city=i,m.state=r,m.timeZone=s.properties.timeZone,m.forecast=s.properties.forecast,m.forecastGridData=s.properties.forecastGridData,m.stations=t.features,q(m,s.properties),postMessage({type:"current-weather-scroll",method:"reload"}),w(),c.A?.kiosk?.value||(document.querySelector("#loading").style.display="none",d&&(await d.drawCanvas(),d.showCanvas())),u.forEach(e=>e.getData(m))}catch(e){console.error(`Failed to get weather data: ${e.message}`)}}})(e,t)},U=()=>m.timeZone},218:(e,t,s)=>{var n=s(675),i=s(520);let r,a,o=0;const l=new i.A("mediaPlaying",{name:"Media Playing",type:"boolean",defaultValue:!1,sticky:!0});document.addEventListener("DOMContentLoaded",()=>{document.getElementById("ToggleMedia").addEventListener("click",m),u()});const c=async()=>{const e=async(e,t="")=>[...(await(0,n.Qq)(e)).matchAll(/href="([^"]+\.mp3)"/gi)].map(e=>`${t}${e[1]}`);try{let t=await e("music/");return 0===t.length&&(t=await e("music/default/","default/")),{availableFiles:t}}catch(e){return console.error("Unable to scan music directory"),console.error(e),{availableFiles:[]}}},u=async()=>{let e="";try{const t=await fetch("playlist.json");t.ok?(r=await t.json(),e="from server"):404===t.status&&"true"===t.headers.get("X-Weatherstar")?(r=await c(),e="via directory scan (static deployment)"):(r={availableFiles:[]},e=`failed (${t.status} ${t.statusText})`)}catch(t){r=await c(),e="via directory scan (after fetch failed)"}const t=r?.availableFiles?.length||0;t>0?console.log(`Loaded playlist ${e} - found ${t} music file${1===t?"":"s"}`):console.log(`No music files found ${e}`),d()},d=()=>{if(r?.availableFiles?.length>0){g();document.getElementById("ToggleMedia").classList.add("available"),h(),!0===l.value&&f();document.querySelector("#settings").append(w.generate())}},h=()=>{const e=document.getElementById("ToggleMedia");!0===l.value?e.classList.add("playing"):e.classList.remove("playing")},m=e=>{l.value="boolean"==typeof e?e:!l.value,p()},f=async()=>{if(a)try{await a.play(),k(r.availableFiles[o])}catch(e){console.error("Couldn't play music"),console.error(e),l.value=!1,p(),k("Not playing")}else v()},p=()=>{h(),l.value?f():a&&(a.pause(),k("Not playing"))},g=()=>{let e=[...r.availableFiles];const t=[];for(;e.length>0;){const s=Math.floor(Math.random()*e.length);t.push(e[s]),e=e.filter((e,t)=>t!==s)}r.availableFiles=t},y=e=>{a&&(a.volume=e)},w=new i.A("mediaVolume",{name:"Volume",type:"select",defaultValue:.75,values:[[1,"100%"],[.75,"75%"],[.5,"50%"],[.25,"25%"]],changeAction:y}),v=()=>{if(!r.availableFiles||0===r?.availableFiles.length)throw new Error("No playlist available");a||(a=new Audio,o=0,a.addEventListener("canplay",S),a.addEventListener("ended",b),a.src=`music/${r.availableFiles[o]}`,k(r.availableFiles[o]),a.type="audio/mpeg",y(w.value))},S=async()=>{l.value&&f()},b=()=>{o+=1,o>=r.availableFiles.length&&(g(),o=0),a.src=`music/${r.availableFiles[o]}`,k(r.availableFiles[o])},k=e=>{const t=e.split("/").pop(),s=decodeURIComponent(t.replace(/\.mp3/gi,"").replace(/(_-)/gi,""));document.getElementById("musicTrack").innerHTML=s}},238:(e,t,s)=>{s.d(t,{Bv:()=>d,gU:()=>l});var n=s(675),i=s(693);const r=e=>{try{const t=e.match(/(\d{1,2})\s+(\w{3})\s+(\d{1,2}):(\d{2})\s+(am|pm)\s+(\w{3})/i);if(!t)return null;const[,s,n,i,r,a,o]=t,l=(new Date).getFullYear();let c=parseInt(i,10);c>12&&(c-=12);const u=`${n} ${s}, ${l} ${c}:${r}:00 ${a.toUpperCase()} ${o}`,d=new Date(u);return Number.isNaN(d.getTime())?(console.warn(`MapClick: Invalid date parsed from: ${e} -> ${u}`),null):d}catch(t){return console.warn(`MapClick: Failed to parse date: ${e}`,t),null}},a=e=>{if(!e||"NULL"===e||"NA"===e)return null;const t=e.replace(".png",""),{isNightTime:s,baseIconName:n}=(e=>{const t=e.match(/^hi_n(.+)/);return t?{isNightTime:!0,baseIconName:`hi_${t[1]}`}:e.startsWith("n")?{isNightTime:!0,baseIconName:e.substring(1)}:{isNightTime:!1,baseIconName:e}})(t),i={skc:"skc",few:"few",sct:"sct",bkn:"bkn",ovc:"ovc",minus_ra:"rain",ra:"rain",sn:"snow",ra_sn:"rain_snow",rasn:"rain_snow",raip:"rain_sleet",ip:"sleet",ra_fzra:"rain_fzra",fzra:"fzra",fzra_sn:"snow_fzra",snip:"snow_sleet",hi_shwrs:"rain_showers_hi",shra:"rain_showers",tsra:"tsra",scttsra:"tsra_sct",hi_tsra:"tsra_hi",fg:"fog",wind_skc:"wind_skc",wind_few:"wind_few",wind_sct:"wind_sct",wind_bkn:"wind_bkn",wind_ovc:"wind_ovc",blizzard:"blizzard",cold:"cold",hot:"hot",du:"dust",fu:"smoke",hz:"haze",fc:"tornado",tor:"tornado"}[n];return i?`/icons/land/${s?"night":"day"}/${i}?size=medium`:null},o=e=>{const t=parseFloat(e.Temp),s=Number.isNaN(t)?null:5*(t-32)/9,n=parseFloat(e.Dewp),i=Number.isNaN(n)?null:5*(n-32)/9,o=parseFloat(e.Winds),l=Number.isNaN(o)?null:1.60934*o,c="NA"!==e.Gust?parseFloat(e.Gust):NaN,u=Number.isNaN(c)?null:1.60934*c,d=parseFloat(e.Windd),h=Number.isNaN(d)?null:d,m=parseFloat(e.SLP),f=Number.isNaN(m)?null:3386.39*m,p=parseFloat(e.Visibility),g=Number.isNaN(p)?null:1609.34*p,y=parseFloat(e.Relh),w=Number.isNaN(y)?null:y,v="NA"!==e.WindChill?parseFloat(e.WindChill):NaN,S=Number.isNaN(v)?null:5*(v-32)/9,b=a(e.Weatherimage);return{features:[{properties:{timestamp:r(e.Date)?.toISOString()||(new Date).toISOString(),temperature:{value:s,unitCode:"wmoUnit:degC"},dewpoint:{value:i,unitCode:"wmoUnit:degC"},windDirection:{value:h,unitCode:"wmoUnit:degree_(angle)"},windSpeed:{value:l,unitCode:"wmoUnit:km_h-1"},windGust:{value:u,unitCode:"wmoUnit:km_h-1"},barometricPressure:{value:f,unitCode:"wmoUnit:Pa"},visibility:{value:g,unitCode:"wmoUnit:m"},relativeHumidity:{value:w,unitCode:"wmoUnit:percent"},textDescription:e.Weather||null,icon:b,heatIndex:{value:null},windChill:{value:S},cloudLayers:[]}}]}},l=(e,t=60)=>{const s=e instanceof Date?e:new Date(e),n=(new Date-s)/6e4;return{isStale:n>t,ageInMinutes:n}},c=async(e,t,s,r={})=>{const{stillWaiting:a,retryCount:o=3}=r,l=e.toFixed(4),c=t.toFixed(4),u=`https://forecast.weather.gov/MapClick.php?FcstType=json&lat=${l}&lon=${c}&station=${s}`;try{const e=await(0,n.oi)(u,{retryCount:o,stillWaiting:a});return e||((0,i.Ik)("verbose-failures")&&console.log(`MapClick: No data available for ${l},${c}`),null)}catch(e){return console.error(`Unexpected error fetching MapClick data for ${l},${c}: ${e.message}`),null}},u=async(e,t,s,n={})=>{const{stillWaiting:i,retryCount:r=3}=n,a=await c(e,t,s,{stillWaiting:i,retryCount:r});return a?.currentobservation?o(a.currentobservation):null},d=async(e,t={})=>{const{requiredFields:s=[],maxOptionalMissing:n=0,stationId:r,stillWaiting:a,debugContext:o="mapclick",maxAgeMinutes:c=80}=t,d=(t,s=[],a=[],l=!1,c=0)=>{if((0,i.Ik)(o)){const e=[];l&&e.push(`API data is stale: ${c.toFixed(0)} minutes old`),s.length>0&&e.push(`API data missing required: ${s.join(", ")}`),a.length>n&&e.push(`API data missing optional: ${a.join(", ")}`),t?e.length>0?console.log(`🚫 ${o}: Station ${r} ${t} (${e.join(", ")})`):console.log(`🚫 ${o}: Station ${r} ${t}`):e.length>0&&console.log(`🚫 ${o}: Station ${r} ${e.join("; ")}`)}return{data:e,wasImproved:!1,improvements:[],missingFields:[...s,...a]}};if(!e)return d("no original observation data");if(!r||"undefined"==typeof window||!window.StationInfo)return d("no station ID");const h=Object.values(window.StationInfo).find(e=>e.id===r);if(!h){let e=null;return 4===r.length&&(e=`station ${r} not found in StationInfo`),d(e)}const m=new Date(e.timestamp),{isStale:f,ageInMinutes:p}=l(m,c),g=s.filter(e=>!1!==e.required),y=s.filter(e=>!1===e.required),w=g.filter(t=>t.check(e)).map(e=>e.name),v=y.filter(t=>t.check(e)).map(e=>e.name),S=v.length;if(!(f||w.length>0||S>n))return d(null,w,v,f,p);const b=await u(h.lat,h.lon,r,{stillWaiting:a,retryCount:1});if(!b)return d("MapClick fetch failed",w,v,f,p);const k=b.features[0].properties,C=new Date(k.timestamp),T=C>m,x=g.filter(e=>e.check(k)).map(e=>e.name),M=y.filter(e=>e.check(k)).map(e=>e.name),D=M.length;let $=!1;$=y.length>0?x.length<w.length||S>n&&D<=n:x.length<w.length;const L=x.length<=w.length;if(!(L&&(T||$))){let e="MapClick data rejected";if((0,i.Ik)(o)){const t=[];if(L){if($||y.length>0&&M.length>v.length&&t.push(`optional: ${M.length} vs ${v.length}`),!T){const e=Math.round((Date.now()-C)/6e4);t.push(`older: ${e}min`)}}else t.push(`has ${x.length-w.length} missing fields`),x.length>0&&t.push(`required: ${x.join(", ")}`);t.length>0&&(e+=`: ${t.join("; ")}`)}return d(e,w,v,f,p)}const E=[];if(T){const e=Math.round((Date.now()-C)/6e4);E.push(`${e} minutes old vs. ${p.toFixed(0)} minutes old`)}if($){const e=w.filter(e=>{const t=g.find(t=>t.name===e);return t&&!t.check(k)}),t=v.filter(e=>{const t=y.find(t=>t.name===e);return t&&!t.check(k)});e.length>0&&E.push(`provides missing required: ${e.join(", ")}`),t.length>0&&E.push(`provides missing optional: ${t.join(", ")}`),0===e.length&&0===t.length&&x.length<w.length&&E.push("better data quality")}return(0,i.Ik)(o)&&console.log(`🗺️ ${o}: preferring MapClick data for station ${r} (${E.join("; ")})`),{data:k,wasImproved:!0,improvements:E,missingFields:[...x,...M]}}},247:(e,t,s)=>{s.d(t,{A:()=>h});var n=s(47),i=s(125),r=s(592),a=s(24),o=s(211);class l extends a.A{constructor(e,t){super(e,t,"Almanac",!0),this.iconPaths={Full:c(Math.random()>.995?"Degraded":"Full"),Last:c("Last"),New:c("New"),First:c("First")},(0,n.b)(this.iconPaths.Full),(0,n.b)(this.iconPaths.Last),(0,n.b)(this.iconPaths.New),(0,n.b)(this.iconPaths.First),this.timing.totalScreens=1}async getData(e,t){const s=super.getData(e,t),{sun:n,moon:i}=this.calcSunMoonData(this.weatherParameters);this.data={sun:n,moon:i},this.getDataCallback(),s&&this.setStatus(r.Ay.loaded)}calcSunMoonData(e){const t=[SunCalc.getTimes(new Date,e.latitude,e.longitude),SunCalc.getTimes(i.c9.local().plus({days:1}).toJSDate(),e.latitude,e.longitude)],s=[];let n=i.c9.local().minus({days:1}),{phase:r}=SunCalc.getMoonIllumination(n.toJSDate()),a=0;do{const e=r;n=n.plus({days:1}),r=SunCalc.getMoonIllumination(n.toJSDate()).phase,e<.25&&r>=.25&&s.push(this.getMoonTransition(.25,"First",n)),e<.5&&r>=.5&&s.push(this.getMoonTransition(.5,"Full",n)),e<.75&&r>=.75&&s.push(this.getMoonTransition(.75,"Last",n)),e>r&&s.push(this.getMoonTransition(0,"New",n)),a+=1}while(a<=30&&s.length<4);return{sun:t,moon:s}}getMoonTransition(e,t,s,n=0){let i=s,{phase:r}=SunCalc.getMoonIllumination(i.toJSDate()),a=0;const o={hours:0===n?-1:0,minutes:1===n?1:0,seconds:2===n?-1:0,milliseconds:3===n?1:0};let l=(t,s)=>t<e&&s>=e;n%2==0&&(l=(t,s)=>t>e&&s<=e);do{const s=r;if(i=i.plus(o),r=SunCalc.getMoonIllumination(i.toJSDate()).phase,r>.9&&(r-=1),l(s,r)){if(n>=3)break;return this.getMoonTransition(e,t,i,n+1)}a+=1}while(a<1e3);return{phase:t,date:i}}async drawCanvas(){super.drawCanvas();const e=this.data,t=i.c9.local(),s=t.plus({days:1});this.elem.querySelector(".day-1").textContent=t.toLocaleString({weekday:"long"}),this.elem.querySelector(".day-2").textContent=s.toLocaleString({weekday:"long"});const n=i.c9.fromJSDate(e.sun[0].sunrise),r=i.c9.fromJSDate(e.sun[0].sunset),[a,o]=u([n,r]);this.elem.querySelector(".rise-1").textContent=a,this.elem.querySelector(".set-1").textContent=o;const l=i.c9.fromJSDate(e.sun[1].sunrise),c=i.c9.fromJSDate(e.sun[1].sunset),[d,h]=u([l,c]);this.elem.querySelector(".rise-2").textContent=d,this.elem.querySelector(".set-2").textContent=h;const m=e.moon.map(e=>{const t={},s=e.date.toLocaleString({month:"short",day:"numeric"});return t.date=s,t.type=e.phase,t.icon={type:"img",src:this.iconPaths[e.phase]},this.fillTemplate("day",t)}),f=this.elem.querySelector(".moon .days");f.innerHTML="",f.append(...m),this.finishDraw()}async getSun(){return new Promise(e=>{this.data&&e(this.data),this.getDataCallbacks.push(e)})}}const c=e=>{switch(e){case"Full":return"images/icons/moon-phases/Full-Moon.gif";case"Degraded":return"images/icons/moon-phases/Full-Moon-Degraded.gif";case"Last":return"images/icons/moon-phases/Last-Quarter.gif";case"New":return"images/icons/moon-phases/New-Moon.gif";default:return"images/icons/moon-phases/First-Quarter.gif"}},u=e=>{const t=e.map(e=>e.setZone((0,o.eB)()).toFormat("h:mm a").toUpperCase());return t.some(e=>e.startsWith("1"))?t.map(e=>e.startsWith("1")?e:` ${e}`):t},d=new l(9,"almanac");(0,o.Kb)(d);const h=d.getSun.bind(d)},335:(e,t,s)=>{s.d(t,{A:()=>n});const n=(e,t="")=>{const s=new Date,{activePeriods:n,removedPeriods:i}=e.reduce((e,t)=>(new Date(t.endTime)>s?e.activePeriods.push(t):e.removedPeriods.push(t),e),{activePeriods:[],removedPeriods:[]});if(i.length>0){const e=t?` from ${t}`:"";console.log(`🚮 Forecast: Removed expired periods${e}: ${i.map(e=>`${e.name} (ended ${e.endTime})`).join(", ")}`)}return n}},348:(e,t,s)=>{s.d(t,{f:()=>r});var n=s(675),i=s(693);const r=async(e,t)=>{const s=await(0,n.oi)(`https://api.weather.gov/points/${e.toFixed(4)},${t.toFixed(4)}`);return s||((0,i.Ik)("verbose-failures")&&console.warn(`Unable to get points for ${e},${t}`),!1)}},413:(e,t,s)=>{s.d(t,{Mi:()=>f,NA:()=>m,S_:()=>h,X1:()=>d,X4:()=>i,u7:()=>u});var n=s(593);const i=(e,t)=>Math.trunc(e*10**t)/10**t,r=e=>Math.round(e/1.60934),a=e=>Math.round(9*e/5+32),o=e=>Math.round(5*(e-32)/9),l=(e=1)=>t=>null===(t??null)?"-":Math.round(t/e),c=e=>t=>null===(t??null)?"-":e(t),u=(e="si")=>{let t=l();return e!==n.A.units.value&&(t=c(r)),"si"===n.A.units.value?t.units="kph":t.units="MPH",t},d=(e="si")=>{let t=l();return e!==n.A.units.value&&(t=c("us"===e?o:a)),"si"===n.A.units.value?t.units="C":t.units="F",t},h=(e="si")=>{let t=l();return e!==n.A.units.value&&(t=c(e=>{return 100*Math.round((t=e,Math.round(t/.3048)/100));var t})),"si"===n.A.units.value?t.units="m.":t.units="ft.",t},m=(e="si")=>{let t=l(1e3);return e!==n.A.units.value&&(t=c(e=>{return Math.round((t=e,Math.round(t/1.60934)/1e3));var t})),"si"===n.A.units.value?t.units=" km.":t.units=" mi.",t},f=(e="si")=>{let t=l(100);return e!==n.A.units.value&&(t=c(e=>{return(t=e,i(2953e-7*t,2)).toFixed(2);var t})),"si"===n.A.units.value?t.units=" mbar":t.units=" in.hg",t}},423:(e,t,s)=>{s.d(t,{A:()=>S});var n=s(592),i=s(47),r=s(675),a=s(519),o=s(891),l=s(900),c=s(24),u=s(211),d=s(134),h=s(413),m=s(693),f=s(238);const p=["U","C","H","W","Y","T","S","M","O","L","A","F","B","N","V","R","D","E","I","G","J"];class g extends c.A{constructor(e,t){super(e,t,"Current Conditions",!0)}async getData(e,t){const s=super.getData(e,t),a=this.weatherParameters.stations.filter(e=>4===e?.properties?.stationIdentifier?.length&&!p.includes(e.properties.stationIdentifier.slice(0,1)));let o,c,u=0;for(;!o&&u<a.length;){c=a[u];const e=c.properties.stationIdentifier;let t;u+=1;try{t=await(0,r.oi)(`${c.id}/observations`,{data:{limit:2},retryCount:3,stillWaiting:()=>this.stillWaiting()})}catch(s){console.error(`Unexpected error getting Current Conditions for station ${e}: ${s.message} (trying next station)`),t=void 0}if(t&&t.features?.length>0){const s={...t.features[0].properties};t.features[0].properties=(0,d.A)(t.features[0].properties);const n=[{name:"temperature",check:(e,t)=>null===e.temperature?.value&&null!==t.temperature?.value},{name:"windSpeed",check:(e,t)=>null===e.windSpeed?.value&&null!==t.windSpeed?.value},{name:"windDirection",check:(e,t)=>null===e.windDirection?.value&&null!==t.windDirection?.value},{name:"windGust",check:(e,t)=>null===e.windGust?.value&&null!==t.windGust?.value},{name:"dewpoint",check:(e,t)=>null===e.dewpoint?.value&&null!==t.dewpoint?.value},{name:"barometricPressure",check:(e,t)=>null===e.barometricPressure?.value&&null!==t.barometricPressure?.value},{name:"relativeHumidity",check:(e,t)=>null===e.relativeHumidity?.value&&null!==t.relativeHumidity?.value},{name:"visibility",check:(e,t)=>null===e.visibility?.value&&null!==t.visibility?.value},{name:"ceiling",check:(e,t)=>null===e.cloudLayers?.[0]?.base?.value&&null!==t.cloudLayers?.[0]?.base?.value}],i=t.features[0].properties,r=n.filter(e=>e.check(s,i)).map(e=>e.name);(0,m.Ik)("currentweather")&&r.length>0&&console.log(`Current Conditions for station ${e} were augmented with METAR data for ${r.join(", ")}`);const a=[{name:"temperature",check:e=>null===e.temperature?.value,required:!0},{name:"textDescription",check:e=>null===e.textDescription||""===e.textDescription,required:!0},{name:"windSpeed",check:e=>null===e.windSpeed?.value,required:!1},{name:"dewpoint",check:e=>null===e.dewpoint?.value,required:!1},{name:"barometricPressure",check:e=>null===e.barometricPressure?.value,required:!1},{name:"visibility",check:e=>null===e.visibility?.value,required:!1},{name:"relativeHumidity",check:e=>null===e.relativeHumidity?.value,required:!1},{name:"ceiling",check:e=>null===e.cloudLayers?.[0]?.base?.value,required:!1}],l=await(0,f.Bv)(i,{requiredFields:a,maxOptionalMissing:1,stationId:e,stillWaiting:()=>this.stillWaiting(),debugContext:"currentweather"});t.features[0].properties=l.data;const{missingFields:c}=l,u=c.filter(e=>!!a.find(t=>t.name===e&&t.required)),h=c.filter(e=>!!a.find(t=>t.name===e&&!t.required)),p=h.length;if(0===u.length&&p<=1)o=t,(0,m.Ik)("currentweather")&&h.length>0&&console.log(`Data for station ${e} is missing optional fields: ${h.join(", ")} (acceptable)`);else{const t=[...u,...h];(0,m.Ik)("currentweather")&&console.log(`Data for station ${e} is missing fields: ${t.join(", ")} (${u.length} required, ${p} optional) (trying next station)`)}}else(0,m.Ik)("verbose-failures")&&(t?console.log(`No features returned for station ${e}, trying next station`):console.log(`Current Conditions for station ${e} failed, trying next station`))}if(!o)return console.error("Current Conditions failure: all nearby weather stations exhausted!"),this.isEnabled&&this.setStatus(n.Ay.failed),void this.getDataCallback(void 0);if(this.data=w({...o,station:c}),this.getDataCallback(),!s)return;this.timing.totalScreens=1;const{isStale:h,ageInMinutes:g}=(0,f.gU)(o.features[0].properties.timestamp,80);if(this.isStaleData=h,h&&(0,m.Ik)("currentweather")&&console.warn(`Current Conditions: Data is ${g.toFixed(0)} minutes old (from ${new Date(o.features[0].properties.timestamp).toISOString()})`),o.features[0].properties.icon){const e=(0,l.FD)(o.features[0].properties.icon);e&&(0,i.b)(e)}this.setStatus(n.Ay.loaded)}async drawCanvas(){super.drawCanvas();const e=this.elem.querySelector(".header .title .top");e&&(e.textContent=this.isStaleData?"Recent":"Current");let t=this.data.observations.textDescription;t.length>15&&(t=y(t));const s="number"==typeof this.data.WindSpeed?this.data.WindDirection.padEnd(3,"")+this.data.WindSpeed.toString().padStart(3," "):this.data.WindSpeed,n=(StationInfo[this.data.station.properties.stationIdentifier]?.city??(0,o.C)(this.data.station.properties.name)).substr(0,20),i={temp:this.data.Temperature+String.fromCharCode(176),condition:t,wind:s,location:n,humidity:`${this.data.Humidity}%`,dewpoint:this.data.DewPoint+String.fromCharCode(176),ceiling:0===this.data.Ceiling?"Unlimited":this.data.Ceiling+this.data.CeilingUnit,visibility:this.data.Visibility+this.data.VisibilityUnit,pressure:`${this.data.Pressure} ${this.data.PressureDirection}`,icon:{type:"img",src:this.data.Icon}};"-"!==this.data.WindGust&&(i["wind-gusts"]=`Gusts to ${this.data.WindGust}`),this.data.observations.heatIndex.value&&this.data.HeatIndex!==this.data.Temperature?(i["heat-index-label"]="Heat Index:",i["heat-index"]=this.data.HeatIndex+String.fromCharCode(176)):this.data.observations.windChill.value&&""!==this.data.WindChill&&this.data.WindChill<this.data.Temperature&&(i["heat-index-label"]="Wind Chill:",i["heat-index"]=this.data.WindChill+String.fromCharCode(176));const r=this.elem.querySelector(".main");r.innerHTML="",r.append(this.fillTemplate("weather",i)),this.finishDraw()}async getCurrentWeather(e){return this.setAutoReload(),e&&this.stillWaitingCallbacks.push(e),new Promise(e=>{this.data&&e(this.data),this.getDataCallbacks.push(()=>e(this.data))})}}const y=e=>{let t=e;return t=t.replace(/Light/g,"L"),t=t.replace(/Heavy/g,"H"),t=t.replace(/Partly/g,"P"),t=t.replace(/Mostly/g,"M"),t=t.replace(/Few/g,"F"),t=t.replace(/Thunderstorm/g,"T'storm"),t=t.replace(/ in /g,""),t=t.replace(/Vicinity/g,""),t=t.replace(/ and /g," "),t=t.replace(/Freezing Rain/g,"Frz Rn"),t=t.replace(/Freezing/g,"Frz"),t=t.replace(/Unknown Precip/g,""),t=t.replace(/L Snow Fog/g,"L Snw/Fog"),t=t.replace(/ with /g,"/"),t},w=e=>{const t=(0,h.u7)(),s=(0,h.X1)(),n=(0,h.S_)(),i=(0,h.NA)(),r=(0,h.Mi)(),o=e.features[0].properties;e.observations=o,e.Temperature=s(o.temperature.value),e.TemperatureUnit=s.units,e.DewPoint=s(o.dewpoint.value),e.Ceiling=n(o.cloudLayers[0]?.base?.value??0),e.CeilingUnit=n.units,e.Visibility=i(o.visibility.value),e.VisibilityUnit=i.units,e.Pressure=r(o.barometricPressure.value),e.PressureUnit=r.units,e.HeatIndex=s(o.heatIndex.value),e.WindChill=s(o.windChill.value),e.WindSpeed=t(o.windSpeed.value),e.WindDirection=(0,a.Up)(o.windDirection.value),e.WindGust=t(o.windGust.value),e.WindUnit=t.units,e.Humidity=Math.round(o.relativeHumidity.value);const c=(0,l.FD)(o.icon);if(e.Icon=c||o.icon,e.PressureDirection="",e.TextConditions=o.textDescription,0===e.WindSpeed&&(e.WindSpeed="Calm"),e.features.length>1&&e.features[1].properties.barometricPressure?.value){const t=o.barometricPressure.value-e.features[1].properties.barometricPressure.value;t>150&&(e.PressureDirection="R"),t<-150&&(e.PressureDirection="F")}return e},v=new g(1,"current-weather");(0,u.Kb)(v);const S=v.getCurrentWeather.bind(v)},430:(e,t,s)=>{s.d(t,{A:()=>r});let n=!1;const i=(e=!1)=>(i.controller||(i.controller=new NoSleep),n===e?Promise.resolve(!1):(n=e,e?i.controller.enable().catch(e=>(console.warn("Wake lock request failed:",e.message),n=!1,!1)):Promise.resolve(i.controller.disable()))),r=i},498:(e,t,s)=>{var n=s(592),i=s(675),r=s(125),a=s(900),o=s(47),l=s(24),c=s(211),u=s(593),d=s(335),h=s(693);class m extends l.A{constructor(e,t){super(e,t,"Extended Forecast",!0),this.timing.totalScreens=2}async getData(e,t){if(super.getData(e,t))try{if(this.data=await(0,i.oi)(this.weatherParameters.forecast,{data:{units:u.A.units.value},retryCount:3,stillWaiting:()=>this.stillWaiting()}),!this.data)return void(this.isEnabled&&this.setStatus(n.Ay.failed));this.screenIndex=0,this.setStatus(n.Ay.loaded)}catch(e){console.error(`Unexpected error getting Extended Forecast: ${e.message}`),this.isEnabled&&this.setStatus(n.Ay.failed)}}async drawCanvas(){super.drawCanvas();const e=f(this.data.properties.periods,this.weatherParameters.forecast).slice(0+3*this.screenIndex,3+3*this.screenIndex).map(e=>{const t={icon:{type:"img",src:e.icon},condition:e.text,date:e.dayName},{low:s,high:n}=e;return void 0!==s&&(t["value-lo"]=Math.round(s)),t["value-hi"]=Math.round(n),this.fillTemplate("day",t)}),t=this.elem.querySelector(".day-container");t.innerHTML="",t.append(...e),this.finishDraw()}}const f=(e,t)=>{const s=(0,d.A)(e,t);(0,h.Ik)("extendedforecast")&&(console.log("ExtendedForecast: First few active periods:"),s.slice(0,4).forEach((e,t)=>{console.log(`  [${t}] ${e.name}: ${e.startTime} to ${e.endTime} (isDaytime: ${e.isDaytime})`)}));let n=0,i=0;s.length>0&&!s[0].isDaytime?(n=1,i=1,(0,h.Ik)("extendedforecast")&&console.log(`ExtendedForecast: Skipping first period "${s[0].name}" because it's nighttime`)):s.length>0&&(0,h.Ik)("extendedforecast")&&console.log(`ExtendedForecast: Starting with first period "${s[0].name}" because it's daytime`);const l=[0,1,2,3,4,5,6].map(e=>r.c9.local().startOf("day").plus({days:e+i}).toLocaleString({weekday:"short"}));(0,h.Ik)("extendedforecast")&&console.log(`ExtendedForecast: Generated date labels: [${l.join(", ")}]`);let c=0;const u=[];for(let e=n;e<s.length;e+=1){const t=s[e];u[c]||u.push({dayName:"",low:void 0,high:void 0,text:void 0,icon:void 0});const n=u[c];(0,o.b)(n.icon),t.isDaytime?(n.high=t.temperature,n.icon=(0,a.FD)(t.icon),n.text=g(t.shortForecast),n.dayName=l[c]):(n.low=t.temperature,c+=1)}return(0,h.Ik)("extendedforecast")&&(console.log("ExtendedForecast: Final forecast array:"),u.forEach((e,t)=>{console.log(`  [${t}] ${e.dayName}: High=${e.high}°, Low=${e.low}°, Text="${e.text}"`)})),u},p=[[/ and /gi," "],[/slight /gi,""],[/chance /gi,""],[/very /gi,""],[/patchy /gi,""],[/Areas Of /gi,""],[/areas /gi,""],[/dense /gi,""],[/Thunderstorm/g,"T'Storm"]],g=e=>{const t=p.reduce((e,[t,s])=>e.replace(t,s),e);let s=t.split(" ");-1!==t.indexOf("then")&&(s=t.split(" then "),s=s[1].split(" "));let n=s[0].substr(0,10),i="";s[1]&&(n.endsWith(".")?n=n.replace(/\./,""):i=s[1].substr(0,10),"Blowing"===i&&(i=""));let r=n;return""!==i&&(r+=` ${i}`),r};(0,c.Kb)(new m(8,"extended-forecast"))},519:(e,t,s)=>{s.d(t,{Io:()=>i,LV:()=>r,Up:()=>n});const n=e=>{if(null==e||"number"!=typeof e||Number.isNaN(e))return"VAR";return["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"][Math.floor(e/22.5+.5)%16]},i=(e,t,s,n)=>Math.sqrt((s-e)**2+(n-t)**2),r=(e,t)=>(e%t+t)%t},520:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(999);const i="Settings",r={shortName:void 0,name:void 0,type:"checkbox",defaultValue:void 0,changeAction:()=>{},sticky:!0,stickyRead:!1,values:[],visible:!0,placeholder:""};const a=class{constructor(e,t){if(void 0===e)throw new Error("No name provided for setting");const s={...r,...t??{}};this.shortName=e,this.name=s.name??e,this.defaultValue=s.defaultValue,this.myValue=this.defaultValue,this.type=s?.type,this.sticky=s.sticky,this.stickyRead=s.stickyRead,this.values=s.values,this.visible=s.visible,this.changeAction=s.changeAction,this.placeholder=s.placeholder;const i=(0,n.J)()?.[`settings-${e}-${this.type}`];let a;"checkbox"===this.type&&void 0!==i&&(a="true"===i),"boolean"===this.type&&void 0!==i&&(a="true"===i),"select"===this.type&&void 0!==i&&(a=parseFloat(i)),"select"===this.type&&void 0!==i&&Number.isNaN(a)&&(a=i),"string"===this.type&&void 0!==i&&(a=i);const o=a??this.getFromLocalStorage();switch((this.sticky||this.stickyRead||void 0!==i)&&null!==o&&(this.myValue=o),this.type){case"select":this.selectChange({target:{value:this.myValue}});break;case"string":this.stringChange({target:{value:this.myValue}});break;default:this.checkboxChange({target:{checked:this.myValue}})}}generateSelect(){const e=document.createElement("label");e.for=`settings-${this.shortName}-select`,e.id=`settings-${this.shortName}-label`;const t=document.createElement("span");t.innerHTML=`${this.name} `,e.append(t);const s=document.createElement("select");return s.id=`settings-${this.shortName}-select`,s.name=`settings-${this.shortName}-select`,s.addEventListener("change",e=>this.selectChange(e)),this.values.forEach(([e,t])=>{const n=document.createElement("option");n.value="number"==typeof e?e.toFixed(2):e,n.innerHTML=t,s.append(n)}),e.append(s),this.element=e,this.selectHighlight(this.myValue),e}generateCheckbox(){const e=document.createElement("label");e.for=`settings-${this.shortName}-checkbox`,e.id=`settings-${this.shortName}-label`;const t=document.createElement("input");t.type="checkbox",t.value=!0,t.id=`settings-${this.shortName}-checkbox`,t.name=`settings-${this.shortName}-checkbox`,t.checked=this.myValue,t.addEventListener("change",e=>this.checkboxChange(e));const s=document.createElement("span");return s.innerHTML=this.name,e.append(t,s),this.element=e,e}generateString(){const e=document.createElement("label");e.for=`settings-${this.shortName}-string`,e.id=`settings-${this.shortName}-label`;const t=document.createElement("input");t.type="text",t.value=this.myValue,t.id=`settings-${this.shortName}-string`,t.name=`settings-${this.shortName}-string`,t.placeholder=this.placeholder;const s=document.createElement("input");return s.type="button",s.value="Set",s.id=`settings-${this.shortName}-button`,s.name=`settings-${this.shortName}-button`,s.addEventListener("click",()=>{this.stringChange({target:{value:t.value}})}),e.append(t,s),this.element=e,e}checkboxChange(e){this.myValue=e.target.checked,this.storeToLocalStorage(this.myValue),this.changeAction(this.myValue)}selectChange(e){this.myValue=parseFloat(e.target.value),Number.isNaN(this.myValue)&&(this.myValue=e.target.value),this.storeToLocalStorage(this.myValue),this.changeAction(this.myValue)}stringChange(e){this.myValue=e.target.value,this.storeToLocalStorage(this.myValue),this.changeAction(this.myValue)}storeToLocalStorage(e){if(!this.sticky)return;const t=localStorage?.getItem(i)??"{}",s=JSON.parse(t);s[this.shortName]=e,localStorage?.setItem(i,JSON.stringify(s))}conditionalStoreToLocalStorage(e,t){if(!this.stickyRead)return;const s=localStorage?.getItem(i)??"{}",n=JSON.parse(s);t?n[this.shortName]=e:delete n[this.shortName],localStorage?.setItem(i,JSON.stringify(n))}getFromLocalStorage(){const e=localStorage?.getItem(i);try{if(e){const t=JSON.parse(e)?.[this.shortName];if(void 0!==t)switch(this.type){case"boolean":case"checkbox":case"select":case"string":return t;default:return null}}}catch(t){console.warn(`Failed to parse settings from localStorage: ${t} - allSettings=${e}`),localStorage?.removeItem(i)}return null}get value(){return this.myValue}set value(e){switch(this.myValue=e,this.type){case"select":this.selectHighlight(e);break;case"boolean":break;default:this.element.querySelector("input").checked=e}this.storeToLocalStorage(this.myValue),this.changeAction(this.myValue)}selectHighlight(e){this?.element?.querySelectorAll("option")?.forEach?.(t=>{t.selected=e?.toFixed?.(2)===t.value||e===t.value})}generate(){if(!this.visible)return"";switch(this.type){case"select":return this.generateSelect();case"string":return this.generateString();default:return this.generateCheckbox()}}}},592:(e,t,s)=>{s.d(t,{Ay:()=>a,LR:()=>r,qx:()=>i});const n={loading:Symbol("loading"),loaded:Symbol("loaded"),failed:Symbol("failed"),noData:Symbol("noData"),disabled:Symbol("disabled"),retrying:Symbol("retrying")},i=e=>{switch(e){case n.loading:return"loading";case n.loaded:return"press-here";case n.failed:return"failed";case n.noData:return"no-data";case n.disabled:return"disabled";case n.retrying:return"retrying";default:return""}},r=["loading","press-here","failed","no-data","disabled","retrying"],a=n},593:(e,t,s)=>{s.d(t,{A:()=>d});var n=s(520);const i={speed:{value:1}},r=new Set,a=e=>{const t=document.querySelector("#divTwc");t?(e?t.classList.add("wide"):t.classList.remove("wide"),window.dispatchEvent(new Event("resize"))):e&&r.add("wide")},o=e=>{const t=document.querySelector("body");t?(e?(t.classList.add("kiosk"),window.dispatchEvent(new Event("resize"))):(t.classList.remove("kiosk"),window.dispatchEvent(new Event("resize"))),i.kiosk?.conditionalStoreToLocalStorage&&i.kiosk.conditionalStoreToLocalStorage(e,i.stickyKiosk?.value)):e&&r.add("kiosk")},l=e=>{const t=document.getElementById("container"),s=document.getElementById("ToggleScanlines");t&&s?e?(t.classList.add("scanlines"),s.classList.add("on")):(t.classList.remove("scanlines","scanlines-auto","scanlines-fine","scanlines-normal","scanlines-thick","scanlines-classic","scanlines-retro"),s.classList.remove("on")):e&&r.add("scanLines")},c=e=>{if(i.scanLines?.value&&"function"==typeof window.applyScanlineScaling){const e=window.currentScale||1;window.applyScanlineScaling(e)}};window.changeScanlineMode=e=>{if(void 0===i||!i.scanLineMode)return console.error("Settings system not available"),!1;return!!["auto","thin","medium","thick"].includes(e)&&(i.scanLineMode.value=e,!0)};const u=()=>{u.firstRunDone&&window.location.reload(),u.firstRunDone=!0};i.wide=new n.A("wide",{name:"Widescreen",defaultValue:!1,changeAction:a,sticky:!0}),i.kiosk=new n.A("kiosk",{name:"Kiosk",defaultValue:!1,changeAction:o,sticky:!1,stickyRead:!0}),i.stickyKiosk=new n.A("stickyKiosk",{name:"Sticky Kiosk",defaultValue:!1,sticky:!0}),i.speed=new n.A("speed",{name:"Speed",type:"select",defaultValue:1,values:[[.5,"Very Fast"],[.75,"Fast"],[1,"Normal"],[1.25,"Slow"],[1.5,"Very Slow"]]}),i.scanLines=new n.A("scanLines",{name:"Scan Lines",defaultValue:!0,changeAction:l,sticky:!0}),i.scanLineMode=new n.A("scanLineMode",{name:"Scan Line Style",type:"select",defaultValue:"auto",changeAction:c,sticky:!0,values:[["auto","Auto (Adaptive)"],["thin","Thin (1x)"],["medium","Medium (2x)"],["thick","Thick (3x)"]]}),i.units=new n.A("units",{name:"Units",type:"select",defaultValue:"us",changeAction:u,values:[["us","US"],["si","Metric"]]}),i.refreshTime=new n.A("refreshTime",{type:"select",defaultValue:6e5,sticky:!1,values:[[3e4,"TESTING"],[3e5,"5 minutes"],[6e5,"10 minutes"],[9e5,"15 minutes"],[18e5,"30 minutes"]],visible:!1}),document.addEventListener("DOMContentLoaded",()=>{r.size>0&&(console.log("Applying deferred DOM settings:",Array.from(r)),r.forEach(e=>{const t=i[e];t&&t.changeAction&&"function"==typeof t.changeAction&&t.changeAction(t.value)}),r.clear());const e=Object.values(i).map(e=>e.generate()),t=document.querySelector("#settings");t.innerHTML="",t.append(...e)});const d=i},632:(e,t,s)=>{s.d(t,{E7:()=>I,Ik:()=>T,cL:()=>E});var n=s(891),i=s(423),r=s(211),a=s(749),o=s(593);const l=String.fromCharCode(176),c=e=>Math.ceil(1e3*e/500),u=c(4);let d,h,m,f;document.addEventListener("DOMContentLoaded",()=>{d=document.querySelector("#container>.scroll"),h=document.querySelector("#container>.scroll .fixed"),m=document.querySelector("#container>.scroll .scroll-header")});let p,g=0,y=0,w=u,v=!0;const S=()=>{if(A(),f)return p&&C(),void(p=!1);p=!1,f||(f=setInterval(k,500)),C()},b=e=>{e&&(g=0,p=!0)},k=e=>{if(!e&&(y+=1,y<w))return;y=0,w=u;const t=(0,r.q)();if(!t?.okToDrawCurrentConditions)return b("progress"===t?.elemId),void O();g=(g+1)%D.length,C()},C=async()=>{const e=await(0,i.A)(),t=e||{};if(0===g){const e=await(0,a.A)();e&&e.length>0&&(t.hazards=e)}if(!(e||t.hazards&&0!==t.hazards.length))return;const s=D[g](t);if(d.classList.forEach(e=>{"scroll"!==e&&d.classList.remove(e)}),s?.classes?.forEach(e=>d.classList.add(e)),"string"==typeof s)$(s);else if("object"==typeof s){if("scroll"===s.type)N(s);else $(s);s.header?L(s.header):L("")}else k(!0)},T=e=>{if(!e.hazards||0===e.hazards.length)return!1;return{text:`${e.hazards[0].properties.event} ${e.hazards[0].properties.description}`,type:"scroll",classes:["hazard"],header:e.hazards[0].properties.event}};let x=[];const M=[T,e=>`Conditions at ${(StationInfo[e.station.properties.stationIdentifier]?.city??(0,n.C)(e.station.properties.name)).substr(0,20)}`,e=>{let t=`Temp: ${e.Temperature}${l}${e.TemperatureUnit}`;return e.observations.heatIndex.value?t+=`    Heat Index: ${e.HeatIndex}${l}${e.TemperatureUnit}`:e.observations.windChill.value&&(t+=`    Wind Chill: ${e.WindChill}${l}${e.TemperatureUnit}`),t},e=>`Humidity: ${e.Humidity}%   Dewpoint: ${e.DewPoint}${l}${e.TemperatureUnit}`,e=>`Barometric Pressure: ${e.Pressure} ${e.PressureDirection}`,e=>{let t=e.WindSpeed>0?`Wind: ${e.WindDirection} ${e.WindSpeed} ${e.WindUnit}`:"Wind: Calm";return e.WindGust>0&&(t+=`  Gusts to ${e.WindGust}`),t},e=>{const t=`${e.Ceiling} ${e.CeilingUnit}`;return`Visib: ${e.Visibility} ${e.VisibilityUnit}  Ceiling: ${0===e.Ceiling?"Unlimited":t}`}];let D=[...M,...x];const $=e=>{h.innerHTML=e,L("")},L=e=>{m.innerHTML=e??""},E=()=>{D=[...M],x=[],v=!0},I=(e,t=!0)=>{v=!1,x.push(e),D=[...t?M:[],...x]},N=e=>{const t=document.createElement("div");t.classList.add("scroll-area"),t.innerHTML=e.text,h.innerHTML=t.outerHTML;const{scrollWidth:s,clientWidth:n}=document.querySelector("#container>.scroll .fixed .scroll-area"),i=Math.max(s-n,0),r=Math.max(i/100*o.A.speed.value,2);w=c(r+1+1),t.style.transform="translateX(0px)",t.style.transition=`transform ${r.toFixed(1)}s linear`,t.style.willChange="transform",t.style.backfaceVisibility="hidden",t.style.perspective="1000px",h.innerHTML="",h.append(t.cloneNode(!0)),setTimeout(()=>{document.querySelector("#container>.scroll .fixed .scroll-area").style.transform=`translateX(-${i.toFixed(0)}px)`},1e3)},A=()=>{d.style.display="block"},O=()=>{d.style.display="none"};window.addEventListener("message",e=>{"current-weather-scroll"===e?.data?.type&&("start"===e.data?.method&&S(),"reload"===e.data?.method&&b(!0),"show"===e.data?.method&&A(),"hide"===e.data?.method&&O())}),window.CurrentWeatherScroll={addScreen:I,reset:E,start:S,show:A,hide:O,screenCount:()=>D.length,atDefault:()=>v}},675:(e,t,s)=>{s.d(t,{av:()=>l,Pq:()=>a,oi:()=>n,eo:()=>r,Hk:()=>i,Qq:()=>o});const n=async(e,t)=>{try{const s=await a(e,t);return s}catch(e){return null}},i=async(e,t)=>{try{const s=await o(e,t);return s}catch(e){return null}},r=async e=>{try{return(await Promise.allSettled(e)).map((e,t)=>"fulfilled"===e.status?e.value:("AbortError"!==e.reason?.name&&console.warn(`Promise ${t} rejected:`,e.reason?.message||e.reason),null))}catch(t){return console.error("safePromiseAll encountered an unexpected error:",t),new Array(e.length).fill(null)}},a=(e,t)=>u(e,"json",t),o=(e,t)=>u(e,"text",t),l=(e,t)=>u(e,"blob",t),c=["geocode.arcgis.com","services.arcgis.com"],u=async(e,t,s={})=>{const n={},i=new URL(e,window.location.origin);!c.some(e=>i.hostname.includes(e))&&(window.WS4KP_SERVER_AVAILABLE||e.toString().match(/api\.weather\.gov/))&&(n["user-agent"]="Weatherstar 4000+; weatherstar@netbymatt.com");const r={method:"GET",mode:"cors",type:"GET",retryCount:3,timeout:15e3,...s,headers:n},a=(e=>{if(!e)throw new Error(`rewriteUrl called with invalid argument: '${e}' (${typeof e})`);if("string"==typeof e&&!e.startsWith("http"))return e;if("string"!=typeof e&&!(e instanceof URL))throw new Error("rewriteUrl expects a URL string or URL object, received: "+typeof e);const t=new URL(e);return window.WS4KP_SERVER_AVAILABLE?("https://api.weather.gov"===t.origin?(t.protocol=window.location.protocol,t.host=window.location.host,t.pathname=`/api${t.pathname}`):"https://forecast.weather.gov"===t.origin?(t.protocol=window.location.protocol,t.host=window.location.host,t.pathname=`/forecast${t.pathname}`):"https://www.spc.noaa.gov"===t.origin?(t.protocol=window.location.protocol,t.host=window.location.host,t.pathname=`/spc${t.pathname}`):"https://radar.weather.gov"===t.origin?(t.protocol=window.location.protocol,t.host=window.location.host,t.pathname=`/radar${t.pathname}`):("https://mesonet.agron.iastate.edu"===t.origin||"undefined"!=typeof OVERRIDES&&OVERRIDES?.RADAR_HOST&&t.origin===`https://${OVERRIDES.RADAR_HOST}`)&&(t.protocol=window.location.protocol,t.host=window.location.host,t.pathname=`/mesonet${t.pathname}`),t):t})(e);r.data&&Object.keys(r.data).forEach(e=>{const t=r.data[e];a.searchParams.append(e,t)});try{const e=await d(a,r);if(!e.ok)throw new Error(`Fetch error ${e.status} ${e.statusText} while fetching ${e.url}`);let s;switch(t){case"json":s=await e.json();break;case"text":s=await e.text();break;case"blob":s=await e.blob();break;default:s=e}return r.returnUrl?{data:s,url:e.url}:s}catch(t){if("AbortError"===t.name)return console.log(`🛑 Fetch aborted for ${e} (background tab throttling?)`),null;throw"TimeoutError"===t.name?console.warn(`⏱️  Request timeout for ${e} (${t.message})`):t.message.includes("502")?console.warn(`🚪 Bad Gateway error for ${e}`):t.message.includes("503")?console.warn(`⌛ Temporarily unavailable for ${e}`):t.message.includes("504")?console.warn(`⏱️  Gateway Timeout for ${e}`):t.message.includes("500")?console.warn(`💥 Internal Server Error for ${e}`):t.message.includes("CORS")||t.message.includes("Access-Control")?console.warn(`🔒 CORS or Access Control error for ${e}`):console.warn(`❌ Fetch failed for ${e} (${t.message})`),t.status||(t.status=0),t.responseJSON||(t.responseJSON=null),t}},d=(e,t,s=null)=>new Promise((n,i)=>{const r=s??t.retryCount,a=new AbortController,o=Date.now(),l=setTimeout(()=>{a.abort()},t.timeout),c={...t,signal:a.signal},u=s=>{if(!t||"number"!=typeof t.retryCount)return console.error(`❌ Invalid params for retry: ${e}`),i(new Error("Invalid retry parameters"));const a=r-t.retryCount+1,o=t.retryCount-1,l=h(a);if(console.warn(`🔄 Retry ${a}/${r} for ${e} - ${s} (retrying in ${l}ms, ${o} retr${1===o?"y":"ies"} left)`),t&&t.stillWaiting&&"function"==typeof t.stillWaiting&&1===a)try{t.stillWaiting()}catch(t){console.warn(`⚠️ stillWaiting callback error for ${e}:`,t.message)}const c={...t,retryCount:Math.max(0,t.retryCount-1)};setTimeout(()=>{d(e,c,r).then(n).catch(i)},l)};fetch(e,c).then(e=>{if(clearTimeout(l),t&&t.retryCount>0&&e.status>=500&&e.status<=599){let t="Server error";return 502===e.status?t="Bad Gateway":503===e.status?t="Service Unavailable":504===e.status&&(t="Gateway Timeout"),u(`${t} ${e.status} ${e.statusText}`)}return n(e)}).catch(e=>{if(clearTimeout(l),"AbortError"===e.name){const e=Date.now()-o;if(e>=t.timeout-1e3){const s=`Request timeout after ${Math.round(e/1e3)}s`;if(t&&t.retryCount>0)return u(s);const n=new Error(`Request timeout after ${Math.round(e/1e3)}s`);return n.name="TimeoutError",void i(n)}}if(t&&t.retryCount>0&&"AbortError"!==e.name){const t="TimeoutError"===e.name?"Request timeout":`Network error: ${e.message}`;return u(t)}i(e)})}),h=e=>{switch(e){case 1:return 1e3;case 2:return 2e3;case 3:return 5e3;case 4:return 1e4;default:return 3e4}}},693:(e,t,s)=>{s.d(t,{Ik:()=>a});let n=null,i=null;const r=()=>null!==i?i:(()=>{if(null!==n)return n;let e="";const t=new URLSearchParams(window.location.search).get("debug");return e=t||("undefined"!=typeof OVERRIDES?OVERRIDES?.DEBUG:"")||"",n=e.trim()?new Set(e.split(",").map(e=>e.trim().toLowerCase()).filter(e=>e.length>0)):new Set,n})(),a=e=>{const t=r();return!!t.has("all")||t.has(e.toLowerCase())},o=(...e)=>(null===i&&(i=new Set(r())),e.forEach(e=>{i.add(e.toLowerCase())}),u()),l=(...e)=>(null===i&&(i=new Set(r())),e.forEach(e=>{const t=e.toLowerCase();"all"===t?i.clear():i.delete(t)}),u()),c=(...e)=>(i=new Set(e.map(e=>e.toLowerCase())),u()),u=()=>Array.from(r()).sort();"undefined"!=typeof window&&(window.debugFlag=a,window.debugEnable=o,window.debugDisable=l,window.debugSet=c,window.debugList=u)},704:(e,t,s)=>{var n=s(592),i=s(675),r=s(24),a=s(211),o=s(593),l=s(335),c=s(693);class u extends r.A{static BASE_FORECAST_DURATION_MS=5e3;constructor(e,t){super(e,t,"Local Forecast",!0),this.timing.baseDelay=u.BASE_FORECAST_DURATION_MS}async getData(e,t){if(!super.getData(e,t))return;const s=await this.getRawData(this.weatherParameters);if(!s&&!this.data)return void(this.isEnabled&&this.setStatus(n.Ay.failed));this.data=s||this.data;const i=d(this.data,this.weatherParameters.forecast);this.screenTexts=i.map(e=>{let t=`${e.DayName.toUpperCase()}...`;return t+=e.Text.toUpperCase().replace("..."," "),t});const r=this.screenTexts.map(e=>this.fillTemplate("forecast",{text:e})),a=this.elem.querySelector(".forecasts");a.innerHTML="",a.append(...r),this.pageHeight=a.parentNode.offsetHeight,this.calculateContentAwareTiming(r),this.calcNavTiming(),this.setStatus(n.Ay.loaded)}async getRawData(e){const t=await(0,i.oi)(e.forecast,{data:{units:o.A.units.value},retryCount:3,stillWaiting:()=>this.stillWaiting()});return t||!1}async drawCanvas(){super.drawCanvas();const e=-this.screenIndex*this.pageHeight;this.elem.querySelector(".forecasts").style.top=`${e}px`,this.finishDraw()}calculateContentAwareTiming(e){if(!e||0===e.length)return void(this.timing.delay=1);const t=u.BASE_FORECAST_DURATION_MS;this.timing.baseDelay=250;const s=e[0],n=window.getComputedStyle(s),i=parseInt(n.lineHeight,10),r=this.elem.querySelector(".local-forecast .container");let a;if(r){const e=window.getComputedStyle(r),t=r.offsetWidth,s=parseInt(e.paddingLeft,10)||0,n=parseInt(e.paddingRight,10)||0;a=t-s-n,(0,c.Ik)("localforecast")&&console.log(`LocalForecast: Using measurement width of ${a}px (container=${t}px, padding=${s}+${n}px)`)}else console.error("LocalForecast: Could not find forecast container for width calculation, using fallback width"),a=492;const o=[];e.forEach((e,t)=>{const s=e.offsetHeight,n=Math.round(s/i);if(n>7)o.push(n),(0,c.Ik)("localforecast")&&console.log(`LocalForecast: Forecast ${t} measured ${n} lines (${s}px direct measurement, ${i}px line-height)`);else{const s=e.innerHTML,n="<br/>".repeat(7);e.innerHTML=s+n;const r=e.offsetHeight,a=Math.round(r/i),l=Math.max(1,a-7);e.innerHTML=s,o.push(l),(0,c.Ik)("localforecast")&&console.log(`LocalForecast: Forecast ${t} measured ${l} lines (${r}px with padding - ${7*i}px = ${l*i}px actual, ${i}px line-height)`)}}),e.forEach(e=>{const t=Math.ceil(e.offsetHeight/this.pageHeight)*this.pageHeight;e.style.height=`${t}px`});const l=e[0].parentNode.scrollHeight;this.timing.totalScreens=Math.round(l/this.pageHeight);const d=[];o.forEach((e,t)=>{if(e<=7)d.push({forecastIndex:t,lines:e,type:"single"});else{let s=e,n=!0;for(;s>0;){const e=Math.min(s,7),i=n?"first-of-multi":"remainder";d.push({forecastIndex:t,lines:e,type:i}),s-=e,n=!1}}});const h=d.map((e,s)=>{const n=e.lines;let i;i=1===n?.6:2===n?.8:n>=6?1.4:1;const r=i*t,a=Math.round(r/this.timing.baseDelay);return(0,c.Ik)("localforecast")&&console.log(`LocalForecast: Screen ${s}: ${n} lines, ${i.toFixed(2)}x multiplier, ${r}ms desired, ${a} counts (forecast ${e.forecastIndex}, ${e.type})`),a});for(;h.length<this.timing.totalScreens;){const e=Math.round(t/this.timing.baseDelay);h.push(e),console.warn(`LocalForecast: using fallback timing for Screen ${h.length-1}: 5 lines, 1.00x multiplier, ${e} counts`)}if(h.length>this.timing.totalScreens){const e=h.splice(this.timing.totalScreens);console.warn(`LocalForecast: Truncated ${e.length} excess screen timings`)}if(this.timing.delay=h,(0,c.Ik)("localforecast")){console.log(`LocalForecast: Final screen count - calculated: ${d.length}, actual: ${this.timing.totalScreens}, timing array: ${h.length}`);const e=h.map(e=>e*this.timing.baseDelay/t);console.log("LocalForecast: Screen multipliers:",e),console.log("LocalForecast: Expected durations (ms):",h.map(e=>e*this.timing.baseDelay))}}}const d=(e,t)=>{const s=e.properties.periods;return(0,l.A)(s,t).slice(0,6).map(e=>({DayName:e.name.toUpperCase(),Text:e.detailedForecast}))};(0,a.Kb)(new u(7,"local-forecast"))},709:(e,t,s)=>{var n=s(592),i=s(675),r=s(900),a=s(125),o=s(24),l=s(211),c=s(593),u=s(950),d=s(693);class h extends o.A{constructor(e,t,s){super(e,t,"Travel Forecast",s),this.previousData=[],this.scrollCache={displayHeight:0,contentHeight:0,maxOffset:0,travelLines:null}}async getData(e,t){if(!super.getData(e,t))return;t||(this.previousData=[]);const s=TravelCities.map(async(e,t)=>{try{if(!e.point)throw new Error("No pre-loaded point");let s;if(s=await(0,i.oi)(`https://api.weather.gov/gridpoints/${e.point.wfo}/${e.point.x},${e.point.y}/forecast`,{data:{units:c.A.units.value}}),s)this.previousData[t]=s;else{if(!this.previousData?.[t])return(0,d.Ik)("verbose-failures")&&console.warn(`No travel forecast for ${e.Name} available`),{name:e.Name,error:!0};(0,d.Ik)("travelforecast")&&console.warn(`Using previous forecast data for ${e.Name} travel forecast`),s=this.previousData?.[t]}const n=s.properties.periods[0].isDaytime?0:1;return{today:0===n,high:s.properties.periods[n].temperature,low:s.properties.periods[n+1].temperature,name:e.Name,icon:(0,r.lL)(s.properties.periods[n].icon)}}catch(t){return console.error(`Unexpected error getting Travel Forecast for ${e.Name}: ${t.message}`),{name:e.Name,error:!0}}}),a=await(0,i.eo)(s);this.data=a;this.data.some(e=>e.high)?(this.setStatus(n.Ay.loaded),this.drawLongCanvas()):this.setStatus(n.Ay.noData)}async drawLongCanvas(){const e=this.elem.querySelector(".travel-lines");e.innerHTML="";const t=this.data.map(e=>{if(e.error)return!1;const t={city:e};if(e.icon){t.city=e.name;const{low:s,high:n}=e,i=Math.round(s).toString(),r=Math.round(n).toString();t.low=i,t.high=r;const{icon:a}=e;t.icon={type:"img",src:a}}else t.error="NO TRAVEL DATA AVAILABLE";return this.fillTemplate("travel-row",t)}).filter(e=>e);e.append(...t),this.setTiming(e)}async drawCanvas(){super.drawCanvas();const e=this.data;this.elem.querySelector(".header .title.dual .bottom").innerHTML=`For ${m(e)}`,this.finishDraw()}async showCanvas(){await this.drawCanvas(),super.showCanvas()}screenIndexChange(){this.baseCountChange(this.navBaseCount)}baseCountChange(e){const t=this.elem.querySelector(".travel-lines");if(!t)return;this.scrollCache.travelLines===t&&0!==this.scrollCache.displayHeight||(this.scrollCache.displayHeight=this.elem.querySelector(".main").offsetHeight,this.scrollCache.contentHeight=t.offsetHeight,this.scrollCache.maxOffset=Math.max(0,this.scrollCache.contentHeight-this.scrollCache.displayHeight),this.scrollCache.travelLines=t,t.style.willChange="transform",t.style.backfaceVisibility="hidden");let s=Math.min(this.scrollCache.maxOffset,(e-this.scrollTiming.initialCounts)*this.scrollTiming.pixelsPerCount);s<0&&(s=0),t.style.transform=`translateY(-${Math.round(s)}px)`}getLongCanvas(){return this.longCanvas}setTiming(e){const t=this.elem.querySelector(".main"),s=(0,u.A)(e,t,{staticDisplay:5});this.timing.baseDelay=s.baseDelay,this.timing.delay=s.delay,this.scrollTiming=s.scrollTiming,this.calcNavTiming()}}const m=e=>e.reduce((e,t)=>{if(t&&""===e){return a.c9.local().plus({days:t.today?0:1}).toLocaleString({weekday:"long"})}return e},"");(0,l.Kb)(new h(5,"travel",!0))},749:(e,t,s)=>{s.d(t,{A:()=>f});var n=s(592),i=s(675),r=s(24),a=s(211),o=s(950),l=s(693);const c={Extreme:10,Severe:5},u={"Hurricane Warning":2,"Tornado Warning":3,"Severe Thunderstorm Warning":1};class d extends r.A{constructor(e,t,s){super(e,t,"Hazards",s),this.showOnProgress=!1,this.okToDrawCurrentConditions=!1,this.refreshTime=6e4,this.timing.totalScreens=0,this.viewedAlerts=new Set,this.viewedGetCount=0,this.scrollCache={displayHeight:0,contentHeight:0,maxOffset:0,hazardLines:null}}async getData(e,t){const s=super.getData(e,t);null===this.autoRefreshHandle&&this.setAutoReload();const r=this.checkbox.querySelector(".alert");r.classList.remove("show"),t||(this.viewedGetCount=0,this.viewedAlerts.clear());try{const e=new URL("https://api.weather.gov/alerts/active");e.searchParams.append("point",`${this.weatherParameters.latitude},${this.weatherParameters.longitude}`),e.searchParams.append("status","actual");const t=await(0,i.oi)(e,{retryCount:3,stillWaiting:()=>this.stillWaiting()});if(t){const e=(t.features??[]).slice(0,5),s=e.reduce((e,t)=>e||"Immediate"===t.properties.urgency,!1),n=e.sort((e,t)=>h(t.properties.severity,t.properties.event)-h(e.properties.severity,e.properties.event)).filter(e=>"Unknown"!==e.properties.severity&&(!s||"Immediate"===e.properties.urgency));this.data=n}else(0,l.Ik)("verbose-failures")&&console.warn("Active Alerts request failed; assuming no active alerts"),this.data=[];this.viewedGetCount>=10&&(this.viewedGetCount=0,this.viewedAlerts.clear()),this.viewedGetCount+=1;this.data.reduce((e,t)=>this.viewedAlerts.has(t.id)?e:e+1,0)>0&&r.classList.add("show"),this.isEnabled&&this.drawLongCanvas()}catch(e){return console.error(`Unexpected Active Alerts error: ${e.message}`),this.isEnabled&&this.setStatus(n.Ay.failed),void this.getDataCallback(void 0)}this.getDataCallback(),s&&this.drawLongCanvas()}async drawLongCanvas(){const e=this.elem.querySelector(".hazard-lines");e.innerHTML="";const t=this.data.filter(e=>!this.viewedAlerts.has(e.id)).map(e=>{const t={},s=e.properties.description.replaceAll("\n\n","<br/><br/>").replaceAll("\n"," ").replace(/(\S)\.\.\.(\S)/g,"$1... $2");return t["hazard-text"]=`${e.properties.event}<br/><br/>${s}<br/><br/><br/><br/>`,this.fillTemplate("hazard",t)});if(e.append(...t),0===t.length)return this.setStatus(n.Ay.loaded),this.timing.totalScreens=0,void this.setStatus(n.Ay.loaded);this.setTiming(e),this.setStatus(n.Ay.loaded)}setTiming(e){const t=this.elem.querySelector(".main"),s=(0,o.A)(e,t,{finalPause:2});this.timing.baseDelay=s.baseDelay,this.timing.delay=s.delay,this.scrollTiming=s.scrollTiming,this.calcNavTiming()}drawCanvas(){super.drawCanvas(),this.finishDraw()}showCanvas(){this.drawCanvas(),super.showCanvas()}screenIndexChange(){this.baseCountChange(this.navBaseCount)}baseCountChange(e){const t=this.elem.querySelector(".hazard-lines");if(!t)return;this.scrollCache.hazardLines===t&&0!==this.scrollCache.displayHeight||(this.scrollCache.displayHeight=this.elem.querySelector(".main").offsetHeight,this.scrollCache.contentHeight=t.offsetHeight,this.scrollCache.maxOffset=Math.max(0,this.scrollCache.contentHeight-this.scrollCache.displayHeight),this.scrollCache.hazardLines=t,t.style.willChange="transform",t.style.backfaceVisibility="hidden");let s=Math.min(this.scrollCache.maxOffset,(e-this.scrollTiming.initialCounts)*this.scrollTiming.pixelsPerCount);s<0&&(s=0),t.style.transform=`translateY(-${Math.round(s)}px)`}screenIndexFromBaseCount(){const e=super.screenIndexFromBaseCount();return!1===e&&(this.timing.totalScreens=0,this?.data?.forEach(e=>this.viewedAlerts.add(e.id))),e}async getHazards(e){return e&&this.stillWaitingCallbacks.push(e),new Promise(e=>{this.data&&e(this.data),this.getDataCallbacks.push(()=>e(this.data))})}}const h=(e,t)=>(c[e]??0)+(u[t]??0),m=new d(0,"hazards",!0);(0,a.Kb)(m);const f=m.getHazards.bind(m)},833:(e,t,s)=>{var n=s(592),i=s(675),r=s(125),a=s(24),o=s(211);const l=(e,t)=>{const s=e[0],n=e[1];let i=!1;for(let e=0,r=t.length-1;e<t.length;r=e++){const a=t[e][0],o=t[e][1],l=t[r][0],c=t[r][1];o>n!=c>n&&s<(l-a)*(n-o)/(c-o)+a&&(i=!i)}return i},c=(e,t)=>{let s=[[...t.coordinates]];"MultiPolygon"===t.type&&(s=[...t.coordinates]);let n=!1;return s.forEach(t=>{const s=[...t];if(n)return;const i=s.shift();n=l(e,i),n&&s.forEach(t=>{l(e,t)&&(n=!1)})}),n};var u=s(693);const d={TSTM:60,MRGL:150,SLGT:210,ENH:270,MDT:330,HIGH:390};class h extends a.A{constructor(e,t){super(e,t,"SPC Outlook",!0),this.showOnProgress=!1,this.files=[null,null,null].map((e,t)=>`https://www.spc.noaa.gov/products/outlook/day${t+1}otlk_cat.nolyr.geojson`),this.timing.totalScreens=1}async getData(e,t){if(e&&(this.weatherParameters=e),super.getData(e,t)){if(!this.rawOutlookData||t)try{const e=this.files.map(e=>(0,i.oi)(e,{retryCount:1,timeout:1e4}));if(this.rawOutlookData=await(0,i.eo)(e),this.rawOutlookData=this.rawOutlookData.filter(e=>e&&e.features),0===this.rawOutlookData.length)return(0,u.Ik)("verbose-failures")&&console.warn("SPC Outlook has zero days of data"),void(this.isEnabled&&this.setStatus(n.Ay.failed));this.rawOutlookData.length<this.files.length&&(0,u.Ik)("verbose-failures")&&console.warn(`SPC Outlook only loaded ${this.rawOutlookData.length} of ${this.files.length} days successfully`)}catch(e){return console.error(`Unexpected error getting SPC Outlook data: ${e.message}`),void(this.isEnabled&&this.setStatus(n.Ay.failed))}this.data=((e,t)=>{const s=[];return t.forEach((t,n)=>{s[n]=!1,t&&t.features&&Array.isArray(t.features)&&t.features.forEach(t=>{t.geometry.coordinates&&c(e,t.geometry)&&(s[n]=t.properties)})}),s})([this.weatherParameters.longitude,this.weatherParameters.latitude],this.rawOutlookData),this.data.reduce((e,t)=>e||!!t,!1)?this.timing.totalScreens=1:this.timing.totalScreens=0,this.calcNavTiming(),this.screenIndex=0,this.setStatus(n.Ay.loaded)}}async drawCanvas(){super.drawCanvas();const e=this.data.map((e,t)=>{const s=r.c9.now().plus({days:t}).toLocaleString({weekday:"long"}),n={};n["day-name"]=s;const i=this.fillTemplate("day",n),a=i.querySelector(".risk-bar");return e.LABEL?a.style.width=`${d[e.LABEL]}px`:a.style.display="none",i}),t=this.elem.querySelector(".days");t.innerHTML="",t.append(...e),this.finishDraw()}}(0,o.Kb)(new h(10,"spc-outlook"))},891:(e,t,s)=>{s.d(t,{C:()=>n});const n=e=>[/^[ A-Za-z]+ \/ /,/^[ A-Za-z]+\//,/^[ A-Za-z]+, /].reduce((e,t)=>e.replace(t,""),e)},900:(e,t,s)=>{s.d(t,{ZJ:()=>u,FD:()=>a,lL:()=>l});var n=s(693);const i=(e,t)=>{if(!e)throw new Error("No icon URL provided");const s=e.match(/\/icons\/(?<set>\w+)\/(?<timeOfDay>day|night)\/(?<condition>[^?]+)(?:\?(?<params>.*))?$/i);if(!s?.groups)throw new Error(`Unable to parse icon URL format: ${e}`);const{timeOfDay:i,condition:r}=s.groups;let a,o,l;if(void 0!==t?a=t:"day"===i?a=!1:"night"===i?a=!0:(console.warn(`parseIconUrl: unexpected timeOfDay value: ${i}`),a=!1),r.includes("/")){const e=r.split("/"),t=e[0]||"",s=e[1]||"",[i,a]=t.split(","),[c,u]=s.split(","),d=parseInt(a,10)||100,h=parseInt(u,10)||100;c!==i?(o=c,l=h,(0,n.Ik)("icons")&&console.debug(`2️⃣ Using second condition: '${s}' instead of first '${t}'`)):(o=i,l=d)}else{const[e,t]=r.split(",");o=e,l=parseInt(t,10)||100}return{conditionIcon:o,probability:l,isNightTime:a}},r=e=>`images/icons/current-conditions/${e}`,a=(e,t)=>{let s,n,a;try{({conditionIcon:s,probability:n,isNightTime:a}=i(e,t))}catch(e){return console.warn(`largeIcon: ${e.message}`),r(`No-Data.gif?${s}${a?"-n":""}`)}switch(s+(a?"-n":"")){case"skc":case"hot":case"haze":case"cold":return r("Sunny.gif");case"skc-n":case"haze-n":case"cold-n":return r("Clear.gif");case"dust":case"dust-n":case"smoke":case"smoke-n":return r("Smoke.gif");case"few":case"sct":case"bkn":return r("Partly-Cloudy.gif");case"few-n":case"sct-n":case"bkn-n":return r("Mostly-Clear.gif");case"ovc":case"ovc-n":return r("Cloudy.gif");case"fog":case"fog-n":return r("Fog.gif");case"rain_sleet":case"rain_sleet-n":return r("Rain-Sleet.gif");case"sleet":case"sleet-n":return r("Sleet.gif");case"rain_showers":case"rain_showers_hi":case"rain_showers_high":case"rain_showers-n":case"rain_showers_hi-n":case"rain_showers_high-n":return r("Shower.gif");case"rain":case"rain-n":return r("Rain.gif");case"snow":case"snow-n":return r(n>50?"Heavy-Snow.gif":"Light-Snow.gif");case"rain_snow":case"rain_snow-n":return r("Rain-Snow.gif");case"snow_fzra":case"snow_fzra-n":return r("Freezing-Rain-Snow.gif");case"fzra":case"fzra-n":case"rain_fzra":case"rain_fzra-n":return r("Freezing-Rain.gif");case"snow_sleet":case"snow_sleet-n":return r("Snow-Sleet.gif");case"tsra_sct":case"tsra":return r("Scattered-Thunderstorms-Day.gif");case"tsra_sct-n":case"tsra-n":return r("Scattered-Thunderstorms-Night.gif");case"tsra_hi":case"tsra_hi-n":case"tornado":case"tornado-n":case"hurricane":case"hurricane-n":case"tropical_storm":case"tropical_storm-n":return r("Thunderstorm.gif");case"wind_skc":case"wind_skc-n":case"wind_few":case"wind_few-n":case"wind_sct":case"wind_sct-n":case"wind_bkn":case"wind_bkn-n":case"wind_ovc":case"wind_ovc-n":return r("Windy.gif");case"blizzard":case"blizzard-n":return r("Blowing-Snow.gif");default:return console.warn(`Unknown weather condition '${s}' from ${e}; using fallback icon`),r(`No-Data.gif?${s}${a?"-n":""}`)}},o=e=>`images/icons/regional-maps/${e}`,l=(e,t)=>{let s,n,r;try{({conditionIcon:s,probability:n,isNightTime:r}=i(e,t))}catch(e){return console.warn(`smallIcon: ${e.message}`),o(t?"Clear-1992.gif":"Sunny.gif")}switch(s+(r?"-n":"")){case"skc":return o("Sunny.gif");case"skc-n":return o("Clear-1992.gif");case"few":case"sct":return o("Partly-Cloudy.gif");case"few-n":case"bkn-n":return o("Partly-Clear-1994.gif");case"sct-n":return o("Partly-Cloudy-Night.gif");case"bkn":return o("Mostly-Cloudy-1994.gif");case"ovc":case"ovc-n":return o("Cloudy.gif");case"fog":case"fog-n":return o("Fog.gif");case"rain":case"rain-n":return o("Rain-1992.gif");case"rain_showers":case"rain_showers_hi":return o("Scattered-Showers-1994.gif");case"rain_showers-n":case"rain_showers_hi-n":return o("Scattered-Showers-Night-1994.gif");case"snow":case"snow-n":return o(n>50?"Heavy-Snow-1994.gif":"Light-Snow.gif");case"rain_snow":case"rain_snow-n":return o("Rain-Snow-1992.gif");case"rain_sleet":return o("Rain-Sleet.gif");case"snow_sleet":case"snow_sleet-n":return o("Snow-Sleet.gif");case"sleet":case"sleet-n":return o("Sleet.gif");case"fzra":case"fzra-n":case"rain_fzra":case"rain_fzra-n":return o("Freezing-Rain-1992.gif");case"snow_fzra":case"snow_fzra-n":return o("Freezing-Rain-Snow-1994.gif");case"tsra":case"tsra_sct":return o("Scattered-Tstorms-1994.gif");case"tsra-n":case"tsra_sct-n":return o("Scattered-Tstorms-Night-1994.gif");case"tsra_hi":case"tsra_hi-n":case"tornado":case"tornado-n":case"hurricane":case"hurricane-n":case"tropical_storm":case"tropical_storm-n":return o("Thunderstorm.gif");case"wind_skc":return o("Sunny-Wind-1994.gif");case"wind_skc-n":case"wind_sct-n":return o("Clear-Wind-1994.gif");case"wind_few":case"wind_few-n":case"wind_sct":return o("Wind.gif");case"wind_bkn":case"wind_bkn-n":case"wind_ovc":case"wind_ovc-n":return o("Cloudy-Wind.gif");case"dust":case"dust-n":case"smoke":case"smoke-n":return o("Smoke.gif");case"haze":case"haze-n":return o("Haze.gif");case"hot":return o("Hot.gif");case"cold":case"cold-n":return o("Cold.gif");case"blizzard":case"blizzard-n":return o("Blowing Snow.gif");default:return console.warn(`Unknown weather condition '${s}' from ${e}; using fallback icon`),o(r?"Clear-1992.gif":"Sunny.gif")}},c=e=>`images/icons/regional-maps/${e}`,u=(e,t,s,n,i,r,a=!1)=>{let o=!1,l=!1,u=!1,d=!1,h=!1;return t.forEach(e=>{e.weather&&(e.weather.toLowerCase().includes("thunder")&&(o=!0),e.weather.toLowerCase().includes("snow")&&(l=!0),e.weather.toLowerCase().includes("ice")&&(u=!0),e.weather.toLowerCase().includes("fog")&&(d=!0),e.weather.toLowerCase().includes("wind")&&(h=!0))}),c(s>0||u?"Freezing-Rain-1992.gif":i>10?r>30||h?"Blowing-Snow.gif":"Heavy-Snow-1994.gif":(i>0||l)&&o?"ThunderSnow.gif":i>0||l?"Light-Snow.gif":o?"Thunderstorm.gif":n>70?"Rain-1992.gif":n>30?a?"Scattered-Showers-Night-1994.gif":"Scattered-Showers-1994.gif":d?"Fog.gif":e>70?"Cloudy.gif":e>50?a?"Partly-Clear-1994.gif":"Mostly-Cloudy-1994.gif":e>30?a?"Partly-Cloudy-Night.gif":"Partly-Cloudy.gif":a?"Clear-1992.gif":"Sunny.gif")}},950:(e,t,s)=>{s.d(t,{A:()=>n});const n=(e,t,s={})=>{const{scrollSpeed:n=50,initialDelay:i=3,finalPause:r=3,staticDisplay:a=i+r,baseDelay:o=40}=s,l=e=>Math.ceil(1e3*e/o),c=t.offsetHeight,u=e.scrollHeight,d=Math.max(0,u-c),h=d>0?d/n:0,m=l(i),f=l(h),p=l(r),g=l(a),y=f>0?d/f:0,w=[];return 0===d?w.push(g):w.push(m+f+p),{baseDelay:o,delay:w,scrollTiming:{initialCounts:m,pixelsPerCount:y}}}},951:(e,t,s)=>{var n=s(592),i=s(24),r=s(211);class a extends i.A{constructor(e,t){super(e,t,"",!1),this.timing=!1,document.addEventListener("DOMContentLoaded",()=>{this.version=document.querySelector("#version").innerHTML.replace(/\s/g,""),this.elem.querySelector(".container").addEventListener("click",this.lineClick.bind(this))}),this.okToDrawCurrentConditions=!1}async drawCanvas(e,t){if(!this.elem)return;if(!1===this.elem.classList.contains("show"))return;if(super.drawCanvas(),this.progressCover||(this.progressCover=this.elem.querySelector(".scroll .cover")),!e)return;const s=e.map((e,t)=>{if(!1===e.showOnProgress)return!1;const s={name:e.name},i=(0,n.qx)(e.status),r=this.fillTemplate("item",s);if(!r)return!1;const a=r.querySelector(".links");return a.classList.remove(...n.LR),a.classList.add(i),a.dataset.index=t,r}).filter(e=>e),i=this.elem.querySelector(".container");i.innerHTML="",i.append(...s),this.finishDraw();const r=t/e.length;this.progressCover.style.width=100*(1-r)+"%",r<1?this.progressCover.parentNode.classList.add("show"):setTimeout(()=>this.progressCover.parentNode.classList.remove("show"),1e3)}lineClick(e){const t=e.target?.parentNode?.dataset?.index;if(void 0===t)return;const s=+t;(0,r.iU)("navButton");const i=(0,r.pv)(s);i&&i.status===n.Ay.loaded&&(i.showCanvas(r.ab.command.firstFrame),this.elem.classList.remove("show"))}}const o=new a(-1,"progress");(0,r.Lg)(o)},957:(e,t,s)=>{s.d(t,{g:()=>n});const n=(e,t)=>{[...document.querySelectorAll(e)].forEach(t)}},999:(e,t,s)=>{s.d(t,{J:()=>c});var n=s(957);document.addEventListener("DOMContentLoaded",()=>r());const i={kiosk:"settings-kiosk-checkbox"},r=()=>{const e=document.querySelector("#share-link");e.addEventListener("click",a),navigator?.clipboard||(e.textContent="Get Permalink")},a=async e=>{e.preventDefault();const t={};(0,n.g)("input[type=checkbox]",e=>{e?.id&&(t[e.id]=e?.checked??!1)}),(0,n.g)("select",e=>{e?.id&&(t[e.id]=encodeURIComponent(e?.value??""))}),(0,n.g)("input[type=text]",e=>{e?.id&&(t[e.id]=e?.value??0)}),t.latLonQuery=localStorage.getItem("latLonQuery"),t.latLon=localStorage.getItem("latLon");const s=new URLSearchParams(t).toString(),i=new URL(`?${s}`,document.location.href);navigator?.clipboard?o(i):l(i)},o=async e=>{try{await navigator.clipboard.writeText(e.toString());const t=document.querySelector("#share-link-copied");t.style.display="inline",setTimeout(()=>{t.style.display="none"},5e3)}catch(e){console.error(e)}},l=e=>{const t=document.querySelector("#share-link-instructions"),s=t.querySelector("#share-link-url");s.value=e,t.style.display="inline",s.focus(),s.select()},c=()=>{if(c.params)return c.params;const e=[...new URLSearchParams(window.location.search)];return e.forEach(t=>{const s=i[t[0]];s&&e.push([s,t[1]])}),c.params=Object.fromEntries(e),c.params}}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,s),r.exports}s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s(632),s(749),s(423),s(247),s(833),s(900),s(498),s(73),s(2),s(94),s(704),s(19),s(187),s(709),s(951),s(218),s(77);s(31)})();